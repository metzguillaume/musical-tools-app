/*! For license information please see main.d2bd464f.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),_=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var j=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function E(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function O(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case S:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case _:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return O(e(t))}catch(n){}}return null}var P=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},F=[],L=-1;function V(e){return{current:e}}function z(e){0>L||(e.current=F[L],F[L]=null,L--)}function q(e,t){L++,F[L]=e.current,e.current=t}var B=V(null),U=V(null),W=V(null),G=V(null);function H(e,t){switch(q(W,t),q(U,e),q(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(B),q(B,e)}function Q(){z(B),z(U),z(W)}function Y(e){null!==e.memoizedState&&q(G,e);var t=B.current,n=id(t,e.type);t!==n&&(q(U,e),q(B,n))}function $(e){U.current===e&&(z(B),z(U)),G.current===e&&(z(G),Yd._currentValue=R)}var X=Object.prototype.hasOwnProperty,Z=r.unstable_scheduleCallback,K=r.unstable_cancelCallback,J=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=be(r):0!==(a&=o)?s=be(a):n||0!==(n=o&~e)&&(s=be(n)):0!==(o=r&~i)?s=be(o):0!==a?s=be(a):n||0!==(n=r&~e)&&(s=be(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function ke(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ne(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function je(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ee(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Me=Math.random().toString(36).slice(2),Oe="__reactFiber$"+Me,Pe="__reactProps$"+Me,De="__reactContainer$"+Me,Ie="__reactEvents$"+Me,Re="__reactListeners$"+Me,Fe="__reactHandles$"+Me,Le="__reactResources$"+Me,Ve="__reactMarker$"+Me;function ze(e){delete e[Oe],delete e[Pe],delete e[Ie],delete e[Re],delete e[Fe]}function qe(e){var t=e[Oe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[De]||n[Oe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yd(e);null!==e;){if(n=e[Oe])return n;e=yd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Oe]||e[De]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function We(e){var t=e[Le];return t||(t=e[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ve]=!0}var He=new Set,Qe={};function Ye(e,t){$e(e,t),$e(e+"Capture",t)}function $e(e,t){for(Qe[e]=t,e=0;e<t.length;e++)He.add(t[e])}var Xe,Ze,Ke=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Je={},et={};function tt(e,t,n){if(s=t,X.call(et,s)||!X.call(Je,s)&&(Ke.test(s)?et[s]=!0:(Je[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Ze=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Ze}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?bt(e,a,ct(t)):null!=n?bt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function bt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(P(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&St(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&St(e,i,t[i])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return jt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Et=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Pt=null;function Dt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Pe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Pe]||null;if(!s)throw Error(a(90));gt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var It=!1;function Rt(e,t,n){if(It)return e(t,n);It=!0;try{return e(t)}finally{if(It=!1,(null!==Ot||null!==Pt)&&(qc(),Ot&&(t=Ot,e=Pt,Pt=Ot=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Pe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Lt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Lt)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Ph){Vt=!1}var qt=null,Bt=null,Ut=null;function Wt(){if(Ut)return Ut;var e,t,n=Bt,r=n.length,s="value"in qt?qt.value:qt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Ut=s.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ht(){return!0}function Qt(){return!1}function Yt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Ht:Qt,this.isPropagationStopped=Qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ht)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ht)},persist:function(){},isPersistent:Ht}),t}var $t,Xt,Zt,Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=Yt(Kt),en=h({},Kt,{view:0,detail:0}),tn=Yt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?($t=e.screenX-Zt.screenX,Xt=e.screenY-Zt.screenY):Xt=$t=0,Zt=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Yt(nn),sn=Yt(h({},nn,{dataTransfer:0})),an=Yt(h({},en,{relatedTarget:0})),on=Yt(h({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Yt(h({},Kt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Yt(h({},Kt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=Yt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Yt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),bn=Yt(h({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0})),yn=Yt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Yt(h({},Kt,{newState:0,oldState:0})),_n=[9,13,27,32],wn=Lt&&"CompositionEvent"in window,kn=null;Lt&&"documentMode"in document&&(kn=document.documentMode);var Sn=Lt&&"TextEvent"in window&&!kn,Cn=Lt&&(!wn||kn&&8<kn&&11>=kn),Nn=String.fromCharCode(32),Tn=!1;function jn(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var En=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function Pn(e,t,n,r){Ot?Pt?Pt.push(r):Pt=[r]:Ot=r,0<(t=Wu(t,"onChange")).length&&(n=new Jt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dn=null,In=null;function Rn(e){Ru(e,0)}function Fn(e){if(ht(Ue(e)))return e}function Ln(e,t){if("change"===e)return t}var Vn=!1;if(Lt){var zn;if(Lt){var qn="oninput"in document;if(!qn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),qn="function"===typeof Bn.oninput}zn=qn}else zn=!1;Vn=zn&&(!document.documentMode||9<document.documentMode)}function Un(){Dn&&(Dn.detachEvent("onpropertychange",Wn),In=Dn=null)}function Wn(e){if("value"===e.propertyName&&Fn(In)){var t=[];Pn(t,In,e,Mt(e)),Rt(Rn,t)}}function Gn(e,t,n){"focusin"===e?(Un(),In=n,(Dn=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Un()}function Hn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(In)}function Qn(e,t){if("click"===e)return Fn(t)}function Yn(e,t){if("input"===e||"change"===e)return Fn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!X.call(t,s)||!$n(e[s],t[s]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function Jn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Lt&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Xn(ir,r)||(ir=r,0<(r=Wu(sr,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Lt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),br=hr("transitioncancel"),yr=hr("transitionend"),xr=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){xr.set(e,t),Ye(t,[e])}_r.push("scrollEnd");var kr=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},kr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Nr=0,Tr=0;function jr(){for(var e=Nr,t=Tr=Nr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var s=Cr[t];Cr[t++]=null;var i=Cr[t];if(Cr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Or(n,s,i)}}function Ar(e,t,n,r){Cr[Nr++]=e,Cr[Nr++]=t,Cr[Nr++]=n,Cr[Nr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Er(e,t,n,r){return Ar(e,t,n,r),Pr(e)}function Mr(e,t){return Ar(e,null,null,t),Pr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-fe(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Pr(e){if(50<Oc)throw Oc=0,Pc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function Ir(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,n,r){return new Ir(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lr(e,t){var n=e.alternate;return null===n?((n=Rr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Fr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Rr(31,n,t,s)).elementType=T,e.lanes=i,e;case g:return qr(n.children,s,i,t);case v:o=8,s|=24;break;case b:return(e=Rr(12,n,t,2|s)).elementType=b,e.lanes=i,e;case k:return(e=Rr(13,n,t,s)).elementType=k,e.lanes=i,e;case S:return(e=Rr(19,n,t,s)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case _:o=10;break e;case x:o=9;break e;case w:o=11;break e;case C:o=14;break e;case N:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Rr(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function qr(e,t,n,r){return(e=Rr(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Rr(6,e,null,t)).lanes=n,e}function Ur(e,t,n){return(t=Rr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],Gr=0,Hr=null,Qr=0,Yr=[],$r=0,Xr=null,Zr=1,Kr="";function Jr(e,t){Wr[Gr++]=Qr,Wr[Gr++]=Hr,Hr=e,Qr=t}function es(e,t,n){Yr[$r++]=Zr,Yr[$r++]=Kr,Yr[$r++]=Xr,Xr=e;var r=Zr;e=Kr;var s=32-fe(r)-1;r&=~(1<<s),n+=1;var i=32-fe(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Zr=1<<32-fe(t)+s|n<<s|r,Kr=i+e}else Zr=1<<i|n<<s|r,Kr=e}function ts(e){null!==e.return&&(Jr(e,1),es(e,1,0))}function ns(e){for(;e===Hr;)Hr=Wr[--Gr],Wr[Gr]=null,Qr=Wr[--Gr],Wr[Gr]=null;for(;e===Xr;)Xr=Yr[--$r],Yr[$r]=null,Kr=Yr[--$r],Yr[$r]=null,Zr=Yr[--$r],Yr[$r]=null}var rs=null,ss=null,is=!1,as=null,os=!1,ls=Error(a(519));function cs(e){throw ms(Sr(Error(a(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Oe]=e,t[Pe]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Du.length;n++)Fu(Du[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),_t(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,fd(e.type)?(e=bd,bd=null,ss=e):ss=n):ss=rs?vd(e.stateNode.nextSibling):null;return!0}function fs(){ss=rs=null,is=!1}function ps(){var e=as;return null!==e&&(null===yc?yc=e:yc.push.apply(yc,e),as=null),e}function ms(e){null===as?as=[e]:as.push(e)}var gs=V(null),vs=null,bs=null;function ys(e,t,n){q(gs,t._currentValue),t._currentValue=n}function xs(e){e._currentValue=gs.current,z(gs)}function _s(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ws(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),_s(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),_s(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function ks(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;$n(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===G.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}s=s.return}null!==e&&ws(t,e,n,r),t.flags|=262144}function Ss(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){vs=e,bs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ns(e){return js(vs,e)}function Ts(e,t){return null===vs&&Cs(e),js(e,t)}function js(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bs){if(null===e)throw Error(a(308));bs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bs=bs.next=t;return n}var As="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Es=r.unstable_scheduleCallback,Ms=r.unstable_NormalPriority,Os={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ps(){return{controller:new As,data:new Map,refCount:0}}function Ds(e){e.refCount--,0===e.refCount&&Es(Ms,function(){e.controller.abort()})}var Is=null,Rs=0,Fs=0,Ls=null;function Vs(){if(0===--Rs&&null!==Is){null!==Ls&&(Ls.status="fulfilled");var e=Is;Is=null,Fs=0,Ls=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zs=D.S;D.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Is){var n=Is=[];Rs=0,Fs=Au(),Ls={status:"pending",value:void 0,then:function(e){n.push(e)}}}Rs++,t.then(Vs,Vs)}(0,t),null!==zs&&zs(e,t)};var qs=V(null);function Bs(){var e=qs.current;return null!==e?e:rc.pooledCache}function Us(e,t){q(qs,null===t?qs.current:t.pool)}function Ws(){var e=Bs();return null===e?null:{parent:Os._currentValue,pool:e}}var Gs=Error(a(460)),Hs=Error(a(474)),Qs=Error(a(542)),Ys={then:function(){}};function $s(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xs(){}function Zs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xs,Xs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xs,Xs);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Ks=t,Gs}}var Ks=null;function Js(){if(null===Ks)throw Error(a(459));var e=Ks;return Ks=null,e}function ei(e){if(e===Gs||e===Qs)throw Error(a(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Pr(e),Or(e,null,n),t}return Ar(e,r,t,n),Pr(e)}function ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Ls)throw Ls}}function ui(e,t,n,r){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(ic&f)===f:(r&f)===f){0!==f&&f===Fs&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(v,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ti=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=f;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(p=o).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),fc|=a,e.lanes=a,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var fi=V(null),pi=V(0);function mi(e,t){q(pi,e=dc),q(fi,t),dc=e|t.baseLanes}function gi(){q(pi,dc),q(fi,fi.current)}function vi(){dc=pi.current,z(fi),z(pi)}var bi=0,yi=null,xi=null,_i=null,wi=!1,ki=!1,Si=!1,Ci=0,Ni=0,Ti=null,ji=0;function Ai(){throw Error(a(321))}function Ei(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function Mi(e,t,n,r,s,i){return bi=i,yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?Ga:Ha,Si=!1,i=n(r,s),Si=!1,ki&&(i=Pi(t,n,r,s)),Oi(e),i}function Oi(e){D.H=Wa;var t=null!==xi&&null!==xi.next;if(bi=0,_i=xi=yi=null,wi=!1,Ni=0,Ti=null,t)throw Error(a(300));null===e||To||null!==(e=e.dependencies)&&Ss(e)&&(To=!0)}function Pi(e,t,n,r){yi=e;var s=0;do{if(ki&&(Ti=null),Ni=0,ki=!1,25<=s)throw Error(a(301));if(s+=1,_i=xi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}D.H=Qa,i=t(n,r)}while(ki);return i}function Di(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?zi(t):t,e=e.useState()[0],(null!==xi?xi.memoizedState:null)!==e&&(yi.flags|=1024),t}function Ii(){var e=0!==Ci;return Ci=0,e}function Ri(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fi(e){if(wi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}wi=!1}bi=0,_i=xi=yi=null,ki=!1,Ni=Ci=0,Ti=null}function Li(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_i?yi.memoizedState=_i=e:_i=_i.next=e,_i}function Vi(){if(null===xi){var e=yi.alternate;e=null!==e?e.memoizedState:null}else e=xi.next;var t=null===_i?yi.memoizedState:_i.next;if(null!==t)_i=t,xi=e;else{if(null===e){if(null===yi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(xi=e).memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},null===_i?yi.memoizedState=_i=e:_i=_i.next=e}return _i}function zi(e){var t=Ni;return Ni+=1,null===Ti&&(Ti=[]),e=Zs(Ti,e,t),t=yi,null===(null===_i?t.memoizedState:_i.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?Ga:Ha),e}function qi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zi(e);if(e.$$typeof===_)return Ns(e)}throw Error(a(438,String(e)))}function Bi(e){var t=null,n=yi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=yi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=j;return t.index++,n}function Ui(e,t){return"function"===typeof t?t(e):t}function Wi(e){return Gi(Vi(),xi,e)}function Gi(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(bi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Fs&&(d=!0);else{if((bi&f)===f){u=u.next,f===Fs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,yi.lanes|=f,fc|=f}h=u.action,Si&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,yi.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!$n(i,e.memoizedState)&&(To=!0,d&&null!==(n=Ls)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Hi(e){var t=Vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);$n(i,t.memoizedState)||(To=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Qi(e,t,n){var r=yi,s=Vi(),i=is;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!$n((xi||s).memoizedState,n);if(o&&(s.memoizedState=n,To=!0),s=s.queue,ga(2048,8,Xi.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==_i&&1&_i.memoizedState.tag){if(r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},$i.bind(null,r,s,n,t),null),null===rc)throw Error(a(349));i||0!==(124&bi)||Yi(r,t,n)}return n}function Yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=yi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function $i(e,t,n,r){t.value=n,t.getSnapshot=r,Zi(t)&&Ki(e)}function Xi(e,t,n){return n(function(){Zi(t)&&Ki(e)})}function Zi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function Ki(e){var t=Mr(e,2);null!==t&&Rc(t,e,2)}function Ji(e){var t=Li();if("function"===typeof e){var n=e;if(e=n(),Si){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,Gi(e,xi,"function"===typeof r?r:Ui)}function ta(e,t,n,r,s){if(qa(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==D.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,na(t,i)):(i.next=n.next,t.pending=n.next=i)}}function na(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=D.T,a={};D.T=a;try{var o=n(s,r),l=D.S;null!==l&&l(a,o),ra(e,t,o)}catch(c){ia(e,t,c)}finally{D.T=i}}else try{ra(e,t,i=n(s,r))}catch(u){ia(e,t,u)}}function ra(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){sa(e,t,n)},function(n){return ia(e,t,n)}):sa(e,t,n)}function sa(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function ia(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(is){var n=rc.formState;if(null!==n){e:{var r=yi;if(is){if(ss){t:{for(var s=ss,i=os;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=vd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=vd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Li()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=r,n=La.bind(null,yi,r),r.dispatch=n,r=Ji(!1),i=za.bind(null,yi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Li()).queue=s,n=ta.bind(null,yi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return ua(Vi(),xi,e)}function ua(e,t,n){if(t=Gi(e,t,oa)[0],e=Wi(Ui)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zi(t)}catch(a){if(a===Gs)throw Qs;throw a}else r=t;var s=(t=Vi()).queue,i=s.dispatch;return n!==t.memoizedState&&(yi.flags|=2048,fa(9,{destroy:void 0,resource:void 0},da.bind(null,s,n),null)),[r,i,e]}function da(e,t){e.action=t}function ha(e){var t=Vi(),n=xi;if(null!==n)return ua(t,n,e);Vi(),t=t.memoizedState;var r=(n=Vi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=yi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pa(){return Vi().memoizedState}function ma(e,t,n,r){var s=Li();r=void 0===r?null:r,yi.flags|=e,s.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var s=Vi();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==xi&&null!==r&&Ei(r,xi.memoizedState.deps)?s.memoizedState=fa(t,i,n,r):(yi.flags|=e,s.memoizedState=fa(1|t,i,n,r))}function va(e,t){ma(8390656,8,e,t)}function ba(e,t){ga(2048,8,e,t)}function ya(e,t){return ga(4,2,e,t)}function xa(e,t){return ga(4,4,e,t)}function _a(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function wa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,_a.bind(null,t,e),n)}function ka(){}function Sa(e,t){var n=Vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ei(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ca(e,t){var n=Vi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ei(t,r[1]))return r[0];if(r=e(),Si){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Na(e,t,n){return void 0===n||0!==(1073741824&bi)?e.memoizedState=t:(e.memoizedState=n,e=Ic(),yi.lanes|=e,fc|=e,n)}function Ta(e,t,n,r){return $n(n,t)?n:null!==fi.current?(e=Na(e,n,r),$n(e,t)||(To=!0),e):0===(42&bi)?(To=!0,e.memoizedState=n):(e=Ic(),yi.lanes|=e,fc|=e,t)}function ja(e,t,n,r,s){var i=I.p;I.p=0!==i&&8>i?i:8;var a=D.T,o={};D.T=o,za(e,!1,t,n);try{var l=s(),c=D.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Va(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Dc());else Va(e,t,r,Dc())}catch(u){Va(e,t,{then:function(){},status:"rejected",reason:u},Dc())}finally{I.p=i,D.T=a}}function Aa(){}function Ea(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=Ma(e).queue;ja(e,s,t,R,null===n?Aa:function(){return Oa(e),n(r)})}function Ma(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:R},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Oa(e){Va(e,Ma(e).next.queue,{},Dc())}function Pa(){return Ns(Yd)}function Da(){return Vi().memoizedState}function Ia(){return Vi().memoizedState}function Ra(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Dc(),r=ii(t,e=si(n),n);return null!==r&&(Rc(r,t,n),ai(r,t,n)),t={cache:Ps()},void(e.payload=t)}t=t.return}}function Fa(e,t,n){var r=Dc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qa(e)?Ba(t,n):null!==(n=Er(e,t,n,r))&&(Rc(n,e,r),Ua(n,t,r))}function La(e,t,n){Va(e,t,n,Dc())}function Va(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qa(e))Ba(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,$n(o,a))return Ar(e,t,s,0),null===rc&&jr(),!1}catch(l){}if(null!==(n=Er(e,t,s,r)))return Rc(n,e,r),Ua(n,t,r),!0}return!1}function za(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},qa(e)){if(t)throw Error(a(479))}else null!==(t=Er(e,n,r,2))&&Rc(t,e,2)}function qa(e){var t=e.alternate;return e===yi||null!==t&&t===yi}function Ba(e,t){ki=wi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ua(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var Wa={readContext:Ns,use:qi,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useLayoutEffect:Ai,useInsertionEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useSyncExternalStore:Ai,useId:Ai,useHostTransitionStatus:Ai,useFormState:Ai,useActionState:Ai,useOptimistic:Ai,useMemoCache:Ai,useCacheRefresh:Ai},Ga={readContext:Ns,use:qi,useCallback:function(e,t){return Li().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ma(4194308,4,_a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4194308,4,e,t)},useInsertionEffect:function(e,t){ma(4,2,e,t)},useMemo:function(e,t){var n=Li();t=void 0===t?null:t;var r=e();if(Si){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Li();if(void 0!==n){var s=n(t);if(Si){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Fa.bind(null,yi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Li().memoizedState=e},useState:function(e){var t=(e=Ji(e)).queue,n=La.bind(null,yi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ka,useDeferredValue:function(e,t){return Na(Li(),e,t)},useTransition:function(){var e=Ji(!1);return e=ja.bind(null,yi,e.queue,!0,!1),Li().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=yi,s=Li();if(is){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&ic)||Yi(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,va(Xi.bind(null,r,i,e),[e]),r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},$i.bind(null,r,i,n,t),null),n},useId:function(){var e=Li(),t=rc.identifierPrefix;if(is){var n=Kr;t="\xab"+t+"R"+(n=(Zr&~(1<<32-fe(Zr)-1)).toString(32)+n),0<(n=Ci++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=ji++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Pa,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Li();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=za.bind(null,yi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bi,useCacheRefresh:function(){return Li().memoizedState=Ra.bind(null,yi)}},Ha={readContext:Ns,use:qi,useCallback:Sa,useContext:Ns,useEffect:ba,useImperativeHandle:wa,useInsertionEffect:ya,useLayoutEffect:xa,useMemo:Ca,useReducer:Wi,useRef:pa,useState:function(){return Wi(Ui)},useDebugValue:ka,useDeferredValue:function(e,t){return Ta(Vi(),xi.memoizedState,e,t)},useTransition:function(){var e=Wi(Ui)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Qi,useId:Da,useHostTransitionStatus:Pa,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Vi(),0,e,t)},useMemoCache:Bi,useCacheRefresh:Ia},Qa={readContext:Ns,use:qi,useCallback:Sa,useContext:Ns,useEffect:ba,useImperativeHandle:wa,useInsertionEffect:ya,useLayoutEffect:xa,useMemo:Ca,useReducer:Hi,useRef:pa,useState:function(){return Hi(Ui)},useDebugValue:ka,useDeferredValue:function(e,t){var n=Vi();return null===xi?Na(n,e,t):Ta(n,xi.memoizedState,e,t)},useTransition:function(){var e=Hi(Ui)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Qi,useId:Da,useHostTransitionStatus:Pa,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Vi();return null!==xi?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bi,useCacheRefresh:Ia},Ya=null,$a=0;function Xa(e){var t=$a;return $a+=1,null===Ya&&(Ya=[]),Zs(Ya,e,t)}function Za(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ka(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ja(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Lr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&Ja(i)===t.type)?(Za(t=s(t,n.props),n),t.return=e,t):(Za(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ur(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=qr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Za(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Ur(t,e.mode,n)).return=e,t;case N:return h(e,t=(0,t._init)(t._payload),n)}if(P(t)||E(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xa(t),n);if(t.$$typeof===_)return h(e,Ts(e,t),n);Ka(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,r):null;case m:return n.key===s?u(e,t,n,r):null;case N:return f(e,t,n=(s=n._init)(n._payload),r)}if(P(n)||E(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Xa(n),r);if(n.$$typeof===_)return f(e,t,Ts(e,n),r);Ka(e,n)}return null}function v(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return v(e,t,n,r=(0,r._init)(r._payload),s)}if(P(r)||E(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return v(e,t,n,Xa(r),s);if(r.$$typeof===_)return v(e,t,n,Ts(t,r),s);Ka(t,r)}return null}function b(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===N&&Ja(y)===c.type){n(l,c.sibling),Za(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=qr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Za(d=zr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case m:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Ur(u,l.mode,d)).return=l,l=d}return o(l);case N:return b(l,c,u=(y=u._init)(u._payload),d)}if(P(u))return function(s,a,o,l){for(var c=null,u=null,d=a,p=a=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(s,d,o[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(s,d),a=i(g,a,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===o.length)return n(s,d),is&&Jr(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(a=i(d,a,p),null===u?c=d:u.sibling=d,u=d);return is&&Jr(s,p),c}for(d=r(d);p<o.length;p++)null!==(m=v(d,s,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),a=i(m,a,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(s,e)}),is&&Jr(s,p),c}(l,c,u,d);if(E(u)){if("function"!==typeof(y=E(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,p=o,m=o=0,g=null,b=l.next();null!==p&&!b.done;m++,b=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var y=f(s,p,b.value,c);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(s,p),o=i(y,o,m),null===d?u=y:d.sibling=y,d=y,p=g}if(b.done)return n(s,p),is&&Jr(s,m),u;if(null===p){for(;!b.done;m++,b=l.next())null!==(b=h(s,b.value,c))&&(o=i(b,o,m),null===d?u=b:d.sibling=b,d=b);return is&&Jr(s,m),u}for(p=r(p);!b.done;m++,b=l.next())null!==(b=v(p,s,m,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?m:b.key),o=i(b,o,m),null===d?u=b:d.sibling=b,d=b);return e&&p.forEach(function(e){return t(s,e)}),is&&Jr(s,m),u}(l,c,u=y.call(u),d)}if("function"===typeof u.then)return b(l,c,Xa(u),d);if(u.$$typeof===_)return b(l,c,Ts(l,u),d);Ka(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Br(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{$a=0;var s=b(e,t,n,r);return Ya=null,s}catch(a){if(a===Gs||a===Qs)throw a;var i=Rr(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var to=eo(!0),no=eo(!1),ro=V(null),so=null;function io(e){var t=e.alternate;q(co,1&co.current),q(ro,e),null===so&&(null===t||null!==fi.current||null!==t.memoizedState)&&(so=e)}function ao(e){if(22===e.tag){if(q(co,co.current),q(ro,e),null===so){var t=e.alternate;null!==t&&null!==t.memoizedState&&(so=e)}}else oo()}function oo(){q(co,co.current),q(ro,ro.current)}function lo(e){z(ro),so===e&&(so=null),z(co)}var co=V(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dc(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Rc(t,e,r),ai(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dc(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Rc(t,e,r),ai(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dc(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Rc(t,e,n),ai(t,e,n))}};function po(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(s,i))}function mo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){vo(e)}function yo(e){console.error(e)}function xo(e){vo(e)}function _o(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function wo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ko(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){_o(e,t)},n}function So(e){return(e=si(e)).tag=3,e}function Co(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){wo(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){wo(t,n,r),"function"!==typeof s&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var No=Error(a(461)),To=!1;function jo(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function Ao(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Cs(t),r=Mi(e,t,n,a,i,s),o=Ii(),null===e||To?(is&&o&&ts(t),t.flags|=1,jo(e,t,r,s),t.child):(Ri(e,t,s),$o(e,t,s))}function Eo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Fr(i)||void 0!==i.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Mo(e,t,i,r,s))}if(i=e.child,!Xo(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return $o(e,t,s)}return t.flags|=1,(e=Lr(i,r)).ref=t.ref,e.return=t,t.child=e}function Mo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Xn(i,r)&&e.ref===t.ref){if(To=!1,t.pendingProps=r=i,!Xo(e,s))return t.lanes=e.lanes,$o(e,t,s);0!==(131072&e.flags)&&(To=!0)}}return Io(e,t,n,r,s)}function Oo(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Po(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Po(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Us(0,null!==i?i.cachePool:null),null!==i?mi(t,i):gi(),ao(t)}else null!==i?(Us(0,i.cachePool),mi(t,i),oo(),t.memoizedState=null):(null!==e&&Us(0,null),gi(),oo());return jo(e,t,s,n),t.child}function Po(e,t,n,r){var s=Bs();return s=null===s?null:{parent:Os._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Us(0,null),gi(),ao(t),null!==e&&ks(e,t,r,!0),null}function Do(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Io(e,t,n,r,s){return Cs(t),n=Mi(e,t,n,r,void 0,s),r=Ii(),null===e||To?(is&&r&&ts(t),t.flags|=1,jo(e,t,n,s),t.child):(Ri(e,t,s),$o(e,t,s))}function Ro(e,t,n,r,s,i){return Cs(t),t.updateQueue=null,n=Pi(t,r,n,s),Oi(e),r=Ii(),null===e||To?(is&&r&&ts(t),t.flags|=1,jo(e,t,n,i),t.child):(Ri(e,t,i),$o(e,t,i))}function Fo(e,t,n,r,s){if(Cs(t),null===t.stateNode){var i=Dr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Ns(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=fo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Ns(a):Dr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&fo.enqueueReplaceState(i,i.state,null),ui(t,r,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=go(n,o);i.props=l;var c=i.context,u=n.contextType;a=Dr,"object"===typeof u&&null!==u&&(a=Ns(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&mo(t,i,r,a),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,s),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ti||po(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=go(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Dr,"object"===typeof c&&null!==c&&(l=Ns(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&mo(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,s),ci();var f=t.memoizedState;a!==d||h!==f||ti||null!==e&&null!==e.dependencies&&Ss(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),f=t.memoizedState),(u=ti||po(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ss(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Do(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,s),t.child=to(t,null,n,s)):jo(e,t,n,s),t.memoizedState=i.state,e=t.child):e=$o(e,t,s),e}function Lo(e,t,n,r){return fs(),t.flags|=256,jo(e,t,n,r),t.child}var Vo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Ws()}}function qo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Bo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?io(t):oo(),is){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Zr,overflow:Kr}:null,retryLane:536870912,hydrationErrors:null},(l=Rr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=s.children,s=s.fallback,i?(oo(),c=Wo({mode:"hidden",children:c},i=t.mode),s=qr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=zo(n),i.childLanes=qo(e,r,n),t.memoizedState=Vo,s):(io(t),Uo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(io(t),t.flags&=-257,t=Go(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),i=s.fallback,c=t.mode,s=Wo({mode:"visible",children:s.children},c),(i=qr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,to(t,e.child,null,n),(s=t.child).memoizedState=zo(n),s.childLanes=qo(e,r,n),t.memoizedState=Vo,t=i);else if(io(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,ms({value:s,source:null,stack:null}),t=Go(e,t,n)}else if(To||ks(e,t,n,!1),r=0!==(n&e.childLanes),To||r){if(null!==(r=rc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:je(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Mr(e,s),Rc(r,e,s),No;"$?"===c.data||Qc(),t=Go(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=vd(c.nextSibling),rs=t,is=!0,as=null,os=!1,null!==e&&(Yr[$r++]=Zr,Yr[$r++]=Kr,Yr[$r++]=Xr,Zr=e.id,Kr=e.overflow,Xr=t),(t=Uo(t,s.children)).flags|=4096);return t}return i?(oo(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Lr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Lr(u,i):(i=qr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(u=Os._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ws(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=qo(e,r,n),t.memoizedState=Vo,s):(io(t),e=(n=e.child).sibling,(n=Lr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Uo(e,t){return(t=Wo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wo(e,t){return(e=Rr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Go(e,t,n){return to(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ho(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_s(e.return,t,n)}function Qo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(jo(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ho(e,n,t);else if(19===e.tag)Ho(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(q(co,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===uo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qo(t,!0,n,null,i);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ks(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ss(e))}function Zo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)To=!0;else{if(!Xo(e,n)&&0===(128&t.flags))return To=!1,function(e,t,n){switch(t.tag){case 3:H(t,t.stateNode.containerInfo),ys(0,Os,e.memoizedState.cache),fs();break;case 27:case 5:Y(t);break;case 4:H(t,t.stateNode.containerInfo);break;case 10:ys(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(io(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(io(t),null!==(e=$o(e,t,n))?e.sibling:null);io(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ks(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Yo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Oo(e,t,n);case 24:ys(0,Os,e.memoizedState.cache)}return $o(e,t,n)}(e,t,n);To=0!==(131072&e.flags)}else To=!1,is&&0!==(1048576&t.flags)&&es(t,Qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===w){t.tag=11,t=Ao(null,t,r,e,n);break e}if(s===C){t.tag=14,t=Eo(null,t,r,e,n);break e}}throw t=O(r)||r,Error(a(306,t,""))}Fr(r)?(e=go(r,e),t.tag=1,t=Fo(null,t,r,e,n)):(t.tag=0,t=Io(null,t,r,e,n))}return t;case 0:return Io(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,r=t.type,s=go(r,t.pendingProps),n);case 3:e:{if(H(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),ui(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ys(0,Os,r),r!==i.cache&&ws(t,[Os],n,!0),ci(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Lo(e,t,r,n);break e}if(r!==s){ms(s=Sr(Error(a(424)),t)),t=Lo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=vd(e.firstChild),rs=t,is=!0,as=null,os=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===s){t=$o(e,t,n);break e}jo(e,t,r,n)}t=t.child}return t;case 26:return Do(e,t),null===e?(n=jd(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=rd(W.current).createElement(n))[Oe]=t,r[Pe]=e,ed(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=jd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&is&&(r=t.stateNode=xd(t.type,t.pendingProps,W.current),rs=t,os=!0,s=ss,fd(t.type)?(bd=s,ss=vd(r.firstChild)):ss=s),jo(e,t,t.pendingProps.children,n),Do(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,os))?(t.stateNode=r,rs=t,ss=vd(r.firstChild),os=!1,s=!0):s=!1),s||cs(t)),Y(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,ad(s,i)?r=null:null!==o&&ad(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=Mi(e,t,Di,null,null,n),Yd._currentValue=s),Do(e,t),jo(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Bo(e,t,n);case 4:return H(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):jo(e,t,r,n),t.child;case 11:return Ao(e,t,t.type,t.pendingProps,n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ys(0,t.type,r.value),jo(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Cs(t),r=r(s=Ns(s)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return Eo(e,t,t.type,t.pendingProps,n);case 15:return Mo(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Wo(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Lr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Oo(e,t,n);case 24:return Cs(t),r=Ns(Os),null===e?(null===(s=Bs())&&(s=rc,i=Ps(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),ys(0,Os,s)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),ys(0,Os,r)):(r=i.cache,ys(0,Os,r),r!==s.cache&&ws(t,[Os],n,!0))),jo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Ko(e){e.flags|=4}function Jo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!qd(t)){if(null!==(t=ro.current)&&((4194048&ic)===ic?null!==so:(62914560&ic)!==ic&&0===(536870912&ic)||t!==so))throw Ks=Ys,Hs;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xs(Os),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Ko(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ps())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ko(t),null!==n?(nl(t),Jo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ko(t),nl(t),Jo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ko(t),nl(t),t.flags&=-16777217),null;case 27:$(t),n=W.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ko(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=B.current,hs(t)?us(t):(e=xd(s,r,n),t.stateNode=e,Ko(t))}return nl(t),null;case 5:if($(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ko(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=B.current,hs(t))us(t);else{switch(s=rd(W.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Oe]=t,e[Pe]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ko(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ko(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=W.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Oe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||cs(t)}else(e=rd(e).createTextNode(r))[Oe]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Oe]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=ps(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return Q(),null===e&&zu(t.stateNode.containerInfo),nl(t),null;case 10:return xs(t.type),nl(t),null;case 19:if(z(co),null===(s=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=uo(e))){for(t.flags|=128,tl(s,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return q(co,1&co.current|2),t.child}e=e.sibling}null!==s.tail&&te()>wc&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return nl(t),null}else 2*te()-s.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=co.current,q(co,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),vi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(qs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xs(Os),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xs(Os),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(co),null;case 4:return Q(),null;case 10:return xs(t.type),null;case 22:case 23:return lo(t),vi(),null!==e&&z(qs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xs(Os),null;default:return null}}function il(e,t){switch(ns(t),t.tag){case 3:xs(Os),Q();break;case 26:case 27:case 5:$(t);break;case 4:Q();break;case 13:lo(t);break;case 19:z(co);break;case 10:xs(t.type);break;case 22:case 23:lo(t),vi(),null!==e&&z(qs);break;case 24:xs(Os)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){uu(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){uu(e,t,s)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){uu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){uu(e,e.return,s)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Ku(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":s=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Ku(e,t,f,p,r,h)}}return void gt(e,o,l,c,u,d,i,s);case"select":for(i in p=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(i)||Ku(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Ku(e,t,s,i,r,c)}return t=l,n=o,r=p,void(null!=f?yt(e,!!n,f,!1):!!r!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ku(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":f=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&Ku(e,t,o,s,r,i)}return void xt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Ku(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Ku(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Ku(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Ku(e,t,u,f,r,p)}return;default:if(Nt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&Ju(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Ju(e,t,d,f,r,p);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&null!=f&&!r.hasOwnProperty(b)&&Ku(e,t,b,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Ku(e,t,h,f,r,p)}(r,e.type,n,t),r[Pe]=t}catch(s){uu(e,e.return,s)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ed(t,r,n),t[Oe]=e,t[Pe]=n}catch(i){uu(e,e.return,i)}}var yl=!1,xl=!1,_l=!1,wl="function"===typeof WeakSet?WeakSet:Set,kl=null;function Sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&al(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var s=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&El(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||xl,s=yl;var i=xl;yl=r,(xl=t)&&!i?Vl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),yl=s,xl=i}break;case 30:break;default:Fl(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nl=null,Tl=!1;function jl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:xl||dl(n,t),jl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||dl(n,t);var r=Nl,s=Tl;fd(n.type)&&(Nl=n.stateNode,Tl=!1),jl(e,t,n),_d(n.stateNode),Nl=r,Tl=s;break;case 5:xl||dl(n,t);case 6:if(r=Nl,s=Tl,Nl=null,jl(e,t,n),Tl=s,null!==(Nl=r))if(Tl)try{(9===Nl.nodeType?Nl.body:"HTML"===Nl.nodeName?Nl.ownerDocument.body:Nl).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{Nl.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==Nl&&(Tl?(pd(9===(e=Nl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Th(e)):pd(Nl,n.stateNode));break;case 4:r=Nl,s=Tl,Nl=n.stateNode.containerInfo,Tl=!0,jl(e,t,n),Nl=r,Tl=s;break;case 0:case 11:case 14:case 15:xl||ol(2,n,t),xl||ol(4,n,t),jl(e,t,n);break;case 1:xl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),jl(e,t,n);break;case 21:jl(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,jl(e,t,n),xl=r;break;default:jl(e,t,n)}}function El(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Th(e)}catch(n){uu(t,t.return,n)}}function Ml(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Ol(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Nl=l.stateNode,Tl=!1;break e}break;case 5:Nl=l.stateNode,Tl=!1;break e;case 3:case 4:Nl=l.stateNode.containerInfo,Tl=!0;break e}l=l.return}if(null===Nl)throw Error(a(160));Al(i,o,s),Nl=null,Tl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Dl(t,e),t=t.sibling}var Pl=null;function Dl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ol(t,e),Il(e),4&r&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Ol(t,e),Il(e),512&r&&(xl||null===n||dl(n,n.return)),64&r&&yl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Pl;if(Ol(t,e),Il(e),512&r&&(xl||null===n||dl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Ve]||i[Oe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),ed(i,r,n),i[Oe]=e,Ge(i),r=i;break e;case"link":var o=Vd("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=Vd("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[Oe]=e,Ge(i),r=i}e.stateNode=r}else zd(s,e.type,e.stateNode);else e.stateNode=Dd(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?zd(s,e.type,e.stateNode):Dd(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ol(t,e),Il(e),512&r&&(xl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ol(t,e),Il(e),512&r&&(xl||null===n||dl(n,n.return)),32&e.flags){s=e.stateNode;try{wt(s,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(_l=!0);break;case 6:if(Ol(t,e),Il(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(Ld=null,s=Pl,Pl=Sd(t.containerInfo),Ol(t,e),Pl=s,Il(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Th(t.containerInfo)}catch(p){uu(e,e.return,p)}_l&&(_l=!1,Rl(e));break;case 4:r=Pl,Pl=Sd(e.stateNode.containerInfo),Ol(t,e),Il(e),Pl=r;break;case 12:default:Ol(t,e),Il(e);break;case 13:Ol(t,e),Il(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(_c=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Ml(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=yl,d=xl;if(yl=u||s,xl=d||c,Ol(t,e),xl=d,yl=u,Il(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||yl||xl||Ll(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Ml(e,n))));break;case 19:Ol(t,e),Il(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Ml(e,r)));case 30:case 21:}}function Il(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;vl(e,ml(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(wt(i,""),n.flags&=-33),vl(e,ml(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,ml(e),o);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Rl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Rl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Ll(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Ll(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ll(t);break;case 27:_d(t.stateNode);case 26:case 5:dl(t,t.return),Ll(t);break;case 22:null===t.memoizedState&&Ll(t);break;default:Ll(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Vl(s,i,n),al(4,i);break;case 1:if(Vl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)di(l[s],o)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(i),ul(i,i.return);break;case 27:bl(i);case 26:case 5:Vl(s,i,n),n&&null===r&&4&a&&hl(i),ul(i,i.return);break;case 12:Vl(s,i,n);break;case 13:Vl(s,i,n),n&&4&a&&El(s,i);break;case 22:null===i.memoizedState&&Vl(s,i,n),ul(i,i.return);break;case 30:break;default:Vl(s,i,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ds(n))}function ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ul(e,t,n,r),t=t.sibling}function Ul(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&s&&al(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e)));break;case 12:if(2048&s){Bl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Bl(e,t,n,r):Gl(e,t):2&i._visibility?Bl(e,t,n,r):(i._visibility|=2,Wl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&zl(a,t);break;case 24:Bl(e,t,n,r),2048&s&&ql(t.alternate,t)}}function Wl(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Wl(i,a,o,l,s),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Wl(i,a,o,l,s):Gl(i,a):(u._visibility|=2,Wl(i,a,o,l,s)),s&&2048&c&&zl(a.alternate,a);break;case 24:Wl(i,a,o,l,s),s&&2048&c&&ql(a.alternate,a);break;default:Wl(i,a,o,l,s)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Gl(n,r),2048&s&&zl(r.alternate,r);break;case 24:Gl(n,r),2048&s&&ql(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Hl=8192;function Ql(e){if(e.subtreeFlags&Hl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Hl&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(a(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Ad(n.href),i=e.querySelector(Ed(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Ge(i);i=e.ownerDocument||e,n=Md(n),(s=wd.get(s))&&Rd(n,s),Ge(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Pl,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Pl;Pl=Sd(e.stateNode.containerInfo),Ql(e),Pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Hl,Hl=16777216,Ql(e),Hl=t):Ql(e))}}function $l(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,Jl(r,e)}$l(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Kl(e)):Xl(e)}}function Kl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,Jl(r,e)}$l(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Kl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Kl(t));break;default:Kl(t)}e=e.sibling}}function Jl(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ds(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,kl=r;else e:for(n=e;null!==kl;){var s=(r=kl).sibling,i=r.return;if(Cl(r),r===n){kl=null;break e}if(null!==s){s.return=i,kl=s;break e}kl=i}}}var ec={getCacheForType:function(e){var t=Ns(Os),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,sc=null,ic=0,ac=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,fc=0,pc=0,mc=0,gc=0,vc=0,bc=null,yc=null,xc=!1,_c=0,wc=1/0,kc=null,Sc=null,Cc=0,Nc=null,Tc=null,jc=0,Ac=0,Ec=null,Mc=null,Oc=0,Pc=null;function Dc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==D.T){return 0!==Fs?Fs:Au()}return Ee()}function Ic(){0===gc&&(gc=0===(536870912&ic)||is?we():536870912);var e=ro.current;return null!==e&&(e.flags|=32),gc}function Rc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Uc(e,0),zc(e,ic,gc,!1)),Ce(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===hc&&zc(e,ic,gc,!1)),wu(e))}function Fc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),s=r?function(e,t){var n=nc;nc|=2;var r=Gc(),s=Hc();rc!==e||ic!==t?(kc=null,wc=te()+500,Uc(e,t)):cc=xe(e,t);e:for(;;)try{if(0!==ac&&null!==sc){t=sc;var i=oc;t:switch(ac){case 1:ac=0,oc=null,Jc(e,t,i,1);break;case 2:case 9:if($s(i)){ac=0,oc=null,Kc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),wu(e)},i.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:$s(i)?(ac=0,oc=null,Kc(t)):(ac=0,oc=null,Jc(e,t,i,7));break;case 5:var o=null;switch(sc.tag){case 26:o=sc.memoizedState;case 5:case 27:var l=sc;if(!o||qd(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,eu(u)):sc=null}break t}}ac=0,oc=null,Jc(e,t,i,5);break;case 6:ac=0,oc=null,Jc(e,t,i,6);break;case 8:Bc(),hc=6;break e;default:throw Error(a(462))}}Xc();break}catch(d){Wc(e,d)}return bs=vs=null,D.H=r,D.A=s,nc=n,null!==sc?0:(rc=null,ic=0,jr(),hc)}(e,t):Yc(e,t,!0),i=r;;){if(0===s){cc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!i||Vc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Uc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,pc|=i,s=4;break e}i=yc,yc=s,null!==i&&(null===yc?yc=i:yc.push.apply(yc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){Uc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,gc,!lc);break e;case 2:yc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=_c+300-te())){if(zc(r,t,gc,!lc),0!==ye(r,0,!0))break e;r.timeoutHandle=ld(Lc.bind(null,r,n,yc,kc,xc,t,gc,pc,vc,lc,i,2,-0,0),s)}else Lc(r,n,yc,kc,xc,t,gc,pc,vc,lc,i,0,-0,0)}break}s=Yc(e,t,!1),i=!1}wu(e)}function Lc(e,t,n,r,s,i,o,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:Ud},Yl(t),null!==(h=function(){if(null===Bd)throw Error(a(475));var e=Bd;return e.stylesheets&&0===e.count&&Hd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Hd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,r,s,o,l,c,d,1,f,p)),void zc(e,i,o,!u);nu(e,t,i,n,r,s,o,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$n(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~mc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-fe(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&Ne(e,n,t)}function qc(){return 0!==(6&nc)||(ku(0,!1),!1)}function Bc(){if(null!==sc){if(0===ac)var e=sc.return;else bs=vs=null,Fi(e=sc),Ya=null,$a=0,e=sc;for(;null!==e;)il(e.alternate,e),e=e.return;sc=null}}function Uc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),rc=e,sc=n=Lr(e.current,null),ic=t,ac=0,oc=null,lc=!1,cc=xe(e,t),uc=!1,vc=gc=mc=pc=fc=hc=0,yc=bc=null,xc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-fe(r),i=1<<s;t|=e[s],r&=~i}return dc=t,jr(),n}function Wc(e,t){yi=null,D.H=Wa,t===Gs||t===Qs?(t=Js(),ac=3):t===Hs?(t=Js(),ac=4):ac=t===No?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===sc&&(hc=1,_o(e,Sr(t,e.current)))}function Gc(){var e=D.H;return D.H=Wa,null===e?Wa:e}function Hc(){var e=D.A;return D.A=ec,e}function Qc(){hc=4,lc||(4194048&ic)!==ic&&null!==ro.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||zc(rc,ic,gc,!1)}function Yc(e,t,n){var r=nc;nc|=2;var s=Gc(),i=Hc();rc===e&&ic===t||(kc=null,Uc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==sc){var o=sc,l=oc;switch(ac){case 8:Bc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=ac;if(ac=0,oc=null,Jc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Jc(e,o,l,c)}}$c(),a=hc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,bs=vs=null,nc=r,D.H=s,D.A=i,null===sc&&(rc=null,ic=0,jr()),a}function $c(){for(;null!==sc;)Zc(sc)}function Xc(){for(;null!==sc&&!J();)Zc(sc)}function Zc(e){var t=Zo(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Kc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ro(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Ro(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Fi(t);default:il(n,t),t=Zo(n,t=sc=Vr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Jc(e,t,n,r){bs=vs=null,Fi(t),Ya=null,$a=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ks(t,n,s,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===so?Qc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Ys?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,s)),!1;case 22:return n.flags|=65536,r===Ys?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,s)),!1}throw Error(a(435,n.tag))}return du(e,r,s),Qc(),!1}if(is)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&ms(Sr(e=Error(a(422),{cause:r}),n))):(r!==ls&&ms(Sr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Sr(r,n),oi(e,s=ko(e.stateNode,r,s)),4!==hc&&(hc=2)),!1;var i=Error(a(520),{cause:r});if(i=Sr(i,n),null===bc?bc=[i]:bc.push(i),4!==hc&&(hc=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,oi(n,e=ko(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,Co(s=So(s),e,n,r),oi(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ic))return hc=1,_o(e,Sr(n,e.current)),void(sc=null)}catch(i){if(null!==s)throw sc=s,i;return hc=1,_o(e,Sr(n,e.current)),void(sc=null)}32768&t.flags?(is||1===r?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nu(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==Cc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ne(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Tr,o,l,c),e===rc&&(sc=rc=null,ic=0),Tc=t,Nc=e,jc=n,Ac=i,Ec=s,Mc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(ie,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,s=I.p,I.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(i=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=go(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nc=o,I.p=s,D.T=r}}Cc=1,ru(),su(),iu()}}function ru(){if(1===Cc){Cc=0;var e=Nc,t=Tc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var r=I.p;I.p=2;var s=nc;nc|=4;try{Dl(t,e);var i=nd,a=er(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&Jn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var v=Kn(o,m),b=Kn(o,g);if(v&&b&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==b.node||f.focusOffset!==b.offset)){var y=d.createRange();y.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(y),f.extend(b.node,b.offset)):(y.setEnd(b.node,b.offset),f.addRange(y))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}nh=!!td,nd=td=null}finally{nc=s,I.p=r,D.T=n}}e.current=t,Cc=2}}function su(){if(2===Cc){Cc=0;var e=Nc,t=Tc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var r=I.p;I.p=2;var s=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=s,I.p=r,D.T=n}}Cc=3}}function iu(){if(4===Cc||3===Cc){Cc=0,ee();var e=Nc,t=Tc,n=jc,r=Mc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Cc=5:(Cc=0,Tc=Nc=null,au(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Sc=null),Ae(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=D.T,s=I.p,I.p=2,D.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{D.T=t,I.p=s}}0!==(3&jc)&&ou(),wu(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Pc?Oc++:(Oc=0,Pc=e):Oc=0,ku(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ds(t)))}function ou(e){return ru(),su(),iu(),lu()}function lu(){if(5!==Cc)return!1;var e=Nc,t=Ac;Ac=0;var n=Ae(jc),r=D.T,s=I.p;try{I.p=32>n?32:n,D.T=null,n=Ec,Ec=null;var i=Nc,o=jc;if(Cc=0,Tc=Nc=null,jc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Zl(i.current),Ul(i,i.current,o,n),nc=l,ku(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{I.p=s,D.T=r,au(e,t)}}function cu(e,t,n){t=Sr(n,t),null!==(e=ii(e,t=ko(e.stateNode,t,2),2))&&(Ce(e,2),wu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Sr(n,e),null!==(r=ii(t,n=So(2),2))&&(Co(n,r,t,e),Ce(r,2),wu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(uc=!0,s.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-_c?0===(2&nc)&&Uc(e,0):mc|=n,vc===ic&&(vc=0)),wu(e)}function fu(e,t){0===t&&(t=ke()),null!==(e=Mr(e,t))&&(Ce(e,t),wu(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),fu(e,n)}var gu=null,vu=null,bu=!1,yu=!1,xu=!1,_u=0;function wu(e){e!==vu&&null===e.next&&(null===vu?gu=vu=e:vu=vu.next=e),yu=!0,bu||(bu=!0,dd(function(){0!==(6&nc)?Z(re,Su):Cu()}))}function ku(e,t){if(!xu&&yu){xu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,ju(r,i))}else i=ic,0===(3&(i=ye(r,r===rc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||xe(r,i)||(n=!0,ju(r,i));r=r.next}}while(n);xu=!1}}function Su(){Cu()}function Cu(){yu=bu=!1;var e=0;0!==_u&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=_u),_u=0);for(var t=te(),n=null,r=gu;null!==r;){var s=r.next,i=Nu(r,t);0===i?(r.next=null,null===n?gu=s:n.next=s,null===s&&(vu=n)):(n=r,(0!==e||0!==(3&i))&&(yu=!0)),r=s}ku(e,!1)}function Nu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-fe(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=_e(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ic,n=ye(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&K(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&K(r),Ae(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=Tu.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&K(r),e.callbackPriority=2,e.callbackNode=null,2}function Tu(e,t){if(0!==Cc&&5!==Cc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=ic;return 0===(r=ye(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Nu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Tu.bind(null,e):null)}function ju(e,t){if(ou())return null;Fc(e,t,!0)}function Au(){return 0===_u&&(_u=we()),_u}function Eu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Mu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ou=0;Ou<_r.length;Ou++){var Pu=_r[Ou];wr(Pu.toLowerCase(),"on"+(Pu[0].toUpperCase()+Pu.slice(1)))}wr(fr,"onAnimationEnd"),wr(pr,"onAnimationIteration"),wr(mr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(gr,"onTransitionRun"),wr(vr,"onTransitionStart"),wr(br,"onTransitionCancel"),wr(yr,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Du));function Ru(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){vo(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){vo(u)}s.currentTarget=null,i=l}}}}function Fu(e,t){var n=t[Ie];void 0===n&&(n=t[Ie]=new Set);var r=e+"__bubble";n.has(r)||(qu(t,e,2,!1),n.add(r))}function Lu(e,t,n){var r=0;t&&(r|=4),qu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Vu]){e[Vu]=!0,He.forEach(function(t){"selectionchange"!==t&&(Iu.has(t)||Lu(t,!1,e),Lu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Lu("selectionchange",!1,t))}}function qu(e,t,n,r){switch(ch(t)){case 2:var s=rh;break;case 8:s=sh;break;default:s=ih}n=s.bind(null,t,n,e),s=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=qe(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Rt(function(){var r=i,s=Mt(n),a=[];e:{var o=xr.get(e);if(void 0!==o){var c=Jt,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fr:case pr:case mr:c=on;break;case yr:c=bn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=yn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=xn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ft(m,f))&&d.push(Uu(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Et||!(u=n.relatedTarget||n.fromElement)||!qe(u)&&!u[De])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?qe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:Ue(c),p=null==u?o:Ue(u),(o=new d(g,m+"leave",c,n,s)).target=h,o.relatedTarget=p,g=null,qe(s)===r&&((d=new d(f,m+"enter",u,n,s)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=Gu(p))m++;for(p=0,g=f;g;g=Gu(g))p++;for(;0<m-p;)d=Gu(d),m--;for(;0<p-m;)f=Gu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Hu(a,o,c,d,!1),null!==u&&null!==h&&Hu(a,h,u,d,!0)}if("select"===(c=(o=r?Ue(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Ln;else if(On(o))if(Vn)v=Yn;else{v=Hn;var b=Gn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Nt(r.elementType)&&(v=Ln):v=Qn;switch(v&&(v=v(e,r))?Pn(a,v,n,s):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&bt(o,"number",o.value)),b=r?Ue(r):window,e){case"focusin":(On(b)||"true"===b.contentEditable)&&(rr=b,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,s)}var y;if(wn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else En?jn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cn&&"ko"!==n.locale&&(En||"onCompositionStart"!==x?"onCompositionEnd"===x&&En&&(y=Wt()):(Bt="value"in(qt=s)?qt.value:qt.textContent,En=!0)),0<(b=Wu(r,x)).length&&(x=new cn(x,e,null,n,s),a.push({event:x,listeners:b}),y?x.data=y:null!==(y=An(n))&&(x.data=y))),(y=Sn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Tn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(En)return"compositionend"===e||!wn&&jn(e,t)?(e=Wt(),Ut=Bt=qt=null,En=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Wu(r,"onBeforeInput")).length&&(b=new cn("onBeforeInput","beforeinput",null,n,s),a.push({event:b,listeners:x}),b.data=y)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Eu((s[Pe]||null).action),a=r.submitter;a&&null!==(t=(t=a[Pe]||null)?Eu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new Jt("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==_u){var e=a?Mu(s,a):new FormData(s);Ea(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Mu(s,a):new FormData(s),Ea(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Ru(a,t)})}function Uu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Ft(e,n))&&r.unshift(Uu(e,s,i)),null!=(s=Ft(e,t))&&r.push(Uu(e,s,i))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Hu(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Ft(n,i))&&a.unshift(Uu(n,c,l)):s||null!=(c=Ft(n,i))&&a.push(Uu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function Xu(e,t){return t=$u(t),$u(e)===t}function Zu(){}function Ku(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||wt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&wt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Ku(e,t,"name",s.name,s,null),Ku(e,t,"formEncType",s.formEncType,s,null),Ku(e,t,"formMethod",s.formMethod,s,null),Ku(e,t,"formTarget",s.formTarget,s,null)):(Ku(e,t,"encType",s.encType,s,null),Ku(e,t,"method",s.method,s,null),Ku(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Tt.get(n)||n,r)}}function Ju(e,t,n,r,s,i){switch(n){case"style":Ct(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?wt(e,r):("number"===typeof r||"bigint"===typeof r)&&wt(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Pe]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ku(e,t,r,o,n,null)}}return i&&Ku(e,t,"srcSet",n.srcSet,n,null),void(s&&Ku(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Ku(e,t,s,d,n,null)}}return vt(e,r,l,c,u,o,i,!1),void dt(e);case"select":for(i in Fu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Ku(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?yt(e,!!s,t,!1):null!=n&&yt(e,!!s,n,!0));case"textarea":for(o in Fu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Ku(e,t,o,l,n,null)}return _t(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Ku(e,t,c,s,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(s=0;s<Du.length;s++)Fu(Du[s],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ku(e,t,u,s,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&Ju(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Ku(e,t,l,s,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&_d(a.documentElement),2&n&&_d(a.body),4&n)for(_d(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===s)return e.removeChild(i),void Th(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Th(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function yd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function _d(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ze(e)}var wd=new Map,kd=new Set;function Sd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=I.d;I.d={f:function(){var e=Cd.f(),t=qc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Oa(t):Cd.r(e)},D:function(e){Cd.D(e),Td("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),Td("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=Nd;if(r&&e&&t){var s='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+mt(n.imageSizes)+'"]')):s+='[href="'+mt(e)+'"]';var i=s;switch(t){case"style":i=Ad(e);break;case"script":i=Od(e)}wd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),wd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Ed(i))||"script"===t&&r.querySelector(Pd(i))||(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=Nd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Od(e)}if(!wd.has(i)&&(e=h({rel:"modulepreload",href:e},t),wd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pd(i)))return}ed(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=Nd;if(n&&e){var r=We(n).hoistableScripts,s=Od(e),i=r.get(s);i||((i=n.querySelector(Pd(s)))||(e=h({src:e,async:!0},t),(t=wd.get(s))&&Fd(e,t),Ge(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){Cd.S(e,t,n);var r=Nd;if(r&&e){var s=We(r).hoistableStyles,i=Ad(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Ed(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=wd.get(i))&&Rd(e,n);var l=a=r.createElement("link");Ge(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Id(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){Cd.M(e,t);var n=Nd;if(n&&e){var r=We(n).hoistableScripts,s=Od(e),i=r.get(s);i||((i=n.querySelector(Pd(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=wd.get(s))&&Fd(e,t),Ge(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Nd="undefined"===typeof document?null:document;function Td(e,t,n){var r=Nd;if(r&&"string"===typeof t&&t){var s=mt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),kd.has(s)||(kd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(ed(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function jd(e,t,n,r){var s,i,o,l,c=(c=W.current)?Sd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=We(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=We(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Ed(e)))&&!u._p&&(d.instance=u,d.state.loading=5),wd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ed(i,"link",o),Ge(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Od(n),(r=(n=We(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ad(e){return'href="'+mt(e)+'"'}function Ed(e){return'link[rel="stylesheet"]['+e+"]"}function Md(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Od(e){return'[src="'+mt(e)+'"]'}function Pd(e){return"script[async]"+e}function Dd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",s),Id(r,n.precedence,e),t.instance=r;case"stylesheet":s=Ad(n.href);var i=e.querySelector(Ed(s));if(i)return t.state.loading|=4,t.instance=i,Ge(i),i;r=Md(n),(s=wd.get(s))&&Rd(r,s),Ge(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",r),t.state.loading|=4,Id(i,n.precedence,e),t.instance=i;case"script":return i=Od(n.src),(s=e.querySelector(Pd(i)))?(t.instance=s,Ge(s),s):(r=n,(s=wd.get(i))&&Fd(r=h({},n),s),Ge(s=(e=e.ownerDocument||e).createElement("script")),ed(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Id(r,n.precedence,e));return t.instance}function Id(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Rd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ld=null;function Vd(e,t,n){if(null===Ld){var r=new Map,s=Ld=new Map;s.set(n,r)}else(r=(s=Ld).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Ve]||i[Oe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function Ud(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Hd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Hd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Qd,e),Gd=null,Wd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=Wd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:_,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function $d(e,t,n,r,s,i,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xd(e,t,n,r,s,i,a,o,l,c,u,d){return e=new $d(e,t,n,a,o,l,c,d),t=1,!0===i&&(t|=24),i=Rr(3,null,null,t),e.current=i,i.stateNode=e,(t=Ps()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function Zd(e){return e?e=Dr:Dr}function Kd(e,t,n,r,s,i){s=Zd(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Rc(n,0,t),ai(n,e,t))}function Jd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Jd(e,t),(e=e.alternate)&&Jd(e,t)}function th(e){if(13===e.tag){var t=Mr(e,67108864);null!==t&&Rc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var s=D.T;D.T=null;var i=I.p;try{I.p=2,ih(e,t,n,r)}finally{I.p=i,D.T=s}}function sh(e,t,n,r){var s=D.T;D.T=null;var i=I.p;try{I.p=8,ih(e,t,n,r)}finally{I.p=i,D.T=s}}function ih(e,t,n,r){if(nh){var s=ah(r);if(null===s)Bu(e,t,r,oh,n),bh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return dh=yh(dh,e,t,n,r,s),!0;case"dragenter":return hh=yh(hh,e,t,n,r,s),!0;case"mouseover":return fh=yh(fh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ph.set(i,yh(ph.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mh.set(i,yh(mh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==s;){var i=Be(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=be(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}wu(i),0===(6&nc)&&(wc=te()+500,ku(0,!1))}}break;case 13:null!==(o=Mr(i,2))&&Rc(o,0,2),qc(),eh(i,2)}if(null===(i=ah(r))&&Bu(e,t,r,oh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function ah(e){return lh(e=Mt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,ph=new Map,mh=new Map,gh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function yh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function xh(e){var t=qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}(e.priority,function(){if(13===n.tag){var e=Dc();e=je(e);var t=Mr(n,e);null!==t&&Rc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _h(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Et=r,n.target.dispatchEvent(r),Et=null,t.shift()}return!0}function wh(e,t,n){_h(e)&&n.delete(t)}function kh(){uh=!1,null!==dh&&_h(dh)&&(dh=null),null!==hh&&_h(hh)&&(hh=null),null!==fh&&_h(fh)&&(fh=null),ph.forEach(wh),mh.forEach(wh)}function Sh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kh)))}var Ch=null;function Nh(e){Ch!==e&&(Ch=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ch===e&&(Ch=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var i=Be(n);null!==i&&(e.splice(t,3),t-=3,Ea(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Th(e){function t(t){return Sh(t,e)}null!==dh&&Sh(dh,e),null!==hh&&Sh(hh,e),null!==fh&&Sh(fh,e),ph.forEach(t),mh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)xh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Pe]||null;if("function"===typeof i)a||Nh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Pe]||null)o=a.formAction;else if(null!==lh(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Nh(n)}}}function jh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=jh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kd(t.current,Dc(),e,t,null,null)},Ah.prototype.unmount=jh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Kd(e.current,2,null,e,null,null),qc(),t[De]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ee();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&xh(e)}};var Eh=s.version;if("19.1.0"!==Eh)throw Error(a(527,Eh,"19.1.0"));I.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Mh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{ue=Oh.inject(Mh),de=Oh}catch(Dh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=bo,i=yo,l=xo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,s,i,l,0,null),e[De]=t.current,zu(e),new jh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=bo,l=yo,c=xo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=Zd(null),n=t.current,(s=si(r=je(r=Dc()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,Ce(t,n),wu(t),e[De]=t.current,zu(e),new Ah(t)},t.version="19.1.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,n)=>{var r=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,i,a,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function S(e,t,r,s,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function j(){}function A(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return A((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+T(e,0):i,_(a)?(s="",null!=u&&(s=u.replace(N,"$&/")+"/"),A(a,t,s,"",function(e){return e})):null!=a&&(C(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+u,a=S(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,p=""===i?".":i+":";if(_(e))for(var m=0;m<e.length;m++)u+=A(i=e[m],t,s,o=p+T(i,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=A(i=i.value,t,s,o=p+T(i,m++),a);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(j,j):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function E(e,t,n){if(null==e)return e;var r=[],s=0;return A(e,r,"","",function(e){return t.call(n,e,s++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function P(){}t.Children={map:E,forEach:function(e,t,n){E(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=y,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!k.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return S(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return S(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),s=w.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(P,O)}catch(i){O(i)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=w.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.0"},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{var r=n(736);function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,r(s.key),s)}}e.exports=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},672:(e,t,n)=>{"use strict";var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},715:(e,t,n)=>{var r=n(987),s=n(156),i=n(122),a=n(752);e.exports=function(e,t){return r(e)||s(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var r=n(738).default,s=n(45);e.exports=function(e){var t=s(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,b="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,S||(S=!0,k());else{var t=r(u);null!==t&&O(w,t.startTime-e)}}var k,S=!1,C=-1,N=5,T=-1;function j(){return!!v||!(t.unstable_now()-T<N)}function A(){if(v=!1,S){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(C),C=-1),p=!0;var i=f;try{t:{for(_(e),h=r(c);null!==h&&!(h.expirationTime>e&&j());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,_(e),n=!0;break t}h===r(c)&&s(c),_(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&O(w,l.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?k():S=!1}}}if("function"===typeof x)k=function(){x(A)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,M=E.port2;E.port1.onmessage=A,k=function(){M.postMessage(null)}}else k=function(){b(A,0)};function O(e,n){C=b(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,O(w,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,S||(S=!0,k()))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},960:(e,t,n)=>{"use strict";e.exports=n(799)},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},998:function(e,t,n){!function(e,t,n,r){"use strict";var s=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},i=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},a=function(e,t){return{startTime:t,type:"setValue",value:e}},o=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},l=function(e,t,n){var r=n.startTime,s=n.target,i=n.timeConstant;return s+(t-s)*Math.exp((r-e)/i)},c=function(e){return"exponentialRampToValue"===e.type},u=function(e){return"linearRampToValue"===e.type},d=function(e){return c(e)||u(e)},h=function(e){return"setValue"===e.type},f=function(e){return"setValueCurve"===e.type},p=function(e,t,n,r){var s=e[t];return void 0===s?r:d(s)||h(s)?s.value:f(s)?s.values[s.values.length-1]:l(n,p(e,t-1,s.startTime,r),s)},m=function(e,t,n,r,s){return void 0===n?[r.insertTime,s]:d(n)?[n.endTime,n.value]:h(n)?[n.startTime,n.value]:f(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,p(e,t-1,n.startTime,s)]},g=function(e){return"cancelAndHold"===e.type},v=function(e){return"cancelScheduledValues"===e.type},b=function(e){return g(e)||v(e)?e.cancelTime:c(e)||u(e)?e.endTime:e.startTime},y=function(e,t,n,r){var s=r.endTime,i=r.value;return n===i?i:0<n&&0<i||n<0&&i<0?n*Math.pow(i/n,(e-t)/(s-t)):0},x=function(e,t,n,r){return n+(e-t)/(r.endTime-t)*(r.value-n)},_=function(e,t){var n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]},w=function(e,t){var n=t.duration,r=t.startTime,s=t.values,i=(e-r)/n*(s.length-1);return _(s,i)},k=function(e){return"setTarget"===e.type},S=function(){function e(t){n(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return r(e,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=b(e);if(g(e)||v(e)){var n=this._automationEvents.findIndex(function(n){return v(e)&&f(n)?n.startTime+n.duration>=t:b(n)>=t}),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(e)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&d(r)){if(void 0!==l&&k(l))throw new Error("The internal list is malformed.");var h=void 0===l?r.insertTime:f(l)?l.startTime+l.duration:b(l),p=void 0===l?this._defaultValue:f(l)?l.values[l.values.length-1]:l.value,m=c(r)?y(t,h,p,r):x(t,h,p,r),_=c(r)?s(m,t,this._currenTime):i(m,t,this._currenTime);this._automationEvents.push(_)}if(void 0!==l&&k(l)&&this._automationEvents.push(a(this.getValue(t),t)),void 0!==l&&f(l)&&l.startTime+l.duration>t){var w=t-l.startTime,S=(l.values.length-1)/l.duration,C=Math.max(2,1+Math.ceil(w*S)),N=w/(C-1)*S,T=l.values.slice(0,C);if(N<1)for(var j=1;j<C;j+=1){var A=N*j%1;T[j]=l.values[j-1]*(1-A)+l.values[j]*A}this._automationEvents[this._automationEvents.length-1]=o(T,l.startTime,w)}}}else{var E=this._automationEvents.findIndex(function(e){return b(e)>t}),M=-1===E?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[E-1];if(void 0!==M&&f(M)&&b(M)+M.duration>t)return!1;var O=c(e)?s(e.value,e.endTime,this._currenTime):u(e)?i(e.value,t,this._currenTime):e;if(-1===E)this._automationEvents.push(O);else{if(f(e)&&t+e.duration>b(this._automationEvents[E]))return!1;this._automationEvents.splice(E,0,O)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex(function(t){return b(t)>e});if(t>1){var n=this._automationEvents.slice(t-1),r=n[0];k(r)&&n.unshift(a(p(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex(function(t){return b(t)>e}),r=this._automationEvents[n],s=(-1===n?this._automationEvents.length:n)-1,i=this._automationEvents[s];if(void 0!==i&&k(i)&&(void 0===r||!d(r)||r.insertTime>e))return l(e,p(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(void 0!==i&&h(i)&&(void 0===r||!d(r)))return i.value;if(void 0!==i&&f(i)&&(void 0===r||!d(r)||i.startTime+i.duration>e))return e<i.startTime+i.duration?w(e,i):i.values[i.values.length-1];if(void 0!==i&&d(i)&&(void 0===r||!d(r)))return i.value;if(void 0!==r&&c(r)){var a=m(this._automationEvents,s,i,r,this._defaultValue),o=t(a,2),g=o[0],v=o[1];return y(e,g,v,r)}if(void 0!==r&&u(r)){var _=m(this._automationEvents,s,i,r,this._defaultValue),S=t(_,2),C=S[0],N=S[1];return x(e,C,N,r)}return this._defaultValue}}])}(),C=function(e){return{cancelTime:e,type:"cancelAndHold"}},N=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},T=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},j=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},A=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}};e.AutomationEventList=S,e.createCancelAndHoldAutomationEvent=C,e.createCancelScheduledValuesAutomationEvent=N,e.createExponentialRampToValueAutomationEvent=T,e.createLinearRampToValueAutomationEvent=j,e.createSetTargetAutomationEvent=A,e.createSetValueAutomationEvent=a,e.createSetValueCurveAutomationEvent=o}(t,n(715),n(383),n(579))}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".267d8d01.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="musical-tools-app:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/musical-tools-app/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,a=r[0],o=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkmusical_tools_app=self.webpackChunkmusical_tools_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391);const r="15.1.22";var s=n(998);const i=new WeakSet,a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,m={construct:()=>m},g=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,v=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),s=r.match(g);for(;null!==s;){const e=s[1].slice(1,-1),i=s[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(i),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(g)}return[n.join(";"),r]},b=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},y=e=>{if(!(e=>{try{new new Proxy(e,m)}catch(t){return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!==typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},x=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},_=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return e.delete(r),r},w=(e,t,n,r)=>{const s=x(e,t),i=_(s,e=>e[0]===n&&e[1]===r);return 0===s.size&&e.delete(t),i},k=e=>x(d,e),S=e=>{if(i.has(e))throw new Error("The AudioNode is already stored.");i.add(e),k(e).forEach(e=>e(!0))},C=e=>"port"in e,N=e=>{if(!i.has(e))throw new Error("The AudioNode is not stored.");i.delete(e),k(e).forEach(e=>e(!1))},T=(e,t)=>{!C(e)&&t.every(e=>0===e.size)&&N(e)};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function A(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}function E(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const P={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},D=(e,t)=>e.context===t,I=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},R=()=>new DOMException("","IndexSizeError"),F=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(r){if(12===r.code)throw R();throw r}})},L={numberOfChannels:1},V=-34028234663852886e22,z=-V,q=e=>i.has(e),B={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},U=e=>x(a,e),W=e=>x(l,e),G=(e,t)=>{const{activeInputs:n}=U(e);n.forEach(n=>n.forEach(n=>{let[r]=n;t.includes(e)||G(r,[...t,e])}));const r=(e=>"playbackRate"in e)(e)?[e.playbackRate]:C(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const s of r){const e=W(s);void 0!==e&&e.activeInputs.forEach(e=>{let[n]=e;return G(n,t)})}q(e)&&N(e)},H=e=>{G(e.destination,[])},Q=e=>void 0===e||"number"===typeof e||"string"===typeof e&&("balanced"===e||"interactive"===e||"playback"===e),Y=e=>"context"in e,$=e=>Y(e[0]),X=(e,t,n,r)=>{for(const s of e)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},Z=(e,t,n,r)=>{let[s,i]=n;X(e,[t,s,i],e=>e[0]===t&&e[1]===s,r)},K=(e,t,n)=>{let[r,s,i]=t;const a=e.get(r);void 0===a?e.set(r,new Set([[s,i]])):X(a,[s,i],e=>e[0]===s,n)},J=e=>"inputs"in e,ee=(e,t,n,r)=>{if(J(t)){const s=t.inputs[r];return e.connect(s,n,0),[s,n,0]}return e.connect(t,n,r),[t,n,r]},te=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},ne=(e,t)=>{if(!k(e).delete(t))throw new Error("Missing the expected event listener.")},re=(e,t,n)=>{const r=x(e,t),s=_(r,e=>e[0]===n);return 0===r.size&&e.delete(t),s},se=(e,t,n,r)=>{J(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},ie=e=>x(o,e),ae=e=>x(c,e),oe=e=>h.has(e),le=e=>!i.has(e),ce=(e,t)=>new Promise(n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),r=e.createGain(),s=e.createBuffer(1,2,44100),i=s.getChannelData(0);i[0]=1,i[1]=1;const a=e.createBufferSource();a.buffer=s,a.loop=!0,a.connect(t).connect(e.destination),a.connect(r),a.disconnect(r),t.onaudioprocess=r=>{const s=r.inputBuffer.getChannelData(0);Array.prototype.some.call(s,e=>1===e)?n(!0):n(!1),a.stop(),t.onaudioprocess=null,a.disconnect(t),t.disconnect(e.destination)},a.start()}}),ue=(e,t)=>{const n=new Map;for(const r of e)for(const e of r){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach((e,n)=>t(n,e))},de=e=>"context"in e,he=e=>{const t=new Map;e.connect=(e=>function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=de(n)?e(n,r,s):e(n,r),a=t.get(n);return void 0===a?t.set(n,[{input:s,output:r}]):a.every(e=>e.input!==s||e.output!==r)&&a.push({input:s,output:r}),i})(e.connect.bind(e)),e.disconnect=(n=>(r,s,i)=>{if(n.apply(e),void 0===r)t.clear();else if("number"===typeof r)for(const[e,n]of t){const s=n.filter(e=>e.output!==r);0===s.length?t.delete(e):t.set(e,s)}else if(t.has(r))if(void 0===s)t.delete(r);else{const e=t.get(r);if(void 0!==e){const n=e.filter(e=>e.output!==s&&(e.input!==i||void 0===i));0===n.length?t.delete(r):t.set(r,n)}}for(const[n,a]of t)a.forEach(t=>{de(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)})})(e.disconnect)},fe=(e,t,n,r)=>{const{activeInputs:s,passiveInputs:i}=W(t),{outputs:a}=U(e),o=k(e),l=a=>{const o=ie(e),l=ae(t);if(a){const t=re(i,e,n);Z(s,e,t,!1),r||oe(e)||o.connect(l,n)}else{const t=((e,t,n)=>_(e,e=>e[0]===t&&e[1]===n))(s,e,n);K(i,t,!1),r||oe(e)||o.disconnect(l,n)}};return!!X(a,[t,n],e=>e[0]===t&&e[1]===n,!0)&&(o.add(l),q(e)?Z(s,e,[n,l],!0):K(i,[e,n,l],!0),!0)},pe=(e,t,n,r,s)=>{const[i,a]=((e,t,n,r)=>{const{activeInputs:s,passiveInputs:i}=U(t),a=te(s[r],e,n);if(null===a)return[w(i,e,n,r)[2],!1];return[a[2],!0]})(e,n,r,s);if(null!==i&&(ne(e,i),!a||t||oe(e)||se(ie(e),ie(n),r,s)),q(n)){const{activeInputs:e}=U(n);T(n,e)}},me=(e,t,n,r)=>{const[s,i]=((e,t,n)=>{const{activeInputs:r,passiveInputs:s}=W(t),i=te(r,e,n);if(null===i)return[re(s,e,n)[1],!1];return[i[2],!0]})(e,n,r);null!==s&&(ne(e,s),!i||t||oe(e)||ie(e).disconnect(ae(n),r))};class ge{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const ve={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function be(e,t,n,r,s){if("function"===typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,s);else{const i=e.getChannelData(r);if(0===t[n].byteLength)t[n]=i.slice(s,s+128);else{const e=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const ye=(e,t,n,r,s)=>{"function"===typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],r,s):0!==t[n].byteLength&&e.getChannelData(r).set(t[n],s)},xe=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const e=[],s="number"===typeof t?t:t[r];for(let t=0;t<s;t+=1)e.push(new Float32Array(128));n.push(e)}return n},_e=async(e,t,n,r,s,i,a)=>{const o=null===t?128*Math.ceil(e.context.length/128):t.length,l=r.channelCount*r.numberOfInputs,c=s.reduce((e,t)=>e+t,0),u=0===c?null:n.createBuffer(c,o,n.sampleRate);if(void 0===i)throw new Error("Missing the processor constructor.");const d=U(e),h=await((e,t)=>{const n=x(p,e),r=ie(t);return x(n,r)})(n,e),f=xe(r.numberOfInputs,r.channelCount),m=xe(r.numberOfOutputs,s),g=Array.from(e.parameters.keys()).reduce((e,t)=>O(O({},e),{},{[t]:new Float32Array(128)}),{});for(let p=0;p<o;p+=128){if(r.numberOfInputs>0&&null!==t)for(let e=0;e<r.numberOfInputs;e+=1)for(let n=0;n<r.channelCount;n+=1)be(t,f[e],n,n,p);void 0!==i.parameterDescriptors&&null!==t&&i.parameterDescriptors.forEach((e,n)=>{let{name:r}=e;be(t,g,r,l+n,p)});for(let e=0;e<r.numberOfInputs;e+=1)for(let t=0;t<s[e];t+=1)0===m[e][t].byteLength&&(m[e][t]=new Float32Array(128));try{const e=f.map((e,t)=>0===d.activeInputs[t].size?[]:e),t=a(p/n.sampleRate,n.sampleRate,()=>h.process(e,m,g));if(null!==u)for(let n=0,i=0;n<r.numberOfOutputs;n+=1){for(let e=0;e<s[n];e+=1)ye(u,m[n],e,i+e,p);i+=s[n]}if(!t)break}catch(v){e.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},we={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},ke={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Se={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Ce={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Ne={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Te=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,t.close(),n.close(),r()};n.onmessage=()=>s();try{t.postMessage(e,[e])}catch(i){}finally{s()}})},je={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Ae=(e,t,n)=>{const r=t[n];if(void 0===r)throw e();return r},Ee={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Me={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Oe=()=>new DOMException("","InvalidStateError"),Pe=()=>new DOMException("","InvalidAccessError"),De={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Ie=(e,t,n,r,s,i,a,o,l,c,u)=>{const d=c.length;let h=o;for(let f=0;f<d;f+=1){let o=n[0]*c[f];for(let t=1;t<s;t+=1){const r=h-t&l-1;o+=n[t]*i[r],o-=e[t]*a[r]}for(let e=s;e<r;e+=1)o+=n[e]*i[h-e&l-1];for(let n=s;n<t;n+=1)o-=e[n]*a[h-n&l-1];i[h]=c[f],a[h]=o,h=h+1&l-1,u[f]=o}return h},Re={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Fe=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch(n){}return!1},Le={numberOfChannels:1},Ve=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n]&&(e[n]=r)},ze=(e,t)=>{Ve(e,t,"channelCount"),Ve(e,t,"channelCountMode"),Ve(e,t,"channelInterpretation")},qe=e=>"function"===typeof e.getFloatTimeDomainData,Be=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n].value&&(e[n].value=r)},Ue=e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;if("number"===typeof s&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,s)})(e.start)},We=e=>{var t;e.stop=(t=e.stop,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},Ge=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),He=async(e,t)=>{const n=await(e=>new Promise((t,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=e=>{let{data:n}=e;r.close(),s.close(),t(n)},r.onmessageerror=e=>{let{data:t}=e;r.close(),s.close(),n(t)},s.postMessage(e)}))(t);return new e(n)},Qe=(e,t)=>{const n=e.createBiquadFilter();return ze(n,t),Be(n,t,"Q"),Be(n,t,"detune"),Be(n,t,"frequency"),Be(n,t,"gain"),Ve(n,t,"type"),n},Ye=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return ze(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Oe()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw Oe()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw Oe()}})})(n),n};function $e(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const Xe=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),Ze=["offset"],Ke=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return ze(n,t),Be(n,t,"delayTime"),n},Je=(e,t)=>{const n=e.createGain();return ze(n,t),Be(n,t,"gain"),n};function et(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function tt(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function nt(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)n=tt(n,t),n[0]+=e[r];return n}const rt=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],st=(e,t,n,r)=>e.createScriptProcessor(t,n,r),it=["channelCount","channelCountMode","pan"],at=["curve","oversample"],ot=()=>new DOMException("","NotSupportedError"),lt={numberOfChannels:1},ct={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ut={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},dt={disableNormalization:!1},ht={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ft=()=>new DOMException("","UnknownError"),pt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},mt=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),gt=e=>{if(null===e)return!1;const t=e.length;return t%2!==0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},vt=(e,t,n,r)=>{let s=e;for(;!s.hasOwnProperty(t);)s=Object.getPrototypeOf(s);const{get:i,set:a}=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,{get:n(i),set:r(a)})},bt=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(9!==r.code)throw r;bt(e,t,n+1e-7)}},yt=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},xt=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch(r){return!1}},_t=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},wt=(e,t)=>{const n=t.createGain();e.connect(n);const r=(t=>()=>{t.call(e,n),e.removeEventListener("ended",r)})(e.disconnect);e.addEventListener("ended",r),Xe(e,n),e.stop=(t=>{let r=!1;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(r)try{t.call(e,s)}catch(i){n.gain.setValueAtTime(0,s)}else t.call(e,s),r=!0}})(e.stop)},kt=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"===typeof t?t.call(e,n):t.handleEvent.call(e,n)},St=(e=>(t,n,r,s)=>{let[i,a,o]=r;e(t[a],[n,i,o],e=>e[0]===n&&e[1]===i,s)})(X),Ct=(e=>(t,n,r,s)=>{let[i,a,o]=r;const l=t.get(i);void 0===l?t.set(i,new Set([[a,n,o]])):e(l,[a,n,o],e=>e[0]===a&&e[1]===n,s)})(X),Nt=(e=>(t,n,r,s)=>e(t[s],e=>e[0]===n&&e[1]===r))(_),Tt=new WeakMap,jt=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(Tt),At=(Et=new Map,Mt=new WeakMap,(e,t)=>{const n=Mt.get(e);if(void 0!==n)return n;const r=Et.get(e);if(void 0!==r)return r;try{const n=t();return n instanceof Promise?(Et.set(e,n),n.catch(()=>!1).then(t=>(Et.delete(e),Mt.set(e,t),t))):(Mt.set(e,n),n)}catch(s){return Mt.set(e,!1),!1}});var Et,Mt;const Ot="undefined"===typeof window?null:window,Pt=((e,t)=>(n,r)=>{const s=n.createAnalyser();if(ze(s,r),!(r.maxDecibels>r.minDecibels))throw t();return Ve(s,r,"fftSize"),Ve(s,r,"maxDecibels"),Ve(s,r,"minDecibels"),Ve(s,r,"smoothingTimeConstant"),e(qe,()=>qe(s))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const r=Math.max(n.length,e.fftSize);for(let e=0;e<r;e+=1)t[e]=.0078125*(n[e]-128);return t}})(s),s})(At,R),Dt=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(U),It=((e,t,n)=>async(r,s,i)=>{const a=e(r);await Promise.all(a.activeInputs.map((e,a)=>Array.from(e).map(async e=>{let[o,l]=e;const c=t(o),u=await c.render(o,s),d=r.context.destination;n(o)||r===d&&n(r)||u.connect(i,l,a)})).reduce((e,t)=>[...e,...t],[]))})(U,Dt,oe),Rt=((e,t,n)=>()=>{const r=new WeakMap;return{render(s,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(s,i)=>{let a=t(s);if(!D(a,i)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=e(i,t)}return r.set(i,a),await n(s,i,a),a})(s,i)}}})(Pt,ie,It),Ft=(Lt=u,e=>{const t=Lt.get(e);if(void 0===t)throw Oe();return t});var Lt;const Vt=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(Ot),zt=(e=>t=>null!==e&&t instanceof e)(Vt),qt=new WeakMap,Bt=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,r){if(null!==n){let s=this._listeners.get(n);void 0===s&&(s=e(this,n),"function"===typeof n&&this._listeners.set(n,s)),this._nativeEventTarget.addEventListener(t,s,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(kt),Ut=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(Ot),Wt=(e=>t=>null!==e&&t instanceof e)(Ut),Gt=(e=>t=>null!==e&&"function"===typeof e.AudioNode&&t instanceof e.AudioNode)(Ot),Ht=(e=>t=>null!==e&&"function"===typeof e.AudioParam&&t instanceof e.AudioParam)(Ot),Qt=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(Ot),Yt=((e,t,n,r,s,i,a,l,c,u,h,f,p,m,g,v)=>class extends u{constructor(t,r,s,i){super(s),this._context=t,this._nativeAudioNode=s;const a=h(t);f(a)&&!0!==n(ce,()=>ce(a,v))&&he(s),o.set(this,s),d.set(this,new Set),"closed"!==t.state&&r&&S(this),e(this,i,s)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw s();const l=h(this._context),u=g(l);if(p(e)||m(e))throw i();if(Y(e)){const s=ie(e);try{const t=ee(this._nativeAudioNode,s,n,o),r=le(this);(u||r)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!r&&le(e)&&S(e)}catch(f){if(12===f.code)throw i();throw f}if(t(this,e,n,o,u)){const t=c([this],e);ue(t,r(u))}return e}const d=ae(e);if("playbackRate"===d.name&&1024===d.maxValue)throw a();try{this._nativeAudioNode.connect(d,n),(u||le(this))&&this._nativeAudioNode.disconnect(d,n)}catch(f){if(12===f.code)throw i();throw f}if(fe(this,e,n,u)){const t=c([this],e);ue(t,r(u))}}disconnect(e,t,n){let r;const a=h(this._context),o=g(a);if(void 0===e)r=((e,t)=>{const n=U(e),r=[];for(const s of n.outputs)$(s)?pe(e,t,...s):me(e,t,...s),r.push(s[0]);return n.outputs.clear(),r})(this,o);else if("number"===typeof e){if(e<0||e>=this.numberOfOutputs)throw s();r=((e,t,n)=>{const r=U(e),s=[];for(const i of r.outputs)i[1]===n&&($(i)?pe(e,t,...i):me(e,t,...i),s.push(i[0]),r.outputs.delete(i));return s})(this,o,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw s();if(Y(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw s();if(r=((e,t,n,r,s)=>{const i=U(e);return Array.from(i.outputs).filter(e=>e[0]===n&&(void 0===r||e[1]===r)&&(void 0===s||e[2]===s)).map(n=>($(n)?pe(e,t,...n):me(e,t,...n),i.outputs.delete(n),n[0]))})(this,o,e,t,n),0===r.length)throw i()}for(const s of r){const e=c([this],s);ue(e,l)}}})(($t=a,(e,t,n)=>{const r=[];for(let s=0;s<n.numberOfInputs;s+=1)r.push(new Set);$t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,r,s,i,a,o,l,c,u,d,h)=>{const f=new WeakMap;return(p,m,g,v,b)=>{const{activeInputs:y,passiveInputs:x}=i(m),{outputs:_}=i(p),k=o(p),C=i=>{const o=l(m),c=l(p);if(i){const t=w(x,p,g,v);e(y,p,t,!1),b||d(p)||n(c,o,g,v),h(m)&&S(m)}else{const e=r(y,p,g,v);t(x,v,e,!1),b||d(p)||s(c,o,g,v);const n=a(m);if(0===n)u(m)&&T(m,y);else{const e=f.get(m);void 0!==e&&clearTimeout(e),f.set(m,setTimeout(()=>{u(m)&&T(m,y)},1e3*n))}}};return!!c(_,[m,g,v],e=>e[0]===m&&e[1]===g&&e[2]===v,!0)&&(k.add(C),u(p)?e(y,p,[g,v,C],!0):t(x,v,[p,g,C],!0),!0)}})(St,Ct,ee,Nt,se,U,jt,k,ie,X,q,oe,le),At,((e,t,n,r,s,i)=>a=>(o,l)=>{const c=e.get(o);if(void 0===c){if(!a&&i(o)){const e=r(o),{outputs:i}=n(o);for(const n of i)if($(n)){const s=r(n[0]);t(e,s,n[1],n[2])}else{const t=s(n[0]);e.disconnect(t,n[1])}}e.set(o,l)}else e.set(o,c+l)})(h,se,U,ie,ae,q),R,Pe,ot,((e,t,n,r,s,i,a,o)=>(l,c)=>{const u=t.get(l);if(void 0===u)throw new Error("Missing the expected cycle count.");const d=i(l.context),h=o(d);if(u===c){if(t.delete(l),!h&&a(l)){const t=r(l),{outputs:i}=n(l);for(const n of i)if($(n)){const s=r(n[0]);e(t,s,n[1],n[2])}else{const e=s(n[0]);t.connect(e,n[1])}}}else t.set(l,u-c)})(ee,h,U,ie,ae,Ft,q,zt),((e,t,n)=>function r(s,i){const a=Y(i)?i:n(e,i);if((e=>"delayTime"in e)(a))return[];if(s[0]===a)return[s];if(s.includes(a))return[];const{outputs:o}=t(a);return Array.from(o).map(e=>r([...s,a],e[0])).reduce((e,t)=>e.concat(t),[])})(qt,U,x),Bt,Ft,Wt,Gt,Ht,zt,Qt);var $t;const Xt=((e,t,n,r,s,i)=>class extends e{constructor(e,n){const a=s(e),o=O(O({},P),n),l=r(a,o);super(e,!1,l,i(a)?t():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(Yt,Rt,R,Pt,Ft,zt),Zt=new WeakSet,Kt=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(Ot),Jt=(en=new Uint32Array(1),e=>(en[0]=e,en[0]));var en;const tn=((e,t)=>n=>{n.copyFromChannel=function(r,s){const i=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(a>=n.numberOfChannels)throw t();const o=n.length,l=n.getChannelData(a),c=r.length;for(let e=i<0?-i:0;e+i<o&&e<c;e+=1)r[e]=l[e+i]},n.copyToChannel=function(r,s){const i=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(a>=n.numberOfChannels)throw t();const o=n.length,l=n.getChannelData(a),c=r.length;for(let e=i<0?-i:0;e+i<o&&e<c;e+=1)l[e+i]=r[e]}})(Jt,R),nn=(e=>t=>{t.copyFromChannel=(n=>function(r,s){const i=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(i<t.length)return n.call(t,r,a,i)})(t.copyFromChannel),t.copyToChannel=(n=>function(r,s){const i=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(i<t.length)return n.call(t,r,a,i)})(t.copyToChannel)})(Jt),rn=((e,t,n,r,s,i,a,o)=>{let l=null;return class c{constructor(c){if(null===s)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:d,sampleRate:h}=O(O({},L),c);null===l&&(l=new s(1,1,44100));const f=null!==r&&t(i,i)?new r({length:u,numberOfChannels:d,sampleRate:h}):l.createBuffer(d,u,h);if(0===f.numberOfChannels)throw n();return"function"!==typeof f.copyFromChannel?(a(f),F(f)):t(I,()=>I(f))||o(f),e.add(f),f}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===c.prototype||e.has(t)}}})(Zt,At,ot,Kt,Vt,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch(t){return!1}return!0})(Kt),tn,nn),sn=(e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)})(Je),an=((e,t,n)=>async(r,s,i)=>{const a=t(r);await Promise.all(Array.from(a.activeInputs).map(async t=>{let[r,a]=t;const o=e(r),l=await o.render(r,s);n(r)||l.connect(i,a)}))})(Dt,W,oe),on=(e=>(t,n,r)=>e(n,t,r))(an),ln=((e,t,n,r,s,i,a,o,l,c,u)=>(d,h)=>{const f=d.createBufferSource();return ze(f,h),Be(f,h,"playbackRate"),Ve(f,h,"buffer"),Ve(f,h,"loop"),Ve(f,h,"loopEnd"),Ve(f,h,"loopStart"),t(n,()=>n(d))||(e=>{e.start=(t=>{let n=!1;return function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(n)throw Oe();t.call(e,r,s,i),n=!0}})(e.start)})(f),t(r,()=>r(d))||l(f),t(s,()=>s(d))||c(f,d),t(i,()=>i(d))||Ue(f),t(a,()=>a(d))||u(f,d),t(o,()=>o(d))||We(f),e(d,f),f})(sn,At,e=>{const t=e.createBufferSource();t.start();try{t.start()}catch(n){return!0}return!1},e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch(r){return!1}return!0},e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch(n){return!1}return!0},yt,xt,_t,e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;const i=e.buffer,a=null===i?r:Math.min(i.duration,r);null!==i&&a>i.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,a,s)})(e.start)},(e=>(t,n)=>{const r=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=r),e(t,"buffer",e=>()=>{const n=e.call(t);return n===r?null:n},e=>n=>e.call(t,null===n?r:n))})(vt),wt),cn=((e,t)=>(n,r,s)=>(e(r).replay(s),t(r,n,s)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(W),an),un=((e,t,n,r,s)=>()=>{const i=new WeakMap;let a=null,o=null;return{set start(e){a=e},set stop(e){o=e},render(l,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const d=D(u,c);if(!d){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(c,e),null!==a&&u.start(...a),null!==o&&u.stop(o)}return i.set(c,u),d?await e(c,l.playbackRate,u.playbackRate):await r(c,l.playbackRate,u.playbackRate),await s(l,c,u),u})(l,c)}}})(on,ln,ie,cn,It),dn=((e,t,n,r,i,a,o,l,c,u,d,h,f)=>function(p,m,g){let v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const y=g.value,x=new s.AutomationEventList(y),_=m?r(x):null,w={get defaultValue(){return y},get maxValue(){return null===v?g.maxValue:v},get minValue(){return null===b?g.minValue:b},get value(){return g.value},set value(e){g.value=e,w.setValueAtTime(e,p.context.currentTime)},cancelAndHoldAtTime(e){if("function"===typeof g.cancelAndHoldAtTime)null===_&&x.flush(p.context.currentTime),x.add(i(e)),g.cancelAndHoldAtTime(e);else{const t=Array.from(x).pop();null===_&&x.flush(p.context.currentTime),x.add(i(e));const n=Array.from(x).pop();g.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?g.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?g.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?g.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&g.setValueCurveAtTime(n.values,n.startTime,n.duration))}return w},cancelScheduledValues:e=>(null===_&&x.flush(p.context.currentTime),x.add(a(e)),g.cancelScheduledValues(e),w),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=p.context.currentTime;return null===_&&x.flush(n),0===Array.from(x).length&&(x.add(u(y,n)),g.setValueAtTime(y,n)),x.add(o(e,t)),g.exponentialRampToValueAtTime(e,t),w},linearRampToValueAtTime(e,t){const n=p.context.currentTime;return null===_&&x.flush(n),0===Array.from(x).length&&(x.add(u(y,n)),g.setValueAtTime(y,n)),x.add(l(e,t)),g.linearRampToValueAtTime(e,t),w},setTargetAtTime:(e,t,n)=>(null===_&&x.flush(p.context.currentTime),x.add(c(e,t,n)),g.setTargetAtTime(e,t,n),w),setValueAtTime:(e,t)=>(null===_&&x.flush(p.context.currentTime),x.add(u(e,t)),g.setValueAtTime(e,t),w),setValueCurveAtTime(e,t,n){const r=e instanceof Float32Array?e:new Float32Array(e);if(null!==h&&"webkitAudioContext"===h.name){const e=t+n,s=p.context.sampleRate,i=Math.ceil(t*s),a=Math.floor(e*s),o=a-i,l=new Float32Array(o);for(let u=0;u<o;u+=1){const e=(r.length-1)/n*((i+u)/s-t),a=Math.floor(e),o=Math.ceil(e);l[u]=a===o?r[a]:(1-(e-a))*r[a]+(1-(o-e))*r[o]}null===_&&x.flush(p.context.currentTime),x.add(d(l,t,n)),g.setValueCurveAtTime(l,t,n);const c=a/s;c<e&&f(w,l[l.length-1],c),f(w,r[r.length-1],e)}else null===_&&x.flush(p.context.currentTime),x.add(d(r,t,n)),g.setValueCurveAtTime(r,t,n);return w}};return n.set(w,g),t.set(w,p),e(w,_),w})((hn=l,(e,t)=>{hn.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),qt,c,e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:r}=n;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:r}=n;t.linearRampToValueAtTime(r,e)}else if("setTarget"===n.type){const{startTime:e,target:r,timeConstant:s}=n;t.setTargetAtTime(r,e,s)}else if("setValue"===n.type){const{startTime:e,value:r}=n;t.setValueAtTime(r,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:s}=n;t.setValueCurveAtTime(s,r,e)}}}}),s.createCancelAndHoldAutomationEvent,s.createCancelScheduledValuesAutomationEvent,s.createExponentialRampToValueAutomationEvent,s.createLinearRampToValueAutomationEvent,s.createSetTargetAutomationEvent,s.createSetValueAutomationEvent,s.createSetValueCurveAutomationEvent,Ut,bt);var hn;const fn=((e,t,n,r,s,i,a,o)=>class extends e{constructor(e,r){const o=i(e),l=O(O({},B),r),c=s(o,l),u=a(o),d=u?t():null;super(e,!1,c,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,u,c.playbackRate,z,V)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){S(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),q(this)&&N(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(Yt,un,dn,Oe,ln,Ft,zt,kt),pn=((e,t,n,r,s,i,a,o)=>class extends e{constructor(e,n){const r=i(e),l=a(r),c=s(r,n,l);super(e,!1,c,l?t(o):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Yt,e=>{const t=new WeakMap;return{render(n,r){const s=t.get(r);return void 0!==s?Promise.resolve(s):(async(n,r)=>{const s=r.destination;return t.set(r,s),await e(n,r,s),s})(n,r)}}},R,Oe,((e,t)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch(o){}s&&"explicit"!==i.channelCountMode&&(i.channelCountMode="explicit"),0===i.maxChannelCount&&Object.defineProperty(i,"maxChannelCount",{value:r});const a=e(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(a,"channelCount",e=>()=>e.call(a),e=>t=>{e.call(a,t);try{i.channelCount=t}catch(n){if(t>i.maxChannelCount)throw n}}),t(a,"channelCountMode",e=>()=>e.call(a),e=>t=>{e.call(a,t),i.channelCountMode=t}),t(a,"channelInterpretation",e=>()=>e.call(a),e=>t=>{e.call(a,t),i.channelInterpretation=t}),Object.defineProperty(a,"maxChannelCount",{get:()=>i.maxChannelCount}),a.connect(i),a})(Je,vt),Ft,zt,It),mn=((e,t,n,r,s)=>()=>{const i=new WeakMap;return{render(a,o){const l=i.get(o);return void 0!==l?Promise.resolve(l):(async(a,o)=>{let l=n(a);const c=D(l,o);if(!c){const e={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(o,e)}return i.set(o,l),c?(await e(o,a.Q,l.Q),await e(o,a.detune,l.detune),await e(o,a.frequency,l.frequency),await e(o,a.gain,l.gain)):(await r(o,a.Q,l.Q),await r(o,a.detune,l.detune),await r(o,a.frequency,l.frequency),await r(o,a.gain,l.gain)),await s(a,o,l),l})(a,o)}}})(on,Qe,ie,cn,It),gn=(e=>(t,n)=>e.set(t,n))(Tt),vn=((e,t,n,r,s,i,a,o)=>class extends e{constructor(e,r){const l=i(e),c=O(O({},we),r),u=s(l,c),d=a(l);super(e,!1,u,d?n():null),this._Q=t(this,d,u.Q,z,V),this._detune=t(this,d,u.detune,1200*Math.log2(z),-1200*Math.log2(z)),this._frequency=t(this,d,u.frequency,e.sampleRate/2,0),this._gain=t(this,d,u.gain,40*Math.log10(z),V),this._nativeBiquadFilterNode=u,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(s){if(11===s.code)throw r();throw s}if(e.length!==t.length||t.length!==n.length)throw r()}})(Yt,dn,mn,Pe,Qe,Ft,zt,gn),bn=((e,t)=>(n,r,s)=>{const i=new Set;return n.connect=(s=>function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const c=0===i.size;if(t(a))return s.call(n,a,o,l),e(i,[a,o,l],e=>e[0]===a&&e[1]===o&&e[2]===l,!0),c&&r(),a;s.call(n,a,o),e(i,[a,o],e=>e[0]===a&&e[1]===o,!0),c&&r()})(n.connect),n.disconnect=(e=>(r,a,o)=>{const l=i.size>0;if(void 0===r)e.apply(n),i.clear();else if("number"===typeof r){e.call(n,r);for(const e of i)e[1]===r&&i.delete(e)}else{t(r)?e.call(n,r,a,o):e.call(n,r,a);for(const e of i)e[0]!==r||void 0!==a&&e[1]!==a||void 0!==o&&e[2]!==o||i.delete(e)}const c=0===i.size;l&&c&&s()})(n.disconnect),n})(X,Gt),yn=((e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const s=n.createBufferSource();t(r,()=>{const e=r.numberOfInputs;for(let t=0;t<e;t+=1)s.connect(r,0,t)},()=>s.disconnect(r))})(Oe,bn),xn=((e,t)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,s),ze(s,r),s})(Ut,yn),_n=((e,t,n)=>()=>{const r=new WeakMap;return{render(s,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(s,i)=>{let a=t(s);if(!D(a,i)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=e(i,t)}return r.set(i,a),await n(s,i,a),a})(s,i)}}})(xn,ie,It),wn=((e,t,n,r,s)=>class extends e{constructor(e,i){const a=r(e),o=O(O({},ke),i);super(e,!1,n(a,o),s(a)?t():null)}})(Yt,_n,xn,Ft,zt),kn=((e,t,n)=>()=>{const r=new WeakMap;return{render(s,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(s,i)=>{let a=t(s);if(!D(a,i)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=e(i,t)}return r.set(i,a),await n(s,i,a),a})(s,i)}}})(Ye,ie,It),Sn=((e,t,n,r,s,i)=>class extends e{constructor(e,a){const o=r(e),l=i(O(O({},Se),a));super(e,!1,n(o,l),s(o)?t():null)}})(Yt,kn,Ye,Ft,zt,e=>O(O({},e),{},{channelCount:e.numberOfOutputs})),Cn=((e,t,n,r)=>(s,i)=>{let{offset:a}=i,o=$e(i,Ze);const l=s.createBuffer(1,2,44100),c=t(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(s,O(O({},o),{},{gain:a})),d=l.getChannelData(0);d[0]=1,d[1]=1,c.buffer=l,c.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){u.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){u.channelInterpretation=e},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(e){c.onended=e},addEventListener(){return c.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return c.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return c.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c.start.call(c,e)},stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c.stop.call(c,e)}};return e(s,c),r(Xe(h,u),()=>c.connect(u),()=>c.disconnect(u))})(sn,ln,Je,bn),Nn=((e,t,n,r,s)=>(i,a)=>{if(void 0===i.createConstantSource)return n(i,a);const o=i.createConstantSource();return ze(o,a),Be(o,a,"offset"),t(r,()=>r(i))||Ue(o),t(s,()=>s(i))||We(o),e(i,o),o})(sn,At,Cn,yt,_t),Tn=((e,t,n,r,s)=>()=>{const i=new WeakMap;let a=null,o=null;return{set start(e){a=e},set stop(e){o=e},render(l,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const d=D(u,c);if(!d){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(c,e),null!==a&&u.start(a),null!==o&&u.stop(o)}return i.set(c,u),d?await e(c,l.offset,u.offset):await r(c,l.offset,u.offset),await s(l,c,u),u})(l,c)}}})(on,Nn,ie,cn,It),jn=((e,t,n,r,s,i,a)=>class extends e{constructor(e,a){const o=s(e),l=O(O({},Ce),a),c=r(o,l),u=i(o),d=u?n():null;super(e,!1,c,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=c,this._offset=t(this,u,c.offset,z,V),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){S(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),q(this)&&N(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(Yt,dn,Tn,Nn,Ft,zt,kt),An=((e,t)=>(n,r)=>{const s=n.createConvolver();if(ze(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),Ve(s,r,"buffer"),r.channelCount>2)throw e();if(t(s,"channelCount",e=>()=>e.call(s),t=>n=>{if(n>2)throw e();return t.call(s,n)}),"max"===r.channelCountMode)throw e();return t(s,"channelCountMode",e=>()=>e.call(s),t=>n=>{if("max"===n)throw e();return t.call(s,n)}),s})(ot,vt),En=((e,t,n)=>()=>{const r=new WeakMap;return{render(s,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(s,i)=>{let a=t(s);if(!D(a,i)){const t={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=e(i,t)}return r.set(i,a),J(a)?await n(s,i,a.inputs[0]):await n(s,i,a),a})(s,i)}}})(An,ie,It),Mn=((e,t,n,r,s,i)=>class extends e{constructor(e,a){const o=r(e),l=O(O({},Ne),a),c=n(o,l);super(e,!1,c,s(o)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==l.buffer&&i(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(Yt,En,An,Ft,zt,gn),On=((e,t,n,r,s)=>i=>{const a=new WeakMap;return{render(o,l){const c=a.get(l);return void 0!==c?Promise.resolve(c):(async(o,l)=>{let c=n(o);const u=D(c,l);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:i};c=t(l,e)}return a.set(l,c),u?await e(l,o.delayTime,c.delayTime):await r(l,o.delayTime,c.delayTime),await s(o,l,c),c})(o,l)}}})(on,Ke,ie,cn,It),Pn=((e,t,n,r,s,i,a)=>class extends e{constructor(e,o){const l=s(e),c=O(O({},je),o),u=r(l,c),d=i(l);super(e,!1,u,d?n(c.maxDelayTime):null),this._delayTime=t(this,d,u.delayTime),a(this,c.maxDelayTime)}get delayTime(){return this._delayTime}})(Yt,dn,On,Ke,Ft,zt,gn),Dn=(e=>(t,n)=>{const r=t.createDynamicsCompressor();if(ze(r,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return Be(r,n,"attack"),Be(r,n,"knee"),Be(r,n,"ratio"),Be(r,n,"release"),Be(r,n,"threshold"),r})(ot),In=((e,t,n,r,s)=>()=>{const i=new WeakMap;return{render(a,o){const l=i.get(o);return void 0!==l?Promise.resolve(l):(async(a,o)=>{let l=n(a);const c=D(l,o);if(!c){const e={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(o,e)}return i.set(o,l),c?(await e(o,a.attack,l.attack),await e(o,a.knee,l.knee),await e(o,a.ratio,l.ratio),await e(o,a.release,l.release),await e(o,a.threshold,l.threshold)):(await r(o,a.attack,l.attack),await r(o,a.knee,l.knee),await r(o,a.ratio,l.ratio),await r(o,a.release,l.release),await r(o,a.threshold,l.threshold)),await s(a,o,l),l})(a,o)}}})(on,Dn,ie,cn,It),Rn=((e,t,n,r,s,i,a,o)=>class extends e{constructor(e,s){const l=i(e),c=O(O({},Ee),s),u=r(l,c),d=a(l);super(e,!1,u,d?n():null),this._attack=t(this,d,u.attack),this._knee=t(this,d,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=t(this,d,u.ratio),this._release=t(this,d,u.release),this._threshold=t(this,d,u.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Yt,dn,In,Dn,ot,Ft,zt,gn),Fn=((e,t,n,r,s)=>()=>{const i=new WeakMap;return{render(a,o){const l=i.get(o);return void 0!==l?Promise.resolve(l):(async(a,o)=>{let l=n(a);const c=D(l,o);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(o,e)}return i.set(o,l),c?await e(o,a.gain,l.gain):await r(o,a.gain,l.gain),await s(a,o,l),l})(a,o)}}})(on,Je,ie,cn,It),Ln=((e,t,n,r,s,i)=>class extends e{constructor(e,a){const o=s(e),l=O(O({},Me),a),c=r(o,l),u=i(o);super(e,!1,c,u?n():null),this._gain=t(this,u,c.gain,z,V)}get gain(){return this._gain}})(Yt,dn,Fn,Je,Ft,zt),Vn=((e,t,n,r)=>(s,i,a)=>{let{channelCount:o,channelCountMode:l,channelInterpretation:c,feedback:u,feedforward:d}=a;const h=Ge(i,s.sampleRate),f=u instanceof Float64Array?u:new Float64Array(u),p=d instanceof Float64Array?d:new Float64Array(d),m=f.length,g=p.length,v=Math.min(m,g);if(0===m||m>20)throw r();if(0===f[0])throw t();if(0===g||g>20)throw r();if(0===p[0])throw t();if(1!==f[0]){for(let e=0;e<g;e+=1)p[e]/=f[0];for(let e=1;e<m;e+=1)f[e]/=f[0]}const b=n(s,h,o,o);b.channelCount=o,b.channelCountMode=l,b.channelInterpretation=c;const y=[],x=[],_=[];for(let e=0;e<o;e+=1){y.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),x.push(e),_.push(t)}b.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,r=t.numberOfChannels;for(let s=0;s<r;s+=1){const e=t.getChannelData(s),r=n.getChannelData(s);y[s]=Ie(f,m,p,g,v,x[s],_[s],y[s],32,e,r)}};const w=s.sampleRate/2;return Xe({get bufferSize(){return h},get channelCount(){return b.channelCount},set channelCount(e){b.channelCount=e},get channelCountMode(){return b.channelCountMode},set channelCountMode(e){b.channelCountMode=e},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(e){b.channelInterpretation=e},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},addEventListener(){return b.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return b.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse(t,n,r){if(t.length!==n.length||n.length!==r.length)throw e();const s=t.length;for(let e=0;e<s;e+=1){const s=-Math.PI*(t[e]/w),i=[Math.cos(s),Math.sin(s)],a=et(nt(p,i),nt(f,i));n[e]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),r[e]=Math.atan2(a[1],a[0])}},removeEventListener(){return b.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},b)})(Pe,Oe,st,ot),zn=((e,t,n,r)=>s=>e(Fe,()=>Fe(s))?Promise.resolve(e(r,r)).then(e=>{if(!e){const e=n(s,512,0,1);s.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>s.currentTime,e.connect(s.destination)}return s.startRendering()}):new Promise(e=>{const n=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(s.destination),s.startRendering()}))(At,Je,st,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(e=>{n.oncomplete=()=>{r.disconnect(),e(0!==n.currentTime)},n.startRendering()})})(Je,Vt)),qn=((e,t,n,r,s)=>(i,a)=>{const o=new WeakMap;let l=null;const c=async(c,u)=>{let d=null,h=t(c);const f=D(h,u);if(void 0===u.createIIRFilter?d=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(h=u.createIIRFilter(a,i)),o.set(u,null===d?h:d),null!==d){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(c.context.destination.channelCount,c.context.length,u.sampleRate);l=(async()=>{await r(c,e,e.destination);return((e,t,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),a=s.length,o=i.length,l=Math.min(a,o);if(1!==s[0]){for(let e=0;e<a;e+=1)i[e]/=s[0];for(let e=1;e<o;e+=1)s[e]/=s[0]}const c=new Float32Array(32),u=new Float32Array(32),d=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels;for(let f=0;f<h;f+=1){const t=e.getChannelData(f),n=d.getChannelData(f);c.fill(0),u.fill(0),Ie(s,a,i,o,l,c,u,0,32,t,n)}return d})(await s(e),u,i,a)})()}const e=await l;return d.buffer=e,d.start(0),d}return await r(c,u,h),h};return{render(e,t){const n=o.get(t);return void 0!==n?Promise.resolve(n):c(e,t)}}})(ln,ie,Vt,It,zn),Bn=(e=>(t,n,r)=>{if(void 0===t.createIIRFilter)return e(t,n,r);const s=t.createIIRFilter(r.feedforward,r.feedback);return ze(s,r),s})(Vn),Un=((e,t,n,r,s,i)=>class extends e{constructor(e,a){const o=r(e),l=s(o),c=O(O({},De),a),u=t(o,l?null:e.baseLatency,c);super(e,!1,u,l?n(c.feedback,c.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw Pe();return t.call(e,n,r,s)})})(u),this._nativeIIRFilterNode=u,i(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(Yt,Bn,qn,Ft,zt,gn),Wn=((e,t,n,r,s,i,a,o)=>(l,c)=>{const u=c.listener,{forwardX:d,forwardY:h,forwardZ:f,positionX:p,positionY:m,positionZ:g,upX:v,upY:b,upZ:y}=void 0===u.forwardX?(()=>{const d=new Float32Array(1),h=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),f=a(c);let p=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const v=()=>{if(p)return;p=!0;const e=r(c,256,9,0);e.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[i(t,d,0),i(t,d,1),i(t,d,2),i(t,d,3),i(t,d,4),i(t,d,5)];n.some((e,t)=>e!==m[t])&&(u.setOrientation(...n),m=n);const r=[i(t,d,6),i(t,d,7),i(t,d,8)];r.some((e,t)=>e!==g[t])&&(u.setPosition(...r),g=r)},h.connect(e)},b=e=>t=>{t!==m[e]&&(m[e]=t,u.setOrientation(...m))},y=e=>t=>{t!==g[e]&&(g[e]=t,u.setPosition(...g))},x=(t,r,i)=>{const a=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});a.connect(h,0,t),a.start(),Object.defineProperty(a.offset,"defaultValue",{get:()=>r});const u=e({context:l},f,a.offset,z,V);var d,p,m,g,b,y,x;return o(u,"value",e=>()=>e.call(u),e=>t=>{try{e.call(u,t)}catch(n){if(9!==n.code)throw n}v(),f&&i(t)}),u.cancelAndHoldAtTime=(d=u.cancelAndHoldAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=d.apply(u,t);return v(),r}),u.cancelScheduledValues=(p=u.cancelScheduledValues,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=p.apply(u,t);return v(),r}),u.exponentialRampToValueAtTime=(m=u.exponentialRampToValueAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=m.apply(u,t);return v(),r}),u.linearRampToValueAtTime=(g=u.linearRampToValueAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=g.apply(u,t);return v(),r}),u.setTargetAtTime=(b=u.setTargetAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=b.apply(u,t);return v(),r}),u.setValueAtTime=(y=u.setValueAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=y.apply(u,t);return v(),r}),u.setValueCurveAtTime=(x=u.setValueCurveAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=x.apply(u,t);return v(),r}),u};return{forwardX:x(0,0,b(0)),forwardY:x(1,0,b(1)),forwardZ:x(2,-1,b(2)),positionX:x(6,0,y(0)),positionY:x(7,0,y(1)),positionZ:x(8,0,y(2)),upX:x(3,0,b(3)),upY:x(4,1,b(4)),upZ:x(5,0,b(5))}})():u;return{get forwardX(){return d},get forwardY(){return h},get forwardZ(){return f},get positionX(){return p},get positionY(){return m},get positionZ(){return g},get upX(){return v},get upY(){return b},get upZ(){return y}}})(dn,xn,Nn,st,ot,mt,zt,vt),Gn=new WeakMap,Hn=((e,t,n,r,s,i)=>class extends n{constructor(n,i){super(n),this._nativeContext=n,u.set(this,n),r(n)&&s.set(n,new Set),this._destination=new e(this,i),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"===typeof e?i(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(pn,Wn,Bt,zt,Gn,kt),Qn=((e,t,n,r,s,i)=>(a,o)=>{const l=a.createOscillator();return ze(l,o),Be(l,o,"detune"),Be(l,o,"frequency"),void 0!==o.periodicWave?l.setPeriodicWave(o.periodicWave):Ve(l,o,"type"),t(n,()=>n(a))||Ue(l),t(r,()=>r(a))||i(l,a),t(s,()=>s(a))||We(l),e(a,l),l})(sn,At,yt,xt,_t,wt),Yn=((e,t,n,r,s)=>()=>{const i=new WeakMap;let a=null,o=null,l=null;return{set periodicWave(e){a=e},set start(e){o=e},set stop(e){l=e},render(c,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):(async(c,u)=>{let d=n(c);const h=D(d,u);if(!h){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===a?void 0:a,type:d.type};d=t(u,e),null!==o&&d.start(o),null!==l&&d.stop(l)}return i.set(u,d),h?(await e(u,c.detune,d.detune),await e(u,c.frequency,d.frequency)):(await r(u,c.detune,d.detune),await r(u,c.frequency,d.frequency)),await s(c,u,d),d})(c,u)}}})(on,Qn,ie,cn,It),$n=((e,t,n,r,s,i,a)=>class extends e{constructor(e,a){const o=s(e),l=O(O({},ct),a),c=n(o,l),u=i(o),d=u?r():null,h=e.sampleRate/2;super(e,!1,c,d),this._detune=t(this,u,c.detune,153600,-153600),this._frequency=t(this,u,c.frequency,h,-h),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){S(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),q(this)&&N(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(Yt,dn,Qn,Yn,Ft,zt,kt),Xn=(e=>(t,n)=>{const r=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=t.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}})(ln),Zn=((e,t,n,r,s)=>(i,a)=>{let{curve:o,oversample:l}=a,c=$e(a,at);const u=i.createWaveShaper(),d=i.createWaveShaper();ze(u,c),ze(d,c);const h=n(i,O(O({},c),{},{gain:1})),f=n(i,O(O({},c),{},{gain:-1})),p=n(i,O(O({},c),{},{gain:1})),m=n(i,O(O({},c),{},{gain:-1}));let g=null,v=!1,b=null;const y={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){h.channelCount=e,f.channelCount=e,u.channelCount=e,p.channelCount=e,d.channelCount=e,m.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){h.channelCountMode=e,f.channelCountMode=e,u.channelCountMode=e,p.channelCountMode=e,d.channelCountMode=e,m.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){h.channelInterpretation=e,f.channelInterpretation=e,u.channelInterpretation=e,p.channelInterpretation=e,d.channelInterpretation=e,m.channelInterpretation=e},get context(){return u.context},get curve(){return b},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)u.curve=n,d.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),r=new Float32Array(e+2-e%2);t[0]=n[0],r[0]=-n[e-1];const s=Math.ceil((e+1)/2),i=(e+1)/2-1;for(let a=1;a<s;a+=1){const o=a/s*i,l=Math.floor(o),c=Math.ceil(o);t[a]=l===c?n[l]:(1-(o-l))*n[l]+(1-(c-o))*n[c],r[a]=l===c?-n[e-1-l]:-(1-(o-l))*n[e-1-l]-(1-(c-o))*n[e-1-c]}t[s]=e%2===1?n[s-1]:(n[s-2]+n[s-1])/2,u.curve=t,d.curve=r}b=n,v&&(r(b)&&null===g?g=e(i,h):null!==g&&(g(),g=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(e){u.oversample=e,d.oversample=e},addEventListener(){return h.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return h.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return h.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};null!==o&&(y.curve=o instanceof Float32Array?o:new Float32Array(o)),l!==y.oversample&&(y.oversample=l);return s(Xe(y,p),()=>{h.connect(u).connect(p),h.connect(f).connect(d).connect(m).connect(p),v=!0,r(b)&&(g=e(i,h))},()=>{h.disconnect(u),u.disconnect(p),h.disconnect(f),f.disconnect(d),d.disconnect(m),m.disconnect(p),v=!1,null!==g&&(g(),g=null)})})(Xn,Oe,Je,gt,bn),Kn=((e,t,n,r,s,i,a)=>(o,l)=>{const c=o.createWaveShaper();if(null!==i&&"webkitAudioContext"===i.name&&void 0===o.createGain().gain.automationRate)return n(o,l);ze(c,l);const u=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==u&&u.length<2)throw t();Ve(c,{curve:u},"curve"),Ve(c,l,"oversample");let d=null,h=!1;a(c,"curve",e=>()=>e.call(c),t=>n=>(t.call(c,n),h&&(r(n)&&null===d?d=e(o,c):r(n)||null===d||(d(),d=null)),n));return s(c,()=>{h=!0,r(c.curve)&&(d=e(o,c))},()=>{h=!1,null!==d&&(d(),d=null)})})(Xn,Oe,Zn,gt,bn,Ut,vt),Jn=((e,t,n,r,s,i,a,o,l,c)=>(u,d)=>{let{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:p,distanceModel:m,maxDistance:g,orientationX:v,orientationY:b,orientationZ:y,panningModel:x,positionX:_,positionY:w,positionZ:k,refDistance:S,rolloffFactor:C}=d,N=$e(d,rt);const T=u.createPanner();if(N.channelCount>2)throw a();if("max"===N.channelCountMode)throw a();ze(T,N);const j={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},A=n(u,O(O({},j),{},{channelInterpretation:"speakers",numberOfInputs:6})),E=r(u,O(O({},N),{},{gain:1})),M=r(u,O(O({},j),{},{gain:1})),P=r(u,O(O({},j),{},{gain:0})),D=r(u,O(O({},j),{},{gain:0})),I=r(u,O(O({},j),{},{gain:0})),R=r(u,O(O({},j),{},{gain:0})),F=r(u,O(O({},j),{},{gain:0})),L=s(u,256,6,1),V=i(u,O(O({},j),{},{curve:new Float32Array([1,1]),oversample:"none"}));let z=[v,b,y],q=[_,w,k];const B=new Float32Array(1);L.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[l(t,B,0),l(t,B,1),l(t,B,2)];n.some((e,t)=>e!==z[t])&&(T.setOrientation(...n),z=n);const r=[l(t,B,3),l(t,B,4),l(t,B,5)];r.some((e,t)=>e!==q[t])&&(T.setPosition(...r),q=r)},Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0});const U={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(e){if(e>2)throw a();E.channelCount=e,T.channelCount=e},get channelCountMode(){return T.channelCountMode},set channelCountMode(e){if("max"===e)throw a();E.channelCountMode=e,T.channelCountMode=e},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(e){E.channelInterpretation=e,T.channelInterpretation=e},get coneInnerAngle(){return T.coneInnerAngle},set coneInnerAngle(e){T.coneInnerAngle=e},get coneOuterAngle(){return T.coneOuterAngle},set coneOuterAngle(e){T.coneOuterAngle=e},get coneOuterGain(){return T.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();T.coneOuterGain=e},get context(){return T.context},get distanceModel(){return T.distanceModel},set distanceModel(e){T.distanceModel=e},get inputs(){return[E]},get maxDistance(){return T.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;T.maxDistance=e},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return P.gain},get orientationZ(){return D.gain},get panningModel(){return T.panningModel},set panningModel(e){T.panningModel=e},get positionX(){return I.gain},get positionY(){return R.gain},get positionZ(){return F.gain},get refDistance(){return T.refDistance},set refDistance(e){if(e<0)throw new RangeError;T.refDistance=e},get rolloffFactor(){return T.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;T.rolloffFactor=e},addEventListener(){return E.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return E.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return E.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};h!==U.coneInnerAngle&&(U.coneInnerAngle=h),f!==U.coneOuterAngle&&(U.coneOuterAngle=f),p!==U.coneOuterGain&&(U.coneOuterGain=p),m!==U.distanceModel&&(U.distanceModel=m),g!==U.maxDistance&&(U.maxDistance=g),v!==U.orientationX.value&&(U.orientationX.value=v),b!==U.orientationY.value&&(U.orientationY.value=b),y!==U.orientationZ.value&&(U.orientationZ.value=y),x!==U.panningModel&&(U.panningModel=x),_!==U.positionX.value&&(U.positionX.value=_),w!==U.positionY.value&&(U.positionY.value=w),k!==U.positionZ.value&&(U.positionZ.value=k),S!==U.refDistance&&(U.refDistance=S),C!==U.rolloffFactor&&(U.rolloffFactor=C),1===z[0]&&0===z[1]&&0===z[2]||T.setOrientation(...z),0===q[0]&&0===q[1]&&0===q[2]||T.setPosition(...q);return c(Xe(U,T),()=>{E.connect(T),e(E,V,0,0),V.connect(M).connect(A,0,0),V.connect(P).connect(A,0,1),V.connect(D).connect(A,0,2),V.connect(I).connect(A,0,3),V.connect(R).connect(A,0,4),V.connect(F).connect(A,0,5),A.connect(L).connect(u.destination)},()=>{E.disconnect(T),o(E,V,0,0),V.disconnect(M),M.disconnect(A),V.disconnect(P),P.disconnect(A),V.disconnect(D),D.disconnect(A),V.disconnect(I),I.disconnect(A),V.disconnect(R),R.disconnect(A),V.disconnect(F),F.disconnect(A),A.disconnect(L),L.disconnect(u.destination)})})(ee,Oe,xn,Je,st,Kn,ot,se,mt,bn),er=(e=>(t,n)=>{const r=t.createPanner();return void 0===r.orientationX?e(t,n):(ze(r,n),Be(r,n,"orientationX"),Be(r,n,"orientationY"),Be(r,n,"orientationZ"),Be(r,n,"positionX"),Be(r,n,"positionY"),Be(r,n,"positionZ"),Ve(r,n,"coneInnerAngle"),Ve(r,n,"coneOuterAngle"),Ve(r,n,"coneOuterGain"),Ve(r,n,"distanceModel"),Ve(r,n,"maxDistance"),Ve(r,n,"panningModel"),Ve(r,n,"refDistance"),Ve(r,n,"rolloffFactor"),r)})(Jn),tr=((e,t,n,r,s,i,a,o,l,c)=>()=>{const u=new WeakMap;let d=null;return{render(h,f){const p=u.get(f);return void 0!==p?Promise.resolve(p):(async(h,f)=>{let p=null,m=i(h);const g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},v=O(O({},g),{},{coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor}),b=D(m,f);if("bufferSize"in m)p=r(f,O(O({},g),{},{gain:1}));else if(!b){const e=O(O({},v),{},{orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value});m=s(f,e)}if(u.set(f,null===p?m:p),null!==p){if(null===d){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new a(6,h.context.length,f.sampleRate),r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});r.connect(e.destination),d=(async()=>{const t=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map(async(t,r)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0});return await o(e,t,s.offset),s}));for(let e=0;e<6;e+=1)t[e].connect(r,0,e),t[e].start(0);return c(e)})()}const e=await d,i=r(f,O(O({},g),{},{gain:1}));await l(h,f,i);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let m=[u[0][0],u[1][0],u[2][0]],b=[u[3][0],u[4][0],u[5][0]],y=r(f,O(O({},g),{},{gain:1})),x=s(f,O(O({},v),{},{orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:b[0],positionY:b[1],positionZ:b[2]}));i.connect(y).connect(x.inputs[0]),x.connect(p);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],n=[u[3][t],u[4][t],u[5][t]];if(e.some((e,t)=>e!==m[t])||n.some((e,t)=>e!==b[t])){m=e,b=n;const a=t/f.sampleRate;y.gain.setValueAtTime(0,a),y=r(f,O(O({},g),{},{gain:0})),x=s(f,O(O({},v),{},{orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:b[0],positionY:b[1],positionZ:b[2]})),y.gain.setValueAtTime(1,a),i.connect(y).connect(x.inputs[0]),x.connect(p)}}return p}return b?(await e(f,h.orientationX,m.orientationX),await e(f,h.orientationY,m.orientationY),await e(f,h.orientationZ,m.orientationZ),await e(f,h.positionX,m.positionX),await e(f,h.positionY,m.positionY),await e(f,h.positionZ,m.positionZ)):(await o(f,h.orientationX,m.orientationX),await o(f,h.orientationY,m.orientationY),await o(f,h.orientationZ,m.orientationZ),await o(f,h.positionX,m.positionX),await o(f,h.positionY,m.positionY),await o(f,h.positionZ,m.positionZ)),J(m)?await l(h,f,m.inputs[0]):await l(h,f,m),m})(h,f)}}})(on,xn,Nn,Je,er,ie,Vt,cn,It,zn),nr=((e,t,n,r,s,i,a)=>class extends e{constructor(e,o){const l=s(e),c=O(O({},ut),o),u=n(l,c),d=i(l);super(e,!1,u,d?r():null),this._nativePannerNode=u,this._orientationX=t(this,d,u.orientationX,z,V),this._orientationY=t(this,d,u.orientationY,z,V),this._orientationZ=t(this,d,u.orientationZ,z,V),this._positionX=t(this,d,u.positionX,z,V),this._positionY=t(this,d,u.positionY,z,V),this._positionZ=t(this,d,u.positionZ,z,V),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(Yt,dn,er,tr,Ft,zt,gn),rr=(e=>(t,n)=>{let{disableNormalization:r,imag:s,real:i}=n;const a=s instanceof Float32Array?s:new Float32Array(s),o=i instanceof Float32Array?i:new Float32Array(i),l=t.createPeriodicWave(o,a,{disableNormalization:r});if(Array.from(s).length<2)throw e();return l})(R),sr=((e,t,n,r)=>class s{constructor(s,i){const a=t(s),o=r(O(O({},dt),i)),l=e(a,o);return n.add(l),l}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===s.prototype||n.has(e)}})(rr,Ft,new WeakSet,e=>{const{imag:t,real:n}=e;return O(O({},e),{},void 0===t?void 0===n?{imag:[0,0],real:[0,0]}:{imag:Array.from(n,()=>0),real:n}:void 0===n?{imag:t,real:Array.from(t,()=>0)}:{imag:t,real:n})}),ir=((e,t,n,r,s,i)=>{const a=16385,o=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u=O(O({},c),{},{oversample:"none"}),d=(e,i,d,h,f)=>{if(1===i)return((e,t,s,i)=>{const d=new Float32Array(a),h=new Float32Array(a);for(let n=0;n<a;n+=1){const e=n/16384*l;d[n]=Math.cos(e),h[n]=Math.sin(e)}const f=n(e,O(O({},c),{},{gain:0})),p=r(e,O(O({},u),{},{curve:d})),m=r(e,O(O({},u),{},{curve:o})),g=n(e,O(O({},c),{},{gain:0})),v=r(e,O(O({},u),{},{curve:h}));return{connectGraph(){t.connect(f),t.connect(void 0===m.inputs?m:m.inputs[0]),t.connect(g),m.connect(s),s.connect(void 0===p.inputs?p:p.inputs[0]),s.connect(void 0===v.inputs?v:v.inputs[0]),p.connect(f.gain),v.connect(g.gain),f.connect(i,0,0),g.connect(i,0,1)},disconnectGraph(){t.disconnect(f),t.disconnect(void 0===m.inputs?m:m.inputs[0]),t.disconnect(g),m.disconnect(s),s.disconnect(void 0===p.inputs?p:p.inputs[0]),s.disconnect(void 0===v.inputs?v:v.inputs[0]),p.disconnect(f.gain),v.disconnect(g.gain),f.disconnect(i,0,0),g.disconnect(i,0,1)}}})(e,d,h,f);if(2===i)return((e,s,i,d)=>{const h=new Float32Array(a),f=new Float32Array(a),p=new Float32Array(a),m=new Float32Array(a),g=Math.floor(8192.5);for(let t=0;t<a;t+=1)if(t>g){const e=(t-g)/(16384-g)*l;h[t]=Math.cos(e),f[t]=Math.sin(e),p[t]=0,m[t]=1}else{const e=t/(16384-g)*l;h[t]=1,f[t]=0,p[t]=Math.cos(e),m[t]=Math.sin(e)}const v=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),b=n(e,O(O({},c),{},{gain:0})),y=r(e,O(O({},u),{},{curve:h})),x=n(e,O(O({},c),{},{gain:0})),_=r(e,O(O({},u),{},{curve:f})),w=r(e,O(O({},u),{},{curve:o})),k=n(e,O(O({},c),{},{gain:0})),S=r(e,O(O({},u),{},{curve:p})),C=n(e,O(O({},c),{},{gain:0})),N=r(e,O(O({},u),{},{curve:m}));return{connectGraph(){s.connect(v),s.connect(void 0===w.inputs?w:w.inputs[0]),v.connect(b,0),v.connect(x,0),v.connect(k,1),v.connect(C,1),w.connect(i),i.connect(void 0===y.inputs?y:y.inputs[0]),i.connect(void 0===_.inputs?_:_.inputs[0]),i.connect(void 0===S.inputs?S:S.inputs[0]),i.connect(void 0===N.inputs?N:N.inputs[0]),y.connect(b.gain),_.connect(x.gain),S.connect(k.gain),N.connect(C.gain),b.connect(d,0,0),k.connect(d,0,0),x.connect(d,0,1),C.connect(d,0,1)},disconnectGraph(){s.disconnect(v),s.disconnect(void 0===w.inputs?w:w.inputs[0]),v.disconnect(b,0),v.disconnect(x,0),v.disconnect(k,1),v.disconnect(C,1),w.disconnect(i),i.disconnect(void 0===y.inputs?y:y.inputs[0]),i.disconnect(void 0===_.inputs?_:_.inputs[0]),i.disconnect(void 0===S.inputs?S:S.inputs[0]),i.disconnect(void 0===N.inputs?N:N.inputs[0]),y.disconnect(b.gain),_.disconnect(x.gain),S.disconnect(k.gain),N.disconnect(C.gain),b.disconnect(d,0,0),k.disconnect(d,0,0),x.disconnect(d,0,1),C.disconnect(d,0,1)}}})(e,d,h,f);throw s()};return(t,r)=>{let{channelCount:a,channelCountMode:o,pan:l}=r,c=$e(r,it);if("max"===o)throw s();const u=e(t,O(O({},c),{},{channelCount:1,channelCountMode:o,numberOfInputs:2})),h=n(t,O(O({},c),{},{channelCount:a,channelCountMode:o,gain:1})),f=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:l});let{connectGraph:p,disconnectGraph:m}=d(t,a,h,f,u);Object.defineProperty(f.gain,"defaultValue",{get:()=>0}),Object.defineProperty(f.gain,"maxValue",{get:()=>1}),Object.defineProperty(f.gain,"minValue",{get:()=>-1});const g={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(e){h.channelCount!==e&&(v&&m(),({connectGraph:p,disconnectGraph:m}=d(t,e,h,f,u)),v&&p()),h.channelCount=e},get channelCountMode(){return h.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw s();h.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){h.channelInterpretation=e},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get pan(){return f.gain},addEventListener(){return h.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return h.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return h.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};let v=!1;return i(Xe(g,u),()=>{p(),v=!0},()=>{m(),v=!1})}})(xn,Ye,Je,Kn,ot,bn),ar=((e,t)=>(n,r)=>{const s=r.channelCountMode;if("clamped-max"===s)throw t();if(void 0===n.createStereoPanner)return e(n,r);const i=n.createStereoPanner();return ze(i,r),Be(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:e=>{if(e!==s)throw t()}}),i})(ir,ot),or=((e,t,n,r,s)=>()=>{const i=new WeakMap;return{render(a,o){const l=i.get(o);return void 0!==l?Promise.resolve(l):(async(a,o)=>{let l=n(a);const c=D(l,o);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(o,e)}return i.set(o,l),c?await e(o,a.pan,l.pan):await r(o,a.pan,l.pan),J(l)?await s(a,o,l.inputs[0]):await s(a,o,l),l})(a,o)}}})(on,ar,ie,cn,It),lr=((e,t,n,r,s,i)=>class extends e{constructor(e,a){const o=s(e),l=O(O({},ht),a),c=n(o,l),u=i(o);super(e,!1,c,u?r():null),this._pan=t(this,u,c.pan)}get pan(){return this._pan}})(Yt,dn,ar,or,Ft,zt),cr=((e,t,n)=>()=>{const r=new WeakMap;return{render(s,i){const a=r.get(i);return void 0!==a?Promise.resolve(a):(async(s,i)=>{let a=t(s);if(!D(a,i)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=e(i,t)}return r.set(i,a),J(a)?await n(s,i,a.inputs[0]):await n(s,i,a),a})(s,i)}}})(Kn,ie,It),ur=((e,t,n,r,s,i,a)=>class extends e{constructor(e,t){const o=s(e),l=O(O({},pt),t),c=n(o,l);super(e,!0,c,i(o)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(Yt,Oe,Kn,cr,Ft,zt,gn),dr=(e=>null!==e&&e.isSecureContext)(Ot),hr=(e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return r()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(Ot),fr=new WeakMap,pr=((e,t)=>n=>{let r=e.get(n);if(void 0!==r)return r;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r})(fr,Vt),mr=dr?((e,t,n,r,s,i,a,o,l,c,u,d,h)=>{let p=0;return function(m,g){let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"};const _=u.get(m);if(void 0!==_&&_.has(g))return Promise.resolve();const w=c.get(m);if(void 0!==w){const e=w.get(g);if(void 0!==e)return e}const k=i(m),S=void 0===k.audioWorklet?s(g).then(e=>{let[t,r]=e;const[s,i]=v(t,r),a="".concat(s,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(i,"\n})})(window,'_AWGS')");return n(a)}).then(()=>{const e=h._AWGS.pop();if(void 0===e)throw new SyntaxError;r(k.currentTime,k.sampleRate,()=>e(class{},void 0,(e,n)=>{if(""===e.trim())throw t();const r=f.get(k);if(void 0!==r){if(r.has(e))throw t();y(n),b(n.parameterDescriptors),r.set(e,n)}else y(n),b(n.parameterDescriptors),f.set(k,new Map([[e,n]]))},k.sampleRate,void 0,void 0))}):Promise.all([s(g),Promise.resolve(e(d,d))]).then(e=>{let[[t,n],r]=e;const s=p+1;p=s;const[i,c]=v(t,n),u=r?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",d=r?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",h=r?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",f="".concat(i,";((AudioWorkletProcessor,registerProcessor)=>{").concat(c,"\n})(").concat(u,",(n,p)=>registerProcessor(n,class extends p{").concat(d,"process(i,o,p){").concat(h,"return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac").concat(s,"',class extends AudioWorkletProcessor{process(){return !1}})"),m=new Blob([f],{type:"application/javascript; charset=utf-8"}),g=URL.createObjectURL(m);return k.audioWorklet.addModule(g,x).then(()=>{if(o(k))return k;const e=a(k);return e.audioWorklet.addModule(g,x).then(()=>e)}).then(e=>{if(null===l)throw new SyntaxError;try{new l(e,"__sac".concat(s))}catch(t){throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(g))});return void 0===w?c.set(m,new Map([[g,S]])):w.set(g,S),S.then(()=>{const e=u.get(m);void 0===e?u.set(m,new Set([g])):e.add(g)}).finally(()=>{const e=c.get(m);void 0!==e&&e.delete(g)}),S}})(At,ot,(e=>t=>new Promise((n,r)=>{if(null===e)return void r(new SyntaxError);const s=e.document.head;if(null===s)r(new SyntaxError);else{const i=e.document.createElement("script"),a=new Blob([t],{type:"application/javascript"}),o=URL.createObjectURL(a),l=e.onerror,c=()=>{e.onerror=l,URL.revokeObjectURL(o)};e.onerror=(t,n,s,i,a)=>n===o||n===e.location.href&&1===s&&1===i?(c(),r(a),!1):null!==l?l(t,n,s,i,a):void 0,i.onerror=()=>{c(),r(new SyntaxError)},i.onload=()=>{c(),n()},i.src=o,i.type="module",s.appendChild(i)}}))(Ot),hr,(e=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch(n){}throw e()})(()=>new DOMException("","AbortError")),Ft,pr,zt,Qt,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),s=URL.createObjectURL(n);let i=!1,a=!1;try{await r.audioWorklet.addModule(s);const t=new e(r,"a",{numberOfOutputs:0}),n=r.createOscillator();t.port.onmessage=()=>i=!0,t.onprocessorerror=()=>a=!0,n.connect(t),n.start(0),await r.startRendering(),await new Promise(e=>setTimeout(e))}catch(o){}finally{URL.revokeObjectURL(s)}return i&&!a})(Qt,Vt),Ot):void 0,gr=((e,t)=>n=>e(n)||t(n))(Wt,zt),vr=((e,t,n,r,s,i,a,o,l,c,u)=>(d,h)=>{const f=a(d)?d:i(d);if(s.has(h)){const e=n();return Promise.reject(e)}try{s.add(h)}catch(p){}return t(l,()=>l(f))?f.decodeAudioData(h).then(n=>(Te(h).catch(()=>{}),t(o,()=>o(n))||u(n),e.add(n),n)):new Promise((t,n)=>{const s=async()=>{try{await Te(h)}catch(e){}},i=e=>{n(e),s()};try{f.decodeAudioData(h,n=>{"function"!==typeof n.copyFromChannel&&(c(n),F(n)),e.add(n),s().then(()=>t(n))},e=>{i(null===e?r():e)})}catch(a){i(a)}})})(Zt,At,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,Ft,gr,I,Fe,tn,nn),br=((e,t,n,r,s,i,a,o,l,c,u,d,h,f,p,m,g,v,b,y)=>class extends p{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new s(this)}createBuffer(e,t,r){return new n({length:t,numberOfChannels:e,sampleRate:r})}createBufferSource(){return new r(this)}createChannelMerger(){return new i(this,{numberOfInputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createChannelSplitter(){return new a(this,{numberOfOutputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createConstantSource(){return new o(this)}createConvolver(){return new l(this)}createDelay(){return new u(this,{maxDelayTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(e,t){return new f(this,{feedback:t,feedforward:e})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(e,t){return new v(this,O(O({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1}),{},{imag:t,real:e}))}createStereoPanner(){return new b(this)}createWaveShaper(){return new y(this)}decodeAudioData(e,t,n){return c(this._nativeContext,e).then(e=>("function"===typeof t&&t(e),e),e=>{throw"function"===typeof n&&n(e),e})}})(mr,Xt,rn,fn,vn,wn,Sn,jn,Mn,vr,Pn,Rn,Ln,Un,Hn,$n,nr,sr,lr,ur),yr=((e,t,n,r)=>class extends e{constructor(e,s){const i=n(e),a=t(i,s);if(r(i))throw TypeError();super(e,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Yt,(e,t)=>e.createMediaElementSource(t.mediaElement),Ft,zt),xr=((e,t,n,r)=>class extends e{constructor(e,s){const i=n(e);if(r(i))throw new TypeError;const a=O(O({},Re),s),o=t(i,a);super(e,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Yt,(e,t)=>{const n=e.createMediaStreamDestination();return ze(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Ft,zt),_r=((e,t,n,r)=>class extends e{constructor(e,s){const i=n(e),a=t(i,s);if(r(i))throw new TypeError;super(e,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Yt,(e,t)=>{let{mediaStream:n}=t;const r=n.getAudioTracks();r.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0);const s=r.slice(0,1),i=e.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:n}),i},Ft,zt),wr=((e,t)=>(n,r)=>{let{mediaStreamTrack:s}=r;if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),a=n.createMediaStreamSource(i);if("audio"!==s.kind)throw e();if(t(n))throw new TypeError;return a})(Oe,zt),kr=((e,t,n)=>class extends e{constructor(e,r){const s=n(e);super(e,!0,t(s,r),null)}})(Yt,wr,Ft),Sr=((e,t,n,r,s,i,a,o,l)=>class extends e{constructor(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===l)throw new Error("Missing the native AudioContext constructor.");try{e=new l(t)}catch(a){if(12===a.code&&"sampleRate is not in range"===a.message)throw n();throw a}if(null===e)throw r();if(!Q(t.latencyHint))throw new TypeError("The provided value '".concat(t.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:s}=t,{sampleRate:i}=e;if(this._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===s?512/i:"interactive"===s||void 0===s?256/i:"playback"===s?1024/i:128*Math.max(2,Math.min(128,Math.round(s*i/128)))/i,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),H(this)}))}createMediaElementSource(e){return new s(this,{mediaElement:e})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(e){return new a(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new o(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(e=>{if(void 0===e||15===e.code)throw t();throw e})}suspend(){return this._nativeAudioContext.suspend().catch(e=>{if(void 0===e)throw t();throw e})}})(br,Oe,ot,ft,yr,xr,_r,kr,Ut),Cr=(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Gn),Nr=(e=>(t,n)=>{e(t).add(n)})(Cr),Tr=(e=>function(t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=t[arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];if(void 0===s)throw e();return de(n)?s.connect(n,0,r):s.connect(n,0)})(R),jr=(e=>(t,n)=>{e(t).delete(n)})(Cr),Ar=(e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?t.forEach(e=>e.disconnect()):"number"===typeof n?Ae(e,t,n).disconnect():de(n)?void 0===r?t.forEach(e=>e.disconnect(n)):void 0===s?Ae(e,t,r).disconnect(n,0):Ae(e,t,r).disconnect(n,0,s):void 0===r?t.forEach(e=>e.disconnect(n)):Ae(e,t,r).disconnect(n,0)})(R),Er=new WeakMap,Mr=((e,t)=>n=>t(e,n))(Er,x),Or=((e,t,n,r,s,i,a,o,l,c,u,d,h)=>(f,m,g,v)=>{if(0===v.numberOfInputs&&0===v.numberOfOutputs)throw l();const b=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(b.some(e=>e<1))throw l();if(b.length!==v.numberOfOutputs)throw t();if("explicit"!==v.channelCountMode)throw l();const y=v.channelCount*v.numberOfInputs,x=b.reduce((e,t)=>e+t,0),_=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(y+_>6||x>6)throw l();const w=new MessageChannel,k=[],S=[];for(let e=0;e<v.numberOfInputs;e+=1)k.push(a(f,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),S.push(s(f,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const C=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:r}of g.parameterDescriptors){const s=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==v.parameterData[r]?v.parameterData[r]:void 0===e?0:e});Object.defineProperties(s.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?z:t},minValue:{get:()=>void 0===n?V:n}}),C.push(s)}const N=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+_)}),T=Ge(m,f.sampleRate),j=o(f,T,y+_,Math.max(1,x)),A=s(f,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),E=[];for(let e=0;e<v.numberOfOutputs;e+=1)E.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b[e]}));for(let e=0;e<v.numberOfInputs;e+=1){k[e].connect(S[e]);for(let t=0;t<v.channelCount;t+=1)S[e].connect(N,t,e*v.channelCount+t)}const M=new ge(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map((e,t)=>{let{name:n}=e;const r=C[t];return r.connect(N,0,y+t),r.start(0),[n,r.offset]}));N.connect(j);let P=v.channelInterpretation,D=null;const I=0===v.numberOfOutputs?[j]:E,R={get bufferSize(){return T},get channelCount(){return v.channelCount},set channelCount(e){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return P},set channelInterpretation(e){for(const t of k)t.channelInterpretation=e;P=e},get context(){return j.context},get inputs(){return k},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return D},set onprocessorerror(e){"function"===typeof D&&R.removeEventListener("processorerror",D),D="function"===typeof e?e:null,"function"===typeof D&&R.addEventListener("processorerror",D)},get parameters(){return M},get port(){return w.port2},addEventListener(){return j.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:e.bind(null,I),disconnect:c.bind(null,I),dispatchEvent(){return j.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return j.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},F=new Map;var L,q;w.port1.addEventListener=(L=w.port1.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=F.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{u(f.currentTime,f.sampleRate,()=>e(t))},F.set(e,t[1]))}}return L.call(w.port1,t[0],t[1],t[2])}),w.port1.removeEventListener=(q=w.port1.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e=F.get(t[1]);void 0!==e&&(F.delete(t[1]),t[1]=e)}return q.call(w.port1,t[0],t[1],t[2])});let B=null;Object.defineProperty(w.port1,"onmessage",{get:()=>B,set:e=>{"function"===typeof B&&w.port1.removeEventListener("message",B),B="function"===typeof e?e:null,"function"===typeof B&&(w.port1.addEventListener("message",B),w.port1.start())}}),g.prototype.port=w.port1;let U=null;const W=((e,t,n,r)=>{let s=p.get(e);void 0===s&&(s=new WeakMap,p.set(e,s));const i=He(n,r);return s.set(t,i),i})(f,R,g,v);W.then(e=>U=e);const G=xe(v.numberOfInputs,v.channelCount),H=xe(v.numberOfOutputs,b),Q=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce((e,t)=>{let{name:n}=t;return O(O({},e),{},{[n]:new Float32Array(128)})},{});let Y=!0;const $=()=>{v.numberOfOutputs>0&&j.disconnect(A);for(let e=0,t=0;e<v.numberOfOutputs;e+=1){const n=E[e];for(let r=0;r<b[e];r+=1)A.disconnect(n,t+r,r);t+=b[e]}},X=new Map;j.onaudioprocess=e=>{let{inputBuffer:t,outputBuffer:n}=e;if(null!==U){const e=d(R);for(let s=0;s<T;s+=128){for(let e=0;e<v.numberOfInputs;e+=1)for(let n=0;n<v.channelCount;n+=1)be(t,G[e],n,n,s);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach((e,n)=>{let{name:r}=e;be(t,Q,r,y+n,s)});for(let e=0;e<v.numberOfInputs;e+=1)for(let t=0;t<b[e];t+=1)0===H[e][t].byteLength&&(H[e][t]=new Float32Array(128));try{const t=G.map((t,n)=>{if(e[n].size>0)return X.set(n,T/128),t;const r=X.get(n);return void 0===r?[]:(t.every(e=>e.every(e=>0===e))&&(1===r?X.delete(n):X.set(n,r-1)),t)}),r=u(f.currentTime+s/f.sampleRate,f.sampleRate,()=>U.process(t,H,Q));Y=r;for(let e=0,i=0;e<v.numberOfOutputs;e+=1){for(let t=0;t<b[e];t+=1)ye(n,H[e],t,i+t,s);i+=b[e]}}catch(r){Y=!1,R.dispatchEvent(new ErrorEvent("processorerror",{colno:r.colno,filename:r.filename,lineno:r.lineno,message:r.message}))}if(!Y){for(let e=0;e<v.numberOfInputs;e+=1){k[e].disconnect(S[e]);for(let t=0;t<v.channelCount;t+=1)S[s].disconnect(N,t,e*v.channelCount+t)}if(void 0!==g.parameterDescriptors){const e=g.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=C[t];e.disconnect(N,0,y+t),e.stop()}}N.disconnect(j),j.onaudioprocess=null,Z?$():ee();break}}}};let Z=!1;const K=a(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),J=()=>j.connect(K).connect(f.destination),ee=()=>{j.disconnect(K),K.disconnect()};return J(),h(R,()=>{if(Y){ee(),v.numberOfOutputs>0&&j.connect(A);for(let e=0,t=0;e<v.numberOfOutputs;e+=1){const n=E[e];for(let r=0;r<b[e];r+=1)A.connect(n,t+r,r);t+=b[e]}}Z=!0},()=>{Y&&(J(),$()),Z=!1})})(Tr,R,Oe,xn,Ye,Nn,Je,st,ot,Ar,hr,Mr,bn),Pr=((e,t,n,r,s)=>(i,a,o,l,c,u)=>{if(null!==o)try{const t=new o(i,l,u),r=new Map;let a=null;if(Object.defineProperties(t,{channelCount:{get:()=>u.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>a,set:e=>{"function"===typeof a&&t.removeEventListener("processorerror",a),a="function"===typeof e?e:null,"function"===typeof a&&t.addEventListener("processorerror",a)}}}),t.addEventListener=(h=t.addEventListener,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];if("processorerror"===n[0]){const e="function"===typeof n[1]?n[1]:"object"===typeof n[1]&&null!==n[1]&&"function"===typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==e){const t=r.get(n[1]);void 0!==t?n[1]=t:(n[1]=t=>{"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),e(t)):e(new ErrorEvent(n[0],O({},t)))},r.set(e,n[1]))}}return h.call(t,"error",n[1],n[2]),h.call(t,...n)}),t.removeEventListener=(d=t.removeEventListener,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];if("processorerror"===n[0]){const e=r.get(n[1]);void 0!==e&&(r.delete(n[1]),n[1]=e)}return d.call(t,"error",n[1],n[2]),d.call(t,n[0],n[1],n[2])}),0!==u.numberOfOutputs){const e=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(e).connect(i.destination);return s(t,()=>e.disconnect(),()=>e.connect(i.destination))}return t}catch(f){if(11===f.code)throw r();throw f}var d,h;if(void 0===c)throw r();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(u),t(i,a,c,u)})(Oe,Or,Je,ot,bn),Dr=((e,t,n,r,s,i,a,o,l,c,u,d,h,f,p,m)=>(g,v,b)=>{const y=new WeakMap;let x=null;return{render(_,w){o(w,_);const k=y.get(w);return void 0!==k?Promise.resolve(k):(async(o,_)=>{let w=u(o),k=null;const S=D(w,_),C=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(null===d){const e=C.reduce((e,t)=>e+t,0),n=s(_,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),i=[];for(let t=0;t<o.numberOfOutputs;t+=1)i.push(r(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[t]}));const c=a(_,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});c.connect=t.bind(null,i),c.disconnect=l.bind(null,i),k=[n,i,c]}else S||(w=new d(_,g));if(y.set(_,null===k?w:k[2]),null!==k){if(null===x){if(void 0===b)throw new Error("Missing the processor constructor.");if(null===h)throw new Error("Missing the native OfflineAudioContext constructor.");const e=o.channelCount*o.numberOfInputs,t=void 0===b.parameterDescriptors?0:b.parameterDescriptors.length,n=e+t,l=async()=>{const l=new h(n,128*Math.ceil(o.context.length/128),_.sampleRate),c=[],u=[];for(let e=0;e<v.numberOfInputs;e+=1)c.push(a(l,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),u.push(s(l,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const d=await Promise.all(Array.from(o.parameters.values()).map(async e=>{const t=i(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await f(l,e,t.offset),t})),g=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<v.numberOfInputs;e+=1){c[e].connect(u[e]);for(let t=0;t<v.channelCount;t+=1)u[e].connect(g,t,e*v.channelCount+t)}for(const[t,n]of d.entries())n.connect(g,0,e+t),n.start(0);return g.connect(l.destination),await Promise.all(c.map(e=>p(o,l,e))),m(l)};x=_e(o,0===n?null:await l(),_,v,C,b,c)}const e=await x,t=n(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,u,d]=k;null!==e&&(t.buffer=e,t.start(0)),t.connect(l);for(let n=0,r=0;n<o.numberOfOutputs;n+=1){const e=u[n];for(let t=0;t<C[n];t+=1)l.connect(e,r+t,t);r+=C[n]}return d}if(S)for(const[t,n]of o.parameters.entries())await e(_,n,w.parameters.get(t));else for(const[e,t]of o.parameters.entries())await f(_,t,w.parameters.get(e));return await p(o,_,w),w})(_,w)}}})(on,Tr,ln,xn,Ye,Nn,Je,jr,Ar,hr,ie,Qt,Vt,cn,It,zn),Ir=(e=>t=>e.get(t))(fr),Rr=(e=>(t,n)=>{e.set(t,n)})(Er),Fr=dr?((e,t,n,r,s,i,a,o,l,c,u,d,h,p)=>class extends t{constructor(t,p,m){var g;const v=o(t),b=l(v),y=u(O(O({},ve),m));h(y);const x=f.get(v),_=null===x||void 0===x?void 0:x.get(p),w=b||"closed"!==v.state?v:null!==(g=a(v))&&void 0!==g?g:v,k=s(w,b?null:t.baseLatency,c,p,_,y);super(t,!0,k,b?r(p,y,_):null);const S=[];k.parameters.forEach((e,t)=>{const r=n(this,b,e);S.push([t,r])}),this._nativeAudioWorkletNode=k,this._onprocessorerror=null,this._parameters=new ge(S),b&&e(v,this);const{activeInputs:C}=i(this);d(k,C)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"===typeof e?p(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(Nr,Yt,dn,Dr,Pr,U,Ir,Ft,zt,Qt,e=>O(O({},e),{},{outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),Rr,e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},kt):void 0,Lr=(((e,t,n,r,s)=>{})(Oe,ot,ft,Hn,Ut),((e,t)=>(n,r,s)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,r,s)}catch(i){if("SyntaxError"===i.name)throw e();throw i}})(ot,Vt)),Vr=((e,t,n,r,s,i,a,o)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(r(c)).map(e=>n(e).render(e,c)))).then(()=>s(c)).then(n=>("function"!==typeof n.copyFromChannel?(a(n),F(n)):t(i,()=>i(n))||o(n),e.add(n),n)))(Zt,At,Dt,Cr,zn,I,tn,nn),zr=(((e,t,n,r,s)=>{})(At,Oe,Lr,Hn,Vr),((e,t,n,r,s)=>class extends e{constructor(e,n,s){let i;if("number"===typeof e&&void 0!==n&&void 0!==s)i={length:n,numberOfChannels:e,sampleRate:s};else{if("object"!==typeof e)throw new Error("The given parameters are not valid.");i=e}const{length:a,numberOfChannels:o,sampleRate:l}=O(O({},lt),i),c=r(o,a,l);t(Fe,()=>Fe(c))||c.addEventListener("statechange",(()=>{let e=0;const t=n=>{"running"===this._state&&(e>0?(c.removeEventListener("statechange",t),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):e+=1)};return t})()),super(c,o),this._length=a,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,H(this)}))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout(()=>this._waitForThePromiseToSettle(e))}})(br,At,Oe,Lr,Vr)),qr=((e,t)=>n=>{const r=e.get(n);return t(r)||t(n)})(u,Wt),Br=((e,t)=>n=>e.has(n)||t(n))(o,Gt),Ur=((e,t)=>n=>e.has(n)||t(n))(c,Ht),Wr=((e,t)=>n=>{const r=e.get(n);return t(r)||t(n)})(u,zt);function Gr(e){return void 0===e}function Hr(e){return void 0!==e}function Qr(e){return"number"===typeof e}function Yr(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object}function $r(e){return"boolean"===typeof e}function Xr(e){return Array.isArray(e)}function Zr(e){return"string"===typeof e}function Kr(e){return Zr(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function Jr(e,t){if(!e)throw new Error(t)}function es(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(t<=e&&e<=n))throw new RangeError("Value must be within [".concat(t,", ").concat(n,"], got: ").concat(e))}function ts(e){e.isOffline||"running"===e.state||as('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let ns=!1,rs=!1;function ss(e){ns=e}let is=console;function as(){is.warn(...arguments)}const os="object"===typeof self?self:null,ls=os&&(os.hasOwnProperty("AudioContext")||os.hasOwnProperty("webkitAudioContext"));function cs(e,t,n,r){var s,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function us(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class ds{constructor(e,t,n,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(e){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),"worker"===this._type&&(null===(t=this._worker)||void 0===t||t.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function hs(e){return Ur(e)}function fs(e){return Br(e)}function ps(e){return Wr(e)}function ms(e){return qr(e)}function gs(e,t){return"value"===e||hs(t)||fs(t)||function(e){return e instanceof rn}(t)}function vs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const s=n.shift();if(Yr(e)&&Yr(s))for(const i in s)gs(i,s[i])?e[i]=s[i]:Yr(s[i])?(e[i]||Object.assign(e,{[i]:{}}),vs(e[i],s[i])):Object.assign(e,{[i]:s[i]});return vs(e,...n)}function bs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;const s={},i=Array.from(t);if(Yr(i[0])&&r&&!Reflect.has(i[0],r)){Object.keys(i[0]).some(t=>Reflect.has(e,t))||(vs(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())}if(1===i.length&&Yr(i[0]))vs(s,i[0]);else for(let a=0;a<n.length;a++)Hr(i[a])&&(s[n[a]]=i[a]);return vs(e,s)}function ys(e,t){return Gr(e)?t:e}function xs(e,t){return t.forEach(t=>{Reflect.has(e,t)&&delete e[t]}),e}class _s{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(){if(this.debug||os&&this.toString()===os.TONE_DEBUG_CLASS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];!function(){is.log(...arguments)}(this,...t)}}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}_s.version=r;const ws=1e-6;function ks(e,t){return e>t+ws}function Ss(e,t){return ks(e,t)||Ns(e,t)}function Cs(e,t){return e+ws<t}function Ns(e,t){return Math.abs(e-t)<ws}function Ts(e,t,n){return Math.max(Math.min(e,n),t)}class js extends _s{constructor(){super(),this.name="Timeline",this._timeline=[];const e=bs(js.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Jr(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Jr(Ss(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(e){const t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Ns(this._timeline[t].time,e)){for(let n=t;n>=0&&Ns(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&Ss(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;let n=0;const r=this._timeline.length;let s=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<s;){let r=Math.floor(n+(s-n)/2);const i=this._timeline[r],a=this._timeline[r+1];if(Ns(i[t],e)){for(let n=r;n<this._timeline.length;n++){if(!Ns(this._timeline[n][t],e))break;r=n}return r}if(Cs(i[t],e)&&ks(a[t],e))return r;ks(i[t],e)?s=r:n=r+1}return-1}_iterate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return-1!==n&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),s=this._search(t);return-1!==r&&-1!==s?(this._timeline[r].time!==e&&(r+=1),this._timeline[s].time===t&&(s-=1),this._iterate(n,r,s)):-1===r&&this._iterate(n,0,s),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(-1!==n&&Ns(this._timeline[n].time,e)){let r=n;for(let t=n;t>=0&&Ns(this._timeline[t].time,e);t--)r=t;this._iterate(e=>{t(e)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const As=[];function Es(e){As.push(e)}const Ms=[];function Os(e){Ms.push(e)}class Ps extends _s{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(e=>{Gr(this._events)&&(this._events={}),this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(t)}),this}once(e,t){var n=this;const r=function(){t(...arguments),n.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(e=>{if(Gr(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Gr(t))this._events[e]=[];else{const n=this._events[e];for(let e=n.length-1;e>=0;e--)n[e]===t&&n.splice(e,1)}}),this}emit(e){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0,t=s.length;e<t;e++)s[e].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(Ps.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ds extends Ps{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Is extends Ds{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new js,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=bs(Is.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(e=arguments[0])||void 0===e?void 0:e.latencyHint)||""):(this._context=function(e){return new Sr(e)}({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new ds(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(t=arguments[0])||void 0===t?void 0:t.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var e;return this._initialized||(e=this,As.forEach(t=>t(e)),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){Jr(ms(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(e)}createMediaElementSource(e){Jr(ms(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(e)}createMediaStreamDestination(){Jr(ms(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Jr(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Jr(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Jr(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Jr(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return function(e,t,n){return Jr(Hr(Fr),"AudioWorkletNode only works in a secure context (https or localhost)"),new(e instanceof(null===os||void 0===os?void 0:os.BaseAudioContext)?null===os||void 0===os?void 0:os.AudioWorkletNode:Fr)(e,t,n)}(this.rawContext,e,t)}addAudioWorkletModule(e){return us(this,void 0,void 0,function*(){Jr(Hr(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return us(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ms(this._context)?this._context.resume():Promise.resolve()}close(){return us(this,void 0,void 0,function*(){var e;ms(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(e=this,Ms.forEach(t=>t(e)))})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let s=0;s<n.length;s++)n[s]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,r=()=>{const s=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:s+t})};return r(),n}}function Rs(e,t){Xr(t)?t.forEach(t=>Rs(e,t)):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function Fs(e,t){Xr(t)?t.forEach(t=>Fs(e,t)):Object.defineProperty(e,t,{writable:!0})}const Ls=()=>{};class Vs extends _s{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ls;const e=bs(Vs.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Zr(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ls,onload:Ls,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Us().sampleRate}set(e){return e instanceof Vs?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return us(this,void 0,void 0,function*(){const t=Vs.load(e).then(e=>{this.set(e),this.onload(this)});Vs.downloads.push(t);try{yield t}finally{const e=Vs.downloads.indexOf(t);Vs.downloads.splice(e,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Xr(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,s=Us(),i=s.createBuffer(n,r,s.sampleRate),a=t||1!==n?e:[e];for(let o=0;o<n;o++)i.copyToChannel(a[o],o);return this._buffer=i,this}toMono(e){if(Qr(e))this.fromArray(this.toArray(e));else{let e=new Float32Array(this.length);const t=this.numberOfChannels;for(let n=0;n<t;n++){const t=this.toArray(n);for(let n=0;n<t.length;n++)e[n]+=t[n]}e=e.map(e=>e/t),this.fromArray(e)}return this}toArray(e){if(Qr(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const e=[];for(let t=0;t<this.numberOfChannels;t++)e[t]=this.getChannelData(t);return e}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration;Jr(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);Jr(n<r,"The start time must be less than the end time");const s=r-n,i=Us().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)i.copyToChannel(this.getChannelData(a).subarray(n,r),a);return new Vs(i)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new Vs).fromArray(e)}static fromUrl(e){return us(this,void 0,void 0,function*(){const t=new Vs;return yield t.load(e)})}static load(e){return us(this,void 0,void 0,function*(){const t=""===Vs.baseUrl||Vs.baseUrl.endsWith("/")?Vs.baseUrl:Vs.baseUrl+"/",n=yield fetch(t+e);if(!n.ok)throw new Error("could not load url: ".concat(e));const r=yield n.arrayBuffer();return yield Us().decodeAudioData(r)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return us(this,void 0,void 0,function*(){for(yield Promise.resolve();Vs.downloads.length;)yield Vs.downloads[0]})}}Vs.baseUrl="",Vs.downloads=[];class zs extends Is{constructor(){var e,t,n;super({clockSource:"offline",context:ps(arguments[0])?arguments[0]:(e=arguments[0],t=arguments[1]*arguments[2],n=arguments[2],new zr(e,t,n)),lookAhead:0,updateInterval:ps(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ps(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return us(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(e=>setTimeout(e,1)))}})}render(){return us(this,arguments,void 0,function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){yield e.workletsAreReady(),yield e._renderClock(t);const n=yield e._context.startRendering();return new Vs(n)}()})}close(){return Promise.resolve()}}const qs=new class extends Ds{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return us(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};let Bs=qs;function Us(){return Bs===qs&&ls&&function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&Bs.dispose();Bs=ms(e)?new Is(e):ps(e)?new zs(e):e}(new Is),Bs}if(os&&!os.TONE_SILENCE_LOGGING){let e="v";0;const t=" * Tone.js ".concat(e).concat(r," * ");console.log("%c".concat(t),"background: #000; color: #fff")}function Ws(e){return Math.pow(10,e/20)}function Gs(e){return Math.log(e)/Math.LN10*20}function Hs(e){return Math.pow(2,e/12)}let Qs=440;function Ys(e){return Math.round($s(e))}function $s(e){return 69+12*Math.log2(e/Qs)}function Xs(e){return Qs*Math.pow(2,(e-69)/12)}class Zs extends _s{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),r="."===t?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(t)))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&"0"!==e&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(r+=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Zs&&this.fromType(this._val),Gr(this._val))return this._noArg();if(Zr(this._val)&&Gr(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Yr(this._val)){let e=0;for(const t in this._val)if(Hr(this._val[t])){const n=this._val[t];e+=new this.constructor(this.context,t).valueOf()*n}return e}if(Hr(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}return Zr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Ks extends Zs{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Ks(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf();return r+(Math.round(r/n)*n-r)*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let s=1;s<9;s++){const e=Math.pow(2,s);t.push(e+"n."),t.push(e+"n"),t.push(e+"t")}t.push("0");let n=t[0],r=new Ks(this.context,t[0]).toSeconds();return t.forEach(t=>{const s=new Ks(this.context,t).toSeconds();Math.abs(s-e)<Math.abs(r-e)&&(n=t,r=s)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const s=r.toString();s.length>3&&(r=parseFloat(parseFloat(s).toFixed(3)));return[n,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Ys(this.toFrequency())}_now(){return this.context.now()}}class Js extends Ks{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Qs}static set A4(e){!function(e){Qs=e}(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return"midi"===this.defaultUnits?e:Js.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const n=ei[e.toLowerCase()]+12*(parseInt(t,10)+1);return"midi"===this.defaultUnits?n:Js.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&"0"!==e&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(r*=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new Js(this.context,this.valueOf()*Hs(e))}harmonize(e){return e.map(e=>this.transpose(e))}toMidi(){return Ys(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/Js.A4);let n=Math.round(12*t)+57;const r=Math.floor(n/12);r<0&&(n+=-12*r);return ti[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Xs(e)}static ftom(e){return Ys(e)}}const ei={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},ti=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class ni extends Ks{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ri extends _s{constructor(){super();const e=bs(ri.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Us()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return function(e){Gr(e)&&ns&&!rs&&(rs=!0,as("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}(e),new Ks(this.context,e).toSeconds()}toFrequency(e){return new Js(this.context,e).toFrequency()}toTicks(e){return new ni(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{Gr(e[n])&&delete t[n]}),t}get(){const e=this.constructor.getDefaults();return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];Hr(n)&&Hr(n.value)&&Hr(n.setValueAtTime)?e[t]=n.value:n instanceof ri?e[t]=n._getPartialProperties(e[t]):Xr(n)||Qr(n)||Zr(n)||$r(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Hr(this[t])&&(this[t]&&Hr(this[t].value)&&Hr(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof ri?this[t].set(e[t]):this[t]=e[t])}),this}}class si extends js{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return null!==t?t.state:this._initial}setStateAtTime(e,t,n){return es(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){for(let n=this._search(t);n>=0;n--){const t=this._timeline[n];if(t.state===e)return t}}getNextState(e,t){const n=this._search(t);if(-1!==n)for(let r=n;r<this._timeline.length;r++){const t=this._timeline[r];if(t.state===e)return t}}}class ii extends ri{constructor(){const e=bs(ii.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Jr(Hr(e.param)&&(hs(e.param)||e.param instanceof ii),"param must be an AudioParam");!hs(e.param);)e.param=e.param._param;this._swappable=!!Hr(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new js(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Hr(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ri.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Hr(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Hr(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Hr(this.maxValue)&&Hr(this.minValue)&&es(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Ws(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?Gs(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),r=this._fromType(e);return Jr(isFinite(r)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t);let s=this._initialValue;if(null===r)s=this._initialValue;else if("setTargetAtTime"!==r.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)s=r.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let e=r.value;if("setTargetAtTime"===r.type){const t=this._events.getBefore(r.time);e=null===t?this._initialValue:t.value}s="linearRampToValueAtTime"===n.type?this._linearInterpolate(r.time,e,n.time,n.value,t):this._exponentialInterpolate(r.time,e,n.time,n.value,t)}else s=r.value;else{const e=this._events.getBefore(r.time);let n;n=null===e?this._initialValue:e.value,"setTargetAtTime"===r.type&&(s=this._exponentialApproach(r.time,n,r.value,r.constant,t))}return this._toType(s)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),r=this.toSeconds(t);return Jr(isFinite(n)&&isFinite(r),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=Ns(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(t);return Jr(isFinite(n)&&isFinite(r),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+.9*n),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const r=this._fromType(e);Jr(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const s=this.toSeconds(t);return this._assertRange(r),Jr(isFinite(r)&&isFinite(s),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({constant:n,time:s,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,s,n),this._param.setTargetAtTime(r,s,n),this}setValueCurveAtTime(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),t=this.toSeconds(t);const s=this._fromType(e[0])*r;this.setValueAtTime(this._toType(s),t);const i=n/(e.length-1);for(let a=1;a<e.length;a++){const n=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(n),t+a*i)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Jr(isFinite(t),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(e))),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));Jr(isFinite(t),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(e))),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const r=this._events.get(t),s=this._events.getAfter(t);return r&&Ns(r.time,t)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),"linearRampToValueAtTime"===s.type?this.linearRampToValueAtTime(this._toType(n),t):"exponentialRampToValueAtTime"===s.type&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&"setTargetAtTime"===n.type){const r=this._events.getAfter(n.time),s=r?r.time:t+2,i=(s-t)/10;for(let n=t;n<s;n+=i)e.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,t=>{"cancelScheduledValues"===t.type?e.cancelScheduledValues(t.time):"setTargetAtTime"===t.type?e.setTargetAtTime(t.value,t.time,t.constant):e[t.type](t.value,t.time)}),this}setParam(e){Jr(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,s){return n+(t-n)*Math.exp(-(s-e)/r)}_linearInterpolate(e,t,n,r,s){return t+(s-e)/(n-e)*(r-t)}_exponentialInterpolate(e,t,n,r,s){return t*Math.pow(r/t,(s-e)/(n-e))}}class ai extends ri{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Hr(this.input)?hs(this.input)||this.input instanceof ii?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Hr(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Hr(e)&&(e instanceof ai||fs(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(t=>{t.channelCount=e.channelCount,t.channelCountMode=e.channelCountMode,t.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Jr(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e){return li(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return as("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e){return ci(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}chain(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oi(this,...t),this}fan(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),Hr(this.input)&&(this.input instanceof ai?this.input.dispose():fs(this.input)&&this.input.disconnect()),Hr(this.output)&&(this.output instanceof ai?this.output.dispose():fs(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function oi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.shift();t.reduce((e,t)=>(e instanceof ai?e.connect(t):fs(e)&&li(e,t),t),r)}function li(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(Jr(Hr(e),"Cannot connect from undefined node"),Jr(Hr(t),"Cannot connect to undefined node"),(t instanceof ai||fs(t))&&Jr(t.numberOfInputs>0,"Cannot connect to node with no inputs"),Jr(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof ai||t instanceof ii;)Hr(t.input)&&(t=t.input);for(;e instanceof ai;)Hr(e.output)&&(e=e.output);hs(t)?e.connect(t,n):e.connect(t,n,r)}function ci(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Hr(t))for(;t instanceof ai;)t=t.input;for(;!fs(e);)Hr(e.output)&&(e=e.output);hs(t)?e.disconnect(t,n):fs(t)?e.disconnect(t,n,r):e.disconnect()}class ui extends ai{constructor(){const e=bs(ui.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ii({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Rs(this,"gain")}static getDefaults(){return Object.assign(ai.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class di extends ai{constructor(e){super(e),this.onended=Ls,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ui({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const t=this.toSeconds(e);return-1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ai.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ls})}_startGain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Jr(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Jr(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const e="exponential"===this._curve?2*t:0;this._stopSource(this.now()+e),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ls&&(this.onended(this),this.onended=Ls,!this.context.isOffline)){const e=()=>this.dispose();"undefined"!==typeof requestIdleCallback?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Jr(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ls,this}}class hi extends di{constructor(){const e=bs(hi.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),li(this._source,this._gainNode),this.offset=new ii({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(di.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class fi extends ai{constructor(){const e=bs(fi.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new hi({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ai.getDefaults(),{convert:!0,units:"number",value:0})}connect(e){return pi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function pi(e,t,n,r){(t instanceof ii||hs(t)||t instanceof fi&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof fi&&(t.overridden=!0)),li(e,t,n,r)}class mi extends ii{constructor(){const e=bs(mi.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new js(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ii.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),s=this._events.get(t),i=Math.round(Math.max(1/n,1));for(let a=0;a<=i;a++){const e=n*a+t,i=this._exponentialApproach(s.time,s.value,r,n,e);this.linearRampToValueAtTime(this._toType(i),e)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(n),s=this._events.previousEvent(r),i=this._getTicksUntilEvent(s,n);return r.ticks=Math.max(i,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(n),s=this._events.previousEvent(r),i=this._getTicksUntilEvent(s,n);return r.ticks=Math.max(i,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),r=this._events.get(t),s=Math.round(Math.max(10*(t-r.time),1)),i=(t-r.time)/s;for(let a=0;a<=s;a++){const e=i*a+r.time,s=this._exponentialInterpolate(r.time,r.value,t,n,e);this.linearRampToValueAtTime(this._toType(s),e)}return this}_getTicksUntilEvent(e,t){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Gr(e.ticks)){const t=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(t,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const s=this._events.get(t);return s&&s.time===t&&"setValueAtTime"===s.type&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&"linearRampToValueAtTime"===n.type&&t.value!==n.value){const r=this._fromType(this.getValueAtTime(t.time)),s=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),i=Math.sqrt(Math.pow(r,2)-2*s*(t.ticks-e)),a=(-r+i)/s;return(a>0?a:(-r-i)/s)+t.time}return t?0===t.value?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),r=this.toSeconds(e),s=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-s}_fromType(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class gi extends fi{constructor(){const e=bs(gi.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new mi({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(fi.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class vi extends ri{constructor(){const e=bs(vi.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new si,this._tickOffset=new js,this._ticksAtTime=new js,this._secondsAtTime=new js,this.frequency=new gi({context:this.context,units:e.units,value:e.frequency}),Rs(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ri.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Hr(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const t=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(t)){const e=this._state.get(t);e&&e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),s={state:"paused",time:t};this._state.add(s);let i=r||n,a=r?r.ticks:0,o=null;return this._state.forEachBetween(i.time,t+this.sampleTime,e=>{let t=i.time;const n=this._tickOffset.get(e.time);n&&n.time>=i.time&&(a=n.ticks,t=n.time),"started"===i.state&&"started"!==e.state&&(a+=this.frequency.getTicksAtTime(e.time)-this.frequency.getTicksAtTime(t),e.time!==s.time&&(o={state:e.state,time:e.time,ticks:a})),i=e}),this._state.remove(s),o&&this._ticksAtTime.add(o),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const r=this._secondsAtTime.get(e);let s=r||t,i=r?r.seconds:0,a=null;return this._state.forEachBetween(s.time,e+this.sampleTime,e=>{let t=s.time;const r=this._tickOffset.get(e.time);r&&r.time>=s.time&&(i=r.seconds,t=r.time),"started"===s.state&&"started"!==e.state&&(i+=e.time-t,e.time!==n.time&&(a={state:e.state,time:e.time,seconds:i})),s=e}),this._state.remove(n),a&&this._secondsAtTime.add(a),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();const n=this._tickOffset.get(t),r=this._state.get(t),s=Math.max(n.time,r.time),i=this.frequency.getTicksAtTime(s)+e-n.ticks;return this.frequency.getTimeOfTick(i)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,t=>{r&&"started"===r.state&&"started"!==t.state&&this.forEachTickBetween(Math.max(r.time,e),t.time-this.sampleTime,n),r=t});let s=null;if(r&&"started"===r.state){const a=Math.max(r.time,e),o=this.frequency.getTicksAtTime(a),l=o-this.frequency.getTicksAtTime(r.time);let c=Math.ceil(l)-l;c=Ns(c,1)?0:c;let u=this.frequency.getTimeOfTick(o+c);for(;u<t;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(i){s=i;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class bi extends ri{constructor(){const e=bs(bi.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Ls,this._lastUpdate=0,this._state=new si("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new vi({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Rs(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ri.getDefaults(),{callback:Ls,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){ts(this.context);const n=this.toSeconds(e);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,e=>{switch(e.state){case"started":const t=this._tickSource.getTicksAtTime(e.time);this.emit("start",e.time,t);break;case"stopped":0!==e.time&&this.emit("stop",e.time);break;case"paused":this.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,t,(e,t)=>{this.callback(e,t)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ps.mixin(bi);class yi extends ai{constructor(){const e=bs(yi.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new ui({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Rs(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ai.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class xi extends ai{constructor(){const e=bs(xi.getDefaults(),arguments);super(e),this.name="Destination",this.input=new yi({context:this.context}),this.output=new ui({context:this.context}),this.volume=this.input.volume,oi(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ai.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(){this.input.disconnect();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift(this.input),t.push(this.output),oi(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Es(e=>{e.destination=new xi({context:e})}),Os(e=>{e.destination.dispose()});class _i extends ai{constructor(){super(...arguments),this.name="Listener",this.positionX=new ii({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ii({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ii({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ii({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ii({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ii({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ii({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ii({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ii({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ai.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Es(e=>{e.listener=new _i({context:e})}),Os(e=>{e.listener.dispose()});class wi extends _s{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=bs(wi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ls,onload:Ls,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Jr(this.has(e),"ToneAudioBuffers has no buffer named: ".concat(e)),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every(e=>{let[t,n]=e;return n.loaded})}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ls,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ls;return Zr(t)?(this.baseUrl&&"data:audio/"===t.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(e.toString(),new Vs(this.baseUrl+t,n,r))):this._buffers.set(e.toString(),new Vs(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class ki extends Js{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Ys(super._frequencyToUnits(e))}_ticksToUnits(e){return Ys(super._ticksToUnits(e))}_beatsToUnits(e){return Ys(super._beatsToUnits(e))}_secondsToUnits(e){return Ys(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return Xs(this.toMidi())}transpose(e){return new ki(this.context,this.toMidi()+e)}}class Si extends ni{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Ci extends ri{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new js,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Es(e=>{e.draw=new Ci({context:e})}),Os(e=>{e.draw.dispose()});class Ni extends _s{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Jr(Hr(e.time),"Events must have a time property"),Jr(Hr(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new Ti(e.time,e.time+e.duration,e);for(null===this._root?this._root=t:this._root.insert(t),this._length++;null!==t;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(null!==this._root){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,e=>this.remove(e)),this}_setRoot(e){this._root=e,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(e,t){null!==e.parent?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{let t,n=null;if(e.getBalance()>0)if(null===e.left.right)t=e.left,t.right=e.right,n=t;else{for(t=e.left.right;null!==t.right;)t=t.right;t.parent&&(t.parent.right=t.left,n=t.parent,t.left=e.left,t.right=e.right)}else if(null===e.right.left)t=e.right,t.left=e.left,n=t;else{for(t=e.right.left;null!==t.left;)t=t.left;t.parent&&(t.parent.left=t.right,n=t.parent,t.left=e.left,t.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=t:e.parent.right=t:this._setRoot(t),n&&this._rebalance(n)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),null!==t?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),null!==t?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(null!==this._root){const t=[];if(this._root.search(e,t),t.length>0){let e=t[0];for(let n=1;n<t.length;n++)t[n].low>e.low&&(e=t[n]);return e.event}}return null}forEach(e){if(null!==this._root){const t=[];this._root.traverse(e=>t.push(e)),t.forEach(t=>{t.event&&e(t.event)})}return this}forEachAtTime(e,t){if(null!==this._root){const n=[];this._root.search(e,n),n.forEach(e=>{e.event&&t(e.event)})}return this}forEachFrom(e,t){if(null!==this._root){const n=[];this._root.searchAfter(e,n),n.forEach(e=>{e.event&&t(e.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Ti{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(null!==this.left&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),this.low>e||null!==this.right&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),null!==this.left&&this.left.searchAfter(e,t)),null!==this.right&&this.right.searchAfter(e,t)}traverse(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ji extends _s{constructor(e){super(),this.name="TimelineValue",this._timeline=new js({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Ai extends ai{constructor(){super(bs(Ai.getDefaults(),arguments,["context"]))}connect(e){return pi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}}class Ei extends Ai{constructor(){const e=bs(Ei.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Xr(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):"function"===typeof e.mapping&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(fi.getDefaults(),{length:1024})}setMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=new Float32Array(t);for(let r=0,s=t;r<s;r++){const t=r/(s-1)*2-1;n[r]=e(t,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){Jr(["none","2x","4x"].some(t=>t.includes(e)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Mi extends Ai{constructor(){const e=bs(Mi.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Ei({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ai.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Oi{constructor(e,t){this.id=Oi._eventId++,this._remainderTime=0;const n=Object.assign(Oi.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:Ls,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Oi._eventId=0;class Pi extends Oi{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Pi.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Oi.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Cs(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Si(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Cs(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Si(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);ks(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Di extends ri{constructor(){const e=bs(Di.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new ji(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new js,this._repeatedEvents=new Ni,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new bi({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Rs(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ri.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(2*this._swingTicks)!==0){const n=t%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new Si(this.context,2*this._swingTicks/3).toSeconds()*r}ss(!0),this._timeline.forEachAtTime(t,t=>t.invoke(e)),ss(!1)}schedule(e,t){const n=new Oi(this,{callback:e,time:new ni(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const s=new Pi(this,{callback:e,duration:new Ks(this.context,r).toTicks(),interval:new Ks(this.context,t).toTicks(),time:new ni(this.context,n).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(e,t){const n=new Oi(this,{callback:e,once:!0,time:new ni(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this.toTicks(e);return this._timeline.forEachFrom(t,e=>this.clear(e.id)),this._repeatedEvents.forEachFrom(t,e=>this.clear(e.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Si(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return this.context.resume(),Hr(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Xr(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Ks(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Ks(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Si(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Si(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(t),r=t+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t);this.emit("stop",r),this._clock.setTicksAtTime(e,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),"started"!==this.state)return 0;{const t=this.now(),n=e-this.getTicksAtTime(t)%e;return this._clock.nextTickTime(n,t)}}syncSignal(e,t){const n=this.now();let r=this.bpm,s=1/(60/r.getValueAtTime(n)/this.PPQ),i=[];if("time"===e.units){const e=1/64/s,t=new ui(e),n=new Mi(-1),a=new ui(e);r.chain(t,n,a),r=a,s=1/s,i=[t,n,a]}t||(t=0!==e.getValueAtTime(n)?e.getValueAtTime(n)/s:0);const a=new ui(t);return r.connect(a),a.connect(e._param),i.push(a),this._syncedSignals.push({initial:e.value,nodes:i,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.nodes.forEach(e=>e.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Fs(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ps.mixin(Di),Es(e=>{e.transport=new Di({context:e})}),Os(e=>{e.transport.dispose()});class Ii extends ai{constructor(e){super(e),this.input=void 0,this._state=new si("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ls,this._syncedStop=Ls,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new yi({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Rs(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ai.getDefaults(),{mute:!1,onstop:Ls,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=Gr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),this._synced||"started"!==this._state.getValueAtTime(r))if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const e=this._state.get(r);e&&(e.offset=this.toSeconds(ys(t,0)),e.duration=n?this.toSeconds(n):void 0);const s=this.context.transport.schedule(e=>{this._start(e,t,n)},r);this._scheduled.push(s),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else ts(this.context),this._start(r,t,n);else Jr(ks(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);return this}stop(e){let t=Gr(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),"started"===this._state.getValueAtTime(t)||Hr(this._state.getNextState("started",t))){if(this.log("stop",t),this._synced){const e=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop(t);this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(ks(t,0)){const n=this._state.get(t);if(n&&"started"===n.state&&n.time!==t){const r=t-this.toSeconds(n.time);let s;n.duration&&(s=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,s)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));"started"===this._state.getValueAtTime(t)&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ls,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ri extends di{constructor(){const e=bs(Ri.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,li(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ii({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Vs(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(di.getDefaults(),{url:new Vs,loop:!1,loopEnd:0,loopStart:0,onload:Ls,onerror:Ls,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Jr(this.buffer.loaded,"buffer is either not set or not loaded");const s=this.toSeconds(e);this._startGain(s,r),t=this.loop?ys(t,this.loopStart):ys(t,0);let i=Math.max(this.toSeconds(t),0);if(this.loop){const e=this.toSeconds(this.loopEnd)||this.buffer.duration,t=this.toSeconds(this.loopStart),n=e-t;Ss(i,e)&&(i=(i-t)%n+t),Ns(i,this.buffer.duration)&&(i=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Cs(i,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,i)),Hr(n)){let e=this.toSeconds(n);e=Math.max(e,0),this.stop(s+e)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Fi(e,t){return us(this,void 0,void 0,function*(){const n=t/e.context.sampleRate,r=new zs(1,n,e.context.sampleRate);new e.constructor(Object.assign(e.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0);return(yield r.render()).getChannelData(0)})}class Li extends di{constructor(){const e=bs(Li.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],li(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ii({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ii({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Rs(this,["frequency","detune"])}static getDefaults(){return Object.assign(di.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Vi extends Ii{constructor(){const e=bs(Vi.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new fi({context:this.context,units:"frequency",value:e.frequency}),Rs(this,"frequency"),this.detune=new fi({context:this.context,units:"cents",value:e.detune}),Rs(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ii.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Li({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){return Vi._periodicWaveCache.find(e=>{return e.phase===this._phase&&(t=e.partials,n=this._partials,t.length===n.length&&t.every((e,t)=>n[t]===e));var t,n})}{const e=Vi._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&t)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const t=this._getCachedPeriodicWave();if(Hr(t)){const{partials:e,wave:n}=t;this._wave=n,this._partials=e,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[t,n]=this._getRealImaginary(e,this._phase),r=this.context.createPeriodicWave(t,n);this._wave=r,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Vi._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:t,type:this._type,wave:this._wave}),Vi._periodicWaveCache.length>100&&Vi._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&"custom"!==this._type&&"custom"!==e?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){es(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),"custom"!==this._type)this.type=0===e?t:t+e.toString();else{const t=new Float32Array(e);this._partials.forEach((e,n)=>t[n]=e),this._partials=Array.from(t),this.type=this._type}}_getRealImaginary(e,t){let n=2048;const r=new Float32Array(n),s=new Float32Array(n);let i=1;if("custom"===e){if(i=this._partials.length+1,this._partialCount=this._partials.length,n=i,0===this._partials.length)return[r,s]}else{const t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);t?(i=parseInt(t[2],10)+1,this._partialCount=parseInt(t[2],10),e=t[1],i=Math.max(i,2),n=i):this._partialCount=0,this._partials=[]}for(let a=1;a<n;++a){const n=2/(a*Math.PI);let o;switch(e){case"sine":o=a<=i?1:0,this._partials[a-1]=o;break;case"square":o=1&a?2*n:0,this._partials[a-1]=o;break;case"sawtooth":o=n*(1&a?1:-1),this._partials[a-1]=o;break;case"triangle":o=1&a?n*n*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=o;break;case"custom":o=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==o?(r[a]=-o*Math.sin(t*a),s[a]=o*Math.cos(t*a)):(r[a]=0,s[a]=0)}return[r,s]}_inverseFFT(e,t,n){let r=0;const s=e.length;for(let i=0;i<s;i++)r+=e[i]*Math.cos(i*n)+t[i]*Math.sin(i*n);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const r=2*Math.PI;for(let s=0;s<32;s++)n=Math.max(this._inverseFFT(e,t,s/32*r),n);return Ts(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return us(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Fi(e,t)}()})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Vi._periodicWaveCache=[];class zi extends Ai{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ei({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class qi extends fi{constructor(){const e=bs(qi.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ui({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(fi.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Bi extends Ii{constructor(){const e=bs(Bi.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new zi({context:this.context}),this._modulationNode=new ui({context:this.context}),this._carrier=new Vi({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Vi({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new qi({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Rs(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Vi.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return us(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Fi(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ui extends Ii{constructor(){const e=bs(Ui.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new ui({context:this.context,gain:0}),this._carrier=new Vi({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new fi({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Vi({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new qi({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new qi({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Rs(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Vi.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return us(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Fi(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Wi extends Ii{constructor(){const e=bs(Wi.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new ui({context:this.context,gain:0}),this._thresh=new Ei({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new fi({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Vi({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Rs(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ii.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return us(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Fi(e,t)}()})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Gi extends Ii{constructor(){const e=bs(Gi.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new fi({context:this.context,units:"frequency",value:e.frequency}),this.detune=new fi({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Rs(this,["frequency","detune"])}static getDefaults(){return Object.assign(Vi.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((e,r)=>e.detune.value=t+n*r)}}get count(){return this._oscillators.length}set count(e){if(es(e,1),this._oscillators.length!==e){this._forEach(e=>e.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new Vi({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:0===t?()=>this.onstop(this):Ls});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((e,t)=>e.phase=this._phase+t/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return us(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Fi(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Hi extends Ii{constructor(){const e=bs(Hi.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new qi({context:this.context,value:2}),this._pulse=new Wi({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Vi({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Rs(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ii.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return us(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Fi(e,t)}()})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Qi={am:Bi,fat:Gi,fm:Ui,oscillator:Vi,pulse:Wi,pwm:Hi};class Yi extends Ii{constructor(){const e=bs(Yi.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new fi({context:this.context,units:"frequency",value:e.frequency}),this.detune=new fi({context:this.context,units:"cents",value:e.detune}),Rs(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Vi.getDefaults(),Ui.getDefaults(),Bi.getDefaults(),Gi.getDefaults(),Wi.getDefaults(),Hi.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(e=this._sourceType),e+this._oscillator.type}set type(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Qi[e],n=this.now();if(this._oscillator){const e=this._oscillator;e.stop(n),this.context.setTimeout(()=>e.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(t=this._oscillator.type),"fm"===e?this.type="fm"+t:"am"===e?this.type="am"+t:"fat"===e?this.type="fat"+t:"oscillator"===e?this.type=t:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}_getOscType(e,t){return e instanceof Qi[t]}get baseType(){return this._oscillator.baseType}set baseType(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===e||"pwm"===e||(this._oscillator.baseType=e)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(e){this._getOscType(this._oscillator,"fat")&&Qr(e)&&(this._oscillator.count=e)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(e){this._getOscType(this._oscillator,"fat")&&Qr(e)&&(this._oscillator.spread=e)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Zr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return us(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Fi(e,t)}()})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function $i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){es(r,e,t),n.set(this,r)}})}}function Xi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){es(this.toSeconds(r),e,t),n.set(this,r)}})}}class Zi extends Ii{constructor(){const e=bs(Zi.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Vs({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ii.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ls,onerror:Ls,playbackRate:1,reverse:!1})}load(e){return us(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ls)(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){t=this._loop?ys(t,this._loopStart):ys(t,0);const r=this.toSeconds(t),s=n;n=ys(n,Math.max(this._buffer.duration-r,0));let i=this.toSeconds(n);i/=this._playbackRate,e=this.toSeconds(e);const a=new Ri({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(e+i),this._state.setStateAtTime("stopped",e+i,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Gr(s)?a.start(e,r):a.start(e,r,i-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(e=>e.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){var r;null===(r=[...this._activeSources].pop())||void 0===r||r.stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if("started"===this._state.getValueAtTime(n)){const t=this.toSeconds(e);this._stop(n),this._start(n,t)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&es(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&es(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(e=>e.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}cs([Xi(0)],Zi.prototype,"fadeIn",void 0),cs([Xi(0)],Zi.prototype,"fadeOut",void 0);class Ki extends ai{constructor(){const e=bs(Ki.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new fi({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ai.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Zr(e))return e;{let n;for(n in Ji)if(Ji[n][t]===e)return n;return e}}_setCurve(e,t,n){if(Zr(n)&&Reflect.has(Ji,n)){const r=Ji[n];Yr(r)?"_decayCurve"!==e&&(this[e]=r[t]):this[e]=r}else{if(!Xr(n)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+n);this[e]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",e,t),e=this.toSeconds(e);let n=this.toSeconds(this.attack);const r=this.toSeconds(this.decay),s=this.getValueAtTime(e);if(s>0){n=(1-s)/(1/n)}if(n<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,n,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,n,e);else{this._sig.cancelAndHoldAtTime(e);let r=this._attackCurve;for(let e=1;e<r.length;e++)if(r[e-1]<=s&&s<=r[e]){r=this._attackCurve.slice(e),r[0]=s;break}this._sig.setValueCurveAtTime(r,e,n,t)}if(r&&this.sustain<1){const s=t*this.sustain,i=e+n;this.log("decay",i),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(s,r+i):this._sig.exponentialApproachValueAtTime(s,i,r)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,e):(Jr(Xr(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e){return pi(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}asArray(){return us(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){const n=t/e.context.sampleRate,r=new zs(1,n,e.context.sampleRate),s=e.toSeconds(e.attack)+e.toSeconds(e.decay),i=s+e.toSeconds(e.release),a=.1*i,o=i+a,l=new e.constructor(Object.assign(e.get(),{attack:n*e.toSeconds(e.attack)/o,decay:n*e.toSeconds(e.decay)/o,release:n*e.toSeconds(e.release)/o,context:r}));l._sig.toDestination(),l.triggerAttackRelease(n*(s+a)/o,0);return(yield r.render()).getChannelData(0)}()})}dispose(){return super.dispose(),this._sig.dispose(),this}}cs([Xi(0)],Ki.prototype,"attack",void 0),cs([Xi(0)],Ki.prototype,"decay",void 0),cs([$i(0,1)],Ki.prototype,"sustain",void 0),cs([Xi(0)],Ki.prototype,"release",void 0);const Ji=(()=>{const e=128;let t,n;const r=[];for(t=0;t<e;t++)r[t]=Math.sin(t/127*(Math.PI/2));const s=[];for(t=0;t<127;t++){n=t/127;const e=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;s[t]=e/10+.83*n}s[127]=1;const i=[];for(t=0;t<e;t++)i[t]=Math.ceil(t/127*5)/5;const a=[];for(t=0;t<e;t++)n=t/127,a[t]=.5*(1-Math.cos(Math.PI*n));const o=[];for(t=0;t<e;t++){n=t/127;const e=4*Math.pow(n,3)+.2,r=Math.cos(e*Math.PI*2*n);o[t]=Math.abs(r*(1-n))}function l(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=1-e[n];return t}return{bounce:{In:l(o),Out:o},cosine:{In:r,Out:(c=r,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:s,Out:l(s)},sine:{In:a,Out:l(a)},step:{In:i,Out:l(i)}};var c})();class ea extends ai{constructor(){const e=bs(ea.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new yi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Rs(this,"volume")}static getDefaults(){return Object.assign(ai.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){var n=this;const r=this["_original_"+e]=this[e];this[e]=function(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];const a=s[t],o=n.context.transport.schedule(e=>{s[t]=e,r.apply(n,s)},a);n._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,r){const s=this.toSeconds(n),i=this.toSeconds(t);return this.triggerAttack(e,s,r),this.triggerRelease(s+i),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ta extends ea{constructor(){const e=bs(ta.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ea.getDefaults(),{detune:0,onsilence:Ls,portamento:0})}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",e,t,n);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),r=e instanceof Js?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const e=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,e,n)}else this.frequency.setValueAtTime(r,n);return this}}cs([Xi(0)],ta.prototype,"portamento",void 0);class na extends Ki{constructor(){super(bs(na.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ui({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ra extends ta{constructor(){const e=bs(ra.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Yi(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new na(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Rs(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ta.getDefaults(),{envelope:Object.assign(xs(Ki.getDefaults(),Object.keys(ai.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(xs(Yi.getDefaults(),[...Object.keys(Ii.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+n)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class sa extends ra{constructor(){const e=bs(sa.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Rs(this,["oscillator","envelope"])}static getDefaults(){return vs(ta.getDefaults(),ra.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),r=this.toFrequency(e instanceof Js?e.toFrequency():e),s=r*this.octaves;return this.oscillator.frequency.setValueAtTime(s,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}cs([$i(0)],sa.prototype,"octaves",void 0),cs([Xi(0)],sa.prototype,"pitchDecay",void 0);const ia=new Set;function aa(e){ia.add(e)}function oa(e,t){const n='registerProcessor("'.concat(e,'", ').concat(t,")");ia.add(n)}aa('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');aa("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");aa("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const la="feedback-comb-filter";oa(la,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class ca extends ea{constructor(){const e=bs(ca.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=e=>this.releaseAll(e),Jr(!Qr(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ea.getDefaults(),{maxPolyphony:32,options:{},voice:ra})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(t=>t.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Jr(e instanceof ta,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}as("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,n){e.forEach(e=>{const r=new ki(this.context,e).toMidi(),s=this._getNextAvailableVoice();s&&(s.triggerAttack(e,t,n),this._activeVoices.push({midi:r,voice:s,released:!1}),this.log("triggerAttack",e,t))})}_triggerRelease(e,t){e.forEach(e=>{const n=new ki(this.context,e).toMidi(),r=this._activeVoices.find(e=>{let{midi:t,released:r}=e;return t===n&&!r});r&&(r.voice.triggerRelease(t),r.released=!0,this.log("triggerRelease",e,t))})}_scheduleEvent(e,t,n,r){Jr(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===e?this._triggerAttack(t,n,r):this._triggerRelease(t,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,n,r)},n-this.now())}triggerAttack(e,t,n){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,n),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const n=this.toSeconds(t);return this._scheduleEvent("release",e,n),this}triggerAttackRelease(e,t,n,r){const s=this.toSeconds(n);if(this.triggerAttack(e,s,r),Xr(t)){Jr(Xr(e),"If the duration is an array, the notes must also be an array");for(let n=0;n<e.length;n++){const r=t[Math.min(n,t.length-1)],i=this.toSeconds(r);Jr(i>0,"The duration must be greater than 0"),this.triggerRelease(e[n],s+i)}}else{const n=this.toSeconds(t);Jr(n>0,"The duration must be greater than 0"),this.triggerRelease(e,s+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=xs(e,["onsilence","context"]);return this.options=vs(this.options,t),this._voices.forEach(e=>e.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(e=>{let{voice:n}=e;n.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class ua extends ea{constructor(){const e=bs(ua.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(Jr(Kr(n)||Qr(r)&&isFinite(r),"url key is neither a note or midi pitch: ".concat(n)),Kr(n)){const r=new Js(this.context,n).toMidi();t[r]=e.urls[n]}else Qr(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new wi({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ea.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ls,onerror:Ls,release:.1,urls:{}})}_findClosest(e){let t=0;for(;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw new Error("No available buffers for note: ".concat(e))}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(e=>{const r=$s(new Js(this.context,e).toFrequency()),s=Math.round(r),i=r-s,a=this._findClosest(s),o=s-a,l=this._buffers.get(o),c=Hs(a+i),u=new Ri({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);u.start(t,0,l.duration/c,n),Xr(this._activeSources.get(s))||this._activeSources.set(s,[]),this._activeSources.get(s).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(s)){const e=this._activeSources.get(s),t=e.indexOf(u);-1!==t&&e.splice(t,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(e=>{const n=new Js(this.context,e).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const e=this._activeSources.get(n);t=this.toSeconds(t),e.forEach(e=>{e.stop(t)}),this._activeSources.set(n,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(e=>{for(;e.length;){e.shift().stop(t)}}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=this.toSeconds(n);return this.triggerAttack(e,s,r),Xr(t)?(Jr(Xr(e),"notes must be an array when duration is array"),e.forEach((e,n)=>{const r=t[Math.min(n,t.length-1)];this.triggerRelease(e,s+this.toSeconds(r))})):this.triggerRelease(e,s+this.toSeconds(t)),this}add(e,t,n){if(Jr(Kr(e)||isFinite(e),"note must be a pitch or midi: ".concat(e)),Kr(e)){const r=new Js(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}cs([Xi(0)],ua.prototype,"attack",void 0),cs([Xi(0)],ua.prototype,"release",void 0);class da extends ai{constructor(){const e=bs(da.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ii({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Rs(this,"pan")}static getDefaults(){return Object.assign(ai.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const ha="bit-crusher";oa(ha,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class fa extends ai{constructor(){const e=bs(fa.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new ui({context:this.context}),fa._allSolos.has(this.context)||fa._allSolos.set(this.context,new Set),fa._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ai.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),fa._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){fa._soloed.has(this.context)||fa._soloed.set(this.context,new Set),fa._soloed.get(this.context).add(this)}_removeSolo(){fa._soloed.has(this.context)&&fa._soloed.get(this.context).delete(this)}_isSoloed(){return fa._soloed.has(this.context)&&fa._soloed.get(this.context).has(this)}_noSolos(){return!fa._soloed.has(this.context)||fa._soloed.has(this.context)&&0===fa._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),fa._allSolos.get(this.context).delete(this),this._removeSolo(),this}}fa._allSolos=new Map,fa._soloed=new Map;class pa extends ai{constructor(){const e=bs(pa.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new da({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new yi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Rs(this,["pan","volume"])}static getDefaults(){return Object.assign(ai.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ma extends ai{constructor(){const e=bs(ma.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new fa({solo:e.solo,context:this.context}),this._panVol=this.output=new pa({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Rs(this,["pan","volume"])}static getDefaults(){return Object.assign(ai.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return ma.buses.has(e)||ma.buses.set(e,new ui({context:this.context})),ma.buses.get(e)}send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._getBus(e),r=new ui({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ma.buses=new Map;Us().transport;function ga(){return Us().transport}Us().destination,Us().destination;Us().listener;Us().draw;Us();var va=n(960);const ba=(0,e.createContext)(null),ya=()=>(0,e.useContext)(ba),xa=t=>{let{children:n}=t;const[r,s]=(0,e.useState)(null),[i,a]=(0,e.useState)(!1),[o,l]=(0,e.useState)(()=>{try{const e=localStorage.getItem("practiceLog");return e?JSON.parse(e):[]}catch(e){return[]}});(0,e.useEffect)(()=>{localStorage.setItem("practiceLog",JSON.stringify(o))},[o]);const c=(0,e.useCallback)(e=>{l(t=>[...t,e])},[]),u=(0,e.useCallback)(()=>{window.confirm("Are you sure you want to clear the entire practice log? This action cannot be undone.")&&l([])},[]),d=(0,e.useCallback)(e=>{if(!e)return;if(!window.confirm("Are you sure you want to import a new log? This will overwrite your current practice log."))return;const t=new FileReader;t.onload=e=>{try{const t=JSON.parse(e.target.result);if(Array.isArray(t)){if(t.length>0&&(void 0===t[0].game||void 0===t[0].date||void 0===t[0].remarks))return void alert("Import failed: The JSON file appears to have an invalid format.");l(t),alert("Practice log imported successfully!")}else alert("Import failed: The JSON file does not contain a valid log array.")}catch(t){console.error("Failed to parse log file:",t),alert("Import failed: The selected file is not a valid JSON file.")}},t.readAsText(e)},[]),h=(0,e.useCallback)(async()=>{if(!i)try{await Bs.resume(),a(!0),console.log("Audio Context unlocked and running.")}catch(e){console.error("Could not start Audio Context",e)}},[i]),[f,p]=(0,e.useState)(120),[m,g]=(0,e.useState)(!1),[v,b]=(0,e.useState)(-10),[y,x]=(0,e.useState)(!1),[_,w]=(0,e.useState)(4),[k,S]=(0,e.useState)("every"),[C,N]=(0,e.useState)(!1),T=(0,e.useRef)(null),j=(0,e.useRef)([]),A=(0,e.useRef)({id:null,phase:"main",phaseBeat:0}),E=(0,e.useRef)(null),[M,O]=(0,e.useState)("C"),[P,D]=(0,e.useState)(!1),[I,R]=(0,e.useState)(-10),[F,L]=(0,e.useState)(!1),V=(0,e.useRef)({}),[z,q]=(0,e.useState)(600),[B,U]=(0,e.useState)(z),[W,G]=(0,e.useState)(!1),H=(0,e.useRef)(null),Q=(0,e.useRef)(null),[Y,$]=(0,e.useState)(0),[X,Z]=(0,e.useState)(!1),[K,J]=(0,e.useState)([]),ee=(0,e.useRef)(null),te=(0,e.useRef)(null);(0,e.useEffect)(()=>{let e=0;const t=["c","cs","d","ds","e","f","fs","g","gs","a","as","b"],n=t.length;T.current=new Zi({url:"".concat("/musical-tools-app","/sounds/click.wav"),fadeOut:.1,onload:()=>x(!0)}).toDestination(),Q.current=new Zi({url:"".concat("/musical-tools-app","/sounds/ding.wav"),fadeOut:.1}).toDestination();let r=0;const s=["1.wav","2.wav","3.wav","4.wav","5.wav","6.wav","7.wav"],i=s.length;j.current=s.map(e=>new Zi({url:"".concat("/musical-tools-app","/sounds/").concat(e),onload:()=>{r++,r===i&&N(!0)}}).toDestination()),te.current=new ca(ra,{oscillator:{type:"sine"},envelope:{attack:.02,decay:.1,sustain:.3,release:1}}).toDestination(),te.current.volume.value=5;const a={};return t.forEach(t=>{a[t.toUpperCase().replace("S","#")]=new Zi({url:"".concat("/musical-tools-app","/sounds/").concat(t,"_drone.mp3"),loop:!0,fadeOut:3,fadeIn:3,onload:()=>{e++,e===n&&L(!0)}}).toDestination()}),V.current=a,()=>{var e,t,n;null===(e=T.current)||void 0===e||e.dispose(),null===(t=Q.current)||void 0===t||t.dispose(),j.current.forEach(e=>e.dispose()),Object.values(V.current).forEach(e=>e.dispose()),null===(n=te.current)||void 0===n||n.dispose()}},[]),(0,e.useEffect)(()=>{y&&(T.current.volume.value=v)},[v,y]),(0,e.useEffect)(()=>{C&&j.current.forEach(e=>{e.volume.value=v})},[v,C]),(0,e.useEffect)(()=>{F&&Object.values(V.current).forEach(e=>e.volume.value=I)},[I,F]);const ne=(0,e.useCallback)(()=>{if(!y)return;const e=ga();e.bpm.value=f,A.current.id&&e.clear(A.current.id);const t=E.current,n=t&&t.callback;n&&t.callback();const r=n&&_>0&&("every"===k||"first"===k);A.current.phase=r?"countdown":"main",A.current.phaseBeat=0,A.current.id=e.scheduleRepeat(e=>{const t=E.current;if(!t||!t.callback||t.interval<=0)T.current.start(e);else if("countdown"===A.current.phase){var n;const t=A.current.phaseBeat;t<j.current.length&&null!==(n=j.current[t])&&void 0!==n&&n.loaded?j.current[t].start(e):T.current.start(e),t>=_-1?(A.current.phase="main",A.current.phaseBeat=0):A.current.phaseBeat++}else{const n=A.current.phaseBeat;T.current.start(e),n>=t.interval-1?(t.callback(),A.current.phase=_>0&&"every"===k?"countdown":"main",A.current.phaseBeat=0):A.current.phaseBeat++}},"4n"),e.start(),g(!0)},[f,y,_,k]),re=(0,e.useCallback)(()=>{const e=ga();e.pause(),e.cancel(),A.current.id=null,g(!1)},[]),se=(0,e.useCallback)(e=>{E.current=e;"started"===ga().state&&(re(),setTimeout(()=>{ne()},50))},[re,ne]),ie=(0,e.useCallback)(async()=>{await h(),m?re():ne()},[m,re,ne,h]);(0,e.useEffect)(()=>{m&&(ga().bpm.value=f)},[f,m]);const ae=(0,e.useCallback)(async()=>{await h(),F&&D(e=>!e)},[F,h]);(0,e.useEffect)(()=>{const e=V.current[M];if(P){if(!e||!e.loaded)return;Object.values(V.current).forEach(t=>{t!==e&&"started"===t.state&&t.stop()}),"started"!==e.state&&e.start()}else Object.values(V.current).forEach(e=>{"started"===e.state&&e.stop()})},[M,P,F]),(0,e.useEffect)(()=>(W?H.current=setInterval(()=>{U(e=>e<=1?(clearInterval(H.current),G(!1),Q.current.loaded&&Q.current.start(),0):e-1)},1e3):clearInterval(H.current),()=>clearInterval(H.current)),[W]),(0,e.useEffect)(()=>(X?ee.current=setInterval(()=>{$(e=>e+10)},10):clearInterval(ee.current),()=>clearInterval(ee.current)),[X]);const oe=(0,e.useCallback)(async()=>{await h(),B>0&&G(e=>!e)},[B,h]),le=(0,e.useCallback)(async e=>{if(!e||e.length<2)return;await h();const t=Us().now();te.current.triggerAttackRelease(e[0],"8n",t),te.current.triggerAttackRelease(e[1],"8n",t+.5),te.current.triggerAttackRelease(e,"4n",t+1.2)},[h]),ce={unlockAudio:h,activeTool:r,toggleActiveTool:e=>{s(t=>t===e?null:e)},bpm:f,setBpm:p,isMetronomePlaying:m,toggleMetronome:ie,metronomeVolume:v,setMetronomeVolume:b,isMetronomeReady:y,setMetronomeSchedule:se,countdownClicks:_,setCountdownClicks:w,countdownMode:k,setCountdownMode:S,droneNote:M,setDroneNote:O,isDronePlaying:P,toggleDrone:ae,droneVolume:I,setDroneVolume:R,areDronesReady:F,timeLeft:B,isTimerRunning:W,toggleTimer:oe,resetTimer:e=>{const t=60*(e||z/60);G(!1),q(t),U(t)},timerDuration:z,stopwatchTime:Y,isStopwatchRunning:X,laps:K,toggleStopwatch:()=>Z(e=>!e),resetStopwatch:()=>{Z(!1),$(0),J([])},addLap:()=>J(e=>[...e,Y]),practiceLog:o,addLogEntry:c,clearLog:u,importLog:d,playInterval:le};return(0,va.jsx)(ba.Provider,{value:ce,children:n})},_a=e=>{let{title:t}=e;return(0,va.jsx)("h2",{className:"text-2xl font-bold text-teal-300 mb-4 p-2 bg-slate-700 rounded-lg shadow-sm text-center",children:t})},wa=()=>(0,va.jsxs)("div",{className:"flex flex-col items-center text-center max-w-4xl mx-auto",children:[(0,va.jsx)("h2",{className:"text-4xl font-extrabold text-teal-400 mb-4",children:"Welcome to Musical Practice Tools"}),(0,va.jsx)("p",{className:"text-xl text-gray-300 mb-12",children:"Your all-in-one companion for honing your musical skills."}),(0,va.jsxs)("div",{className:"w-full text-left space-y-12",children:[(0,va.jsxs)("div",{children:[(0,va.jsx)(_a,{title:"Practice Modules"}),(0,va.jsx)("p",{className:"text-center text-lg text-gray-300 mt-4 mb-6",children:"Use the navigation bar at the top of the page to dive into a practice module from one of our three categories."}),(0,va.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,va.jsxs)("div",{className:"bg-slate-800/70 p-4 rounded-lg border border-slate-700",children:[(0,va.jsx)("h4",{className:"font-bold text-xl text-indigo-300 mb-3",children:"Generators"}),(0,va.jsx)("p",{className:"text-gray-300",children:"This category contains tools to spark creativity and provide random exercises. Use them to generate new chord progressions, random notes for sight-reading, or custom fretboard diagrams."})]}),(0,va.jsxs)("div",{className:"bg-slate-800/70 p-4 rounded-lg border border-slate-700",children:[(0,va.jsx)("h4",{className:"font-bold text-xl text-indigo-300 mb-3",children:"Music Theory"}),(0,va.jsx)("p",{className:"text-gray-300",children:"Test and improve your core theoretical knowledge with these quizzes. Modules cover identifying chords, naming intervals, and calculating notes within a key."})]}),(0,va.jsxs)("div",{className:"bg-slate-800/70 p-4 rounded-lg border border-slate-700",children:[(0,va.jsx)("h4",{className:"font-bold text-xl text-indigo-300 mb-3",children:"Practical Exercises"}),(0,va.jsx)("p",{className:"text-gray-300",children:"Apply your knowledge directly to an instrument. This category focuses on practical application, like identifying interval shapes on the guitar fretboard."})]})]})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)(_a,{title:"Your Practice Toolkit"}),(0,va.jsxs)("div",{className:"bg-slate-700/50 p-6 rounded-lg mt-6 space-y-4",children:[(0,va.jsxs)("p",{className:"text-lg text-gray-300",children:["The toolbar on the side of the screen gives you instant access to essential utilities for any practice session: a ",(0,va.jsx)("strong",{className:"text-teal-300",children:"Metronome"}),", a ",(0,va.jsx)("strong",{className:"text-teal-300",children:"Drone"})," for intonation, a ",(0,va.jsx)("strong",{className:"text-teal-300",children:"Timer"}),", and a ",(0,va.jsx)("strong",{className:"text-teal-300",children:"Stopwatch"}),"."]}),(0,va.jsxs)("p",{className:"text-lg text-gray-300",children:["Don't forget to track your progress! Every module includes a ",(0,va.jsx)("strong",{className:"text-teal-300",children:'"Log Session"'})," button. This saves a record of your work to the ",(0,va.jsx)("strong",{className:"text-teal-300",children:"Practice Log"}),", which is also accessible from the sidebar."]}),(0,va.jsxs)("div",{className:"bg-slate-800/70 p-4 rounded-lg border border-slate-600",children:[(0,va.jsx)("p",{className:"text-lg font-bold text-amber-300",children:"A Note for iPhone & iPad Users:"}),(0,va.jsx)("p",{className:"text-md text-gray-300 mt-1",children:"To hear audio from the Metronome or Drone, please ensure your device's physical Ring/Silent switch is not in silent mode (the switch should not be showing orange)."})]})]})]})]})]}),ka=e=>{let{isOpen:t,onClose:n,title:r,children:s}=e;return t?(0,va.jsx)("div",{className:"fixed inset-0 bg-black/60 flex justify-center items-center z-50 transition-opacity duration-300",onClick:n,children:(0,va.jsxs)("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-2xl max-w-lg w-11/12 shadow-2xl animate-pulse-once",onClick:e=>e.stopPropagation(),children:[(0,va.jsx)("h3",{className:"text-2xl font-bold text-indigo-300 mb-4",children:r}),(0,va.jsx)("div",{className:"text-left text-gray-300 space-y-3",children:s}),(0,va.jsx)("button",{onClick:n,className:"w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:"Got it!"})]})}):null},Sa=e=>{let{onClick:t}=e;return(0,va.jsx)("button",{onClick:t,className:"p-1 rounded-full text-gray-400 hover:bg-slate-700 transition-colors","aria-label":"Show help",children:(0,va.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,va.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})},Ca=["C","D","E","F","G","A","B"],Na=[{id:"bb",display:"\u266d\u266d"},{id:"b",display:"\u266d"},{id:"natural",display:""},{id:"#",display:"\u266f"},{id:"##",display:"\u266f\u266f"}],Ta=e=>{let{title:t,isOpen:n,onToggle:r,children:s}=e;return(0,va.jsxs)("div",{className:"border-t border-slate-600/80 pt-3 mt-3",children:[(0,va.jsxs)("button",{onClick:r,className:"w-full flex justify-between items-center text-left text-lg font-bold text-teal-300 hover:text-teal-200",children:[(0,va.jsx)("span",{children:t}),(0,va.jsx)("span",{className:"text-xl",children:n?"\u2212":"+"})]}),n&&(0,va.jsx)("div",{className:"pt-4 space-y-4",children:s})]})},ja=()=>{const{bpm:t,addLogEntry:n}=ya(),[r,s]=(0,e.useState)({message:"",type:""}),[i,a]=(0,e.useState)(0),[o,l]=(0,e.useState)(0),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)({noteLetter:"",accidental:null}),[m,g]=(0,e.useState)("chromatic"),[v,b]=(0,e.useState)(!0),[y,x]=(0,e.useState)(!1),[_,w]=(0,e.useState)(!1),[k,S]=(0,e.useState)("above"),C=(0,e.useRef)(null),N=(0,e.useRef)(null),T=e.useMemo(()=>({"2nd":[{name:"Minor 2nd",quality:"Minor",semitones:1},{name:"Major 2nd",quality:"Major",semitones:2}],"3rd":[{name:"Minor 3rd",quality:"Minor",semitones:3},{name:"Major 3rd",quality:"Major",semitones:4}],"4th":[{name:"Perfect 4th",quality:"Perfect",semitones:5},{name:"Augmented 4th (Tritone)",quality:"Augmented",semitones:6}],"5th":[{name:"Diminished 5th (Tritone)",quality:"Diminished",semitones:6},{name:"Perfect 5th",quality:"Perfect",semitones:7}],"6th":[{name:"Minor 6th",quality:"Minor",semitones:8},{name:"Major 6th",quality:"Major",semitones:9}],"7th":[{name:"Minor 7th",quality:"Minor",semitones:10},{name:"Major 7th",quality:"Major",semitones:11}],"Unison/Octave":[{name:"Perfect Unison",quality:"Perfect",semitones:0},{name:"Perfect Octave",quality:"Perfect",semitones:12}]}),[]),j=e.useMemo(()=>Object.values(T).flat().map(e=>e.name),[T]),[A,E]=(0,e.useState)(()=>{const e={};return j.forEach(t=>{e[t]=!0}),e}),M=(0,e.useCallback)(()=>{clearTimeout(N.current);const e=["C","D","E","F","G","A","B"],t=["C","G","D","A","E","B","F#","F","Bb","Eb","Ab","Db","Gb"],n={C:0,D:2,E:4,F:5,G:7,A:9,B:11},r=["C","D","E","F","G","A","B"],i=Object.values(T).flat().filter(e=>A[e.name]);if(0===i.length)return void h({rootNote:"N/A",intervalName:"No intervals selected",correctAnswer:"",direction:"above"});let a;do{var o;const s="natural"===m?e:t,l=s[Math.floor(Math.random()*s.length)],c=i[Math.floor(Math.random()*i.length)],u="both"===k?Math.random()<.5?"above":"below":k,d=l.charAt(0),h=l.substring(1);let f=0;h.includes("#")&&(f=h.length),h.includes("b")&&(f=-h.length);const p=parseInt((null===(o=c.name.match(/\d+/))||void 0===o?void 0:o[0])||(c.name.includes("Unison")?1:8),10),g=r.indexOf(d),v=n[d]+f;let b,y;"above"===u?(b=(g+p-1)%7,y=v+c.semitones):(b=(g-(p-1)+7)%7,y=v-c.semitones);const x=r[b];let _=n[x];"above"===u&&(b<g||8===p)?_+=12:"below"===u&&(b>g||8===p)&&(_-=12);const w=y-_;let S="";1===w?S="#":2===w?S="##":-1===w?S="b":-2===w&&(S="bb");const C=x+S;a={rootNote:l,intervalName:c.name,correctAnswer:C,direction:u}}while(C.current&&JSON.stringify(a)===JSON.stringify(C.current));C.current=a,h(a),s({message:"",type:""}),p({noteLetter:"",accidental:null}),u(!1),l(e=>e+1)},[A,T,m,k]);(0,e.useEffect)(()=>{a(0),l(0),M()},[]),(0,e.useEffect)(()=>{M()},[M]);const P=(0,e.useCallback)(()=>{if(c||!d)return;const e=e=>e.trim().toUpperCase().replace(/SHARP/g,"#").replace(/FLAT/g,"B");e("".concat(f.noteLetter).concat(f.accidental))===e(d.correctAnswer)?(s({message:"Correct!",type:"correct"}),a(e=>e+1)):s({message:"Incorrect. The answer was ".concat(d.correctAnswer,"."),type:"incorrect"}),u(!0),v&&(N.current=setTimeout(M,1500))},[c,f,d,v,M]),D=(e,t)=>{c||p(n=>O(O({},n),{},{[e]:t}))};(0,e.useEffect)(()=>{v&&f.noteLetter&&null!==f.accidental&&P()},[f,v,P]),(0,e.useEffect)(()=>{const e=e=>{"Enter"===e.key&&(c&&!v?M():!c&&f.noteLetter&&null!==f.accidental&&P())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c,P,M,v,f]);const I=e=>{const t=O({},A);Object.values(T).flat().forEach(n=>{n.quality===e&&(t[n.name]=!t[n.name])}),E(t)},R=e=>{const t={};j.forEach(n=>{t[n]=e}),E(t)},F="bg-indigo-600 text-white",L="bg-teal-600 hover:bg-teal-500",V=(0,va.jsxs)("div",{className:"space-y-6",children:[(0,va.jsx)(Ta,{title:"Quiz Options",isOpen:!0,children:(0,va.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,va.jsxs)("div",{className:"flex items-center gap-4",children:[(0,va.jsx)("span",{className:"font-semibold text-lg",children:"Root Notes:"}),(0,va.jsxs)("div",{className:"flex gap-4",children:[(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-lg",children:[(0,va.jsx)("input",{type:"radio",name:"rootType",value:"natural",checked:"natural"===m,onChange:()=>g("natural")}),"Natural"]}),(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-lg",children:[(0,va.jsx)("input",{type:"radio",name:"rootType",value:"chromatic",checked:"chromatic"===m,onChange:()=>g("chromatic")}),"Chromatic"]})]})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("span",{className:"font-semibold text-lg",children:"Direction:"}),(0,va.jsxs)("div",{className:"flex bg-slate-600 rounded-md p-1 mt-2",children:[(0,va.jsx)("button",{onClick:()=>S("above"),className:"flex-1 rounded-md text-sm py-1 ".concat("above"===k?"bg-blue-600 text-white":"text-gray-300"),children:"Above"}),(0,va.jsx)("button",{onClick:()=>S("below"),className:"flex-1 rounded-md text-sm py-1 ".concat("below"===k?"bg-blue-600 text-white":"text-gray-300"),children:"Below"}),(0,va.jsx)("button",{onClick:()=>S("both"),className:"flex-1 rounded-md text-sm py-1 ".concat("both"===k?"bg-blue-600 text-white":"text-gray-300"),children:"Both"})]})]})]})}),(0,va.jsxs)(Ta,{title:"Interval Selection",isOpen:!0,children:[(0,va.jsxs)("div",{className:"flex flex-wrap justify-start gap-2 mb-4",children:[(0,va.jsx)("h4",{className:"text-lg font-semibold text-blue-200 w-full",children:"Quick Select"}),(0,va.jsx)("button",{onClick:()=>I("Major"),className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-1 px-3 text-sm rounded-lg",children:"Toggle Major"}),(0,va.jsx)("button",{onClick:()=>I("Minor"),className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-1 px-3 text-sm rounded-lg",children:"Toggle Minor"}),(0,va.jsx)("button",{onClick:()=>I("Perfect"),className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-1 px-3 text-sm rounded-lg",children:"Toggle Perfect"}),(0,va.jsx)("button",{onClick:()=>R(!0),className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-3 text-sm rounded-lg",children:"Select All"}),(0,va.jsx)("button",{onClick:()=>R(!1),className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-3 text-sm rounded-lg",children:"Deselect All"})]}),(0,va.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:Object.entries(T).map(e=>{let[t,n]=e;return(0,va.jsxs)("div",{className:"break-inside-avoid",children:[(0,va.jsxs)("h5",{className:"font-bold text-base text-teal-300 mb-2 border-b border-slate-600 pb-1",children:[t,"s"]}),(0,va.jsx)("div",{className:"flex flex-col gap-3",children:n.map(e=>(0,va.jsxs)("label",{className:"flex items-center justify-between text-gray-200 cursor-pointer",children:[(0,va.jsx)("span",{className:"text-sm",children:e.name.replace(" (Tritone)","")}),(0,va.jsxs)("div",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",checked:!!A[e.name],onChange:()=>{return t=e.name,E(e=>O(O({},e),{},{[t]:!e[t]}));var t},className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},e.name))})]},t)})})]})]});return(0,va.jsxs)("div",{className:"flex flex-col md:flex-row items-start w-full gap-4",children:[(0,va.jsx)(ka,{isOpen:_,onClose:()=>w(!1),title:"Interval Practice Quiz Guide",children:(0,va.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,va.jsx)("p",{children:"This quiz helps you practice calculating intervals from a given root note."}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"How To Play"}),(0,va.jsx)("p",{children:'A root note and an interval will be displayed (e.g., "C" and "Major 3rd above"). Use the buttons to select the note letter and its accidental, then press Enter to check your answer. The empty button in the accidental section represents a natural note.'})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"Settings"}),(0,va.jsx)("p",{children:'Click the "Controls" button to open the settings panel. Here you can choose which intervals to include, whether to use natural-only or all chromatic root notes, and the direction of the interval (above or below the root note).'})]})]})}),(0,va.jsxs)("div",{className:"w-full flex-1 bg-slate-800 p-4 md:p-8 rounded-lg",children:[(0,va.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,va.jsxs)("div",{className:"flex items-center gap-3",children:[(0,va.jsx)("h1",{className:"text-2xl md:text-3xl font-extrabold text-indigo-300",children:"Interval Practice"}),(0,va.jsx)(Sa,{onClick:()=>w(!0)})]}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("button",{onClick:()=>{const e=prompt("Enter any remarks for this session:","Score: ".concat(i,"/").concat(o));null!==e&&(n({game:"Interval Practice",bpm:t,date:(new Date).toLocaleDateString(),remarks:e||"No remarks."}),alert("Session logged!"))},className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded-lg text-sm",children:"Log Session"}),(0,va.jsx)("button",{onClick:()=>x(e=>!e),className:"p-2 rounded-md bg-slate-700 hover:bg-slate-600 text-sm font-semibold",children:"Controls"})]})]}),(0,va.jsxs)("div",{className:"flex justify-between items-center mb-4 text-lg",children:[(0,va.jsxs)("span",{className:"font-semibold text-gray-300",children:["Score: ",i," / ",o]}),(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer font-semibold",children:[(0,va.jsx)("span",{className:"text-gray-300",children:"Auto-Advance"}),(0,va.jsxs)("div",{className:"relative",children:[(0,va.jsx)("input",{type:"checkbox",id:"auto-advance-quiz",checked:v,onChange:()=>b(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),(0,va.jsxs)("div",{className:"text-center w-full max-w-md mx-auto mt-6",children:[d&&(0,va.jsxs)(va.Fragment,{children:[(0,va.jsx)("div",{className:"text-5xl font-bold text-teal-300 mb-4",children:d.rootNote}),(0,va.jsxs)("div",{className:"text-2xl font-semibold text-gray-400 mb-6",children:["What is the ",d.intervalName," ",d.direction,"?"]})]}),(0,va.jsxs)("div",{className:"space-y-4",children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Note"}),(0,va.jsx)("div",{className:"grid grid-cols-7 gap-1",children:Ca.map(e=>(0,va.jsx)("button",{onClick:()=>D("noteLetter",e),disabled:c,className:"py-3 rounded font-semibold ".concat(f.noteLetter===e?F:L),children:e},e))})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Accidental"}),(0,va.jsx)("div",{className:"grid grid-cols-5 gap-1",children:Na.map(e=>(0,va.jsx)("button",{onClick:()=>D("accidental","natural"===e.id?"":e.id),disabled:c,className:"py-3 rounded font-semibold text-xl ".concat(f.accidental===("natural"===e.id?"":e.id)?F:L),children:e.display},e.id))})]})]}),(0,va.jsx)("div",{className:"text-lg font-bold my-4 min-h-[28px] ".concat("correct"===r.type?"text-green-400":"text-red-400"),children:r.message||(0,va.jsx)(va.Fragment,{children:"\xa0"})}),(0,va.jsx)("div",{className:"h-14 mt-4 flex justify-center items-center",children:v?null:c?(0,va.jsx)("button",{onClick:M,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-lg animate-pulse",children:"Next Question"}):(0,va.jsx)("button",{onClick:P,disabled:""===f.noteLetter||null===f.accidental,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg disabled:bg-gray-500",children:"Submit"})})]})]}),(0,va.jsx)("div",{className:"hidden md:block bg-slate-700 rounded-lg transition-all duration-300 ease-in-out ".concat(y?"w-96 p-4":"w-0 p-0 overflow-hidden"),children:(0,va.jsxs)("div",{className:"".concat(!y&&"hidden"),children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300 mb-4",children:"Settings & Controls"}),V]})}),y&&(0,va.jsx)("div",{className:"md:hidden fixed inset-0 z-50 flex justify-center items-center bg-black/60",onClick:()=>x(!1),children:(0,va.jsxs)("div",{className:"w-11/12 max-w-sm bg-slate-800 rounded-2xl p-4 max-h-[85vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,va.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center mb-4",children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300",children:"Settings & Controls"}),(0,va.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-white text-2xl font-bold",children:"\xd7"})]}),(0,va.jsx)("div",{className:"flex-grow overflow-y-auto pr-2",children:V})]})})]})},Aa=()=>{const{bpm:t,addLogEntry:n}=ya(),[r,s]=(0,e.useState)(0),[i,a]=(0,e.useState)(0),[o,l]=(0,e.useState)("C"),[c,u]=(0,e.useState)("E"),[d,h]=(0,e.useState)({message:"",type:""}),[f,p]=(0,e.useState)(null),[m,g]=(0,e.useState)(!1),[v,b]=(0,e.useState)({quality:null,number:null}),[y,x]=(0,e.useState)(!0),[_,w]=(0,e.useState)(!1),k=(0,e.useRef)(null),S=(0,e.useRef)(null),C=e.useMemo(()=>({qualities:["Diminished","Minor","Perfect","Major","Augmented"],numericButtons:["Unison / Octave","2nd","3rd","4th","5th","6th","7th"],intervals:[{name:"Perfect Unison",semitones:0,quality:"Perfect",number:"Unison"},{name:"Minor 2nd",semitones:1,quality:"Minor",number:"2nd"},{name:"Major 2nd",semitones:2,quality:"Major",number:"2nd"},{name:"Minor 3rd",semitones:3,quality:"Minor",number:"3rd"},{name:"Major 3rd",semitones:4,quality:"Major",number:"3rd"},{name:"Perfect 4th",semitones:5,quality:"Perfect",number:"4th"},{name:"Augmented 4th",semitones:6,quality:"Augmented",number:"4th"},{name:"Diminished 5th",semitones:6,quality:"Diminished",number:"5th"},{name:"Perfect 5th",semitones:7,quality:"Perfect",number:"5th"},{name:"Minor 6th",semitones:8,quality:"Minor",number:"6th"},{name:"Major 6th",semitones:9,quality:"Major",number:"6th"},{name:"Minor 7th",semitones:10,quality:"Minor",number:"7th"},{name:"Major 7th",semitones:11,quality:"Major",number:"7th"},{name:"Perfect Octave",semitones:12,quality:"Perfect",number:"Octave"}],naturalNoteAlphabeticalIndex:{C:0,D:1,E:2,F:3,G:4,A:5,B:6},alphabeticalIndexToNaturalNote:["C","D","E","F","G","A","B"],naturalNoteSemitoneOffsetFromC:{C:0,D:2,E:4,F:5,G:7,A:9,B:11}}),[]),N=(0,e.useCallback)(()=>{let e,t,n;for(clearTimeout(S.current);;){var r;n=C.intervals[Math.floor(Math.random()*C.intervals.length)];const{naturalNoteAlphabeticalIndex:s,alphabeticalIndexToNaturalNote:i,naturalNoteSemitoneOffsetFromC:a}=C,o=i[Math.floor(7*Math.random())],l=Math.floor(3*Math.random())-1;let c="";1===l&&(c="#"),-1===l&&(c="b");const u=o+c,d=parseInt((null===(r=n.name.match(/\d+/))||void 0===r?void 0:r[0])||(n.name.includes("Unison")?1:8),10),h=s[o],f=(h+d-1)%7,p=i[f],m=a[o]+l;let g=a[p];(f<h||"Octave"===n.number)&&(g+=12);const v=m+n.semitones-g;let b="";if(1===v)b="#";else if(2===v)b="##";else if(-1===v)b="b";else if(-2===v)b="bb";else if(0!==v)continue;const y=p+b;if(!k.current||u!==k.current.note1||y!==k.current.note2){e=u,t=y;break}}a(e=>e+1),l(e),u(t),p(n),k.current={note1:e,note2:t},h({message:"",type:""}),b({quality:null,number:null}),g(!1)},[C]);(0,e.useEffect)(()=>{s(0),a(0),N()},[N]);const T=(0,e.useCallback)(()=>{if(m)return;let e=!1;"Unison / Octave"===v.number?"Perfect"!==v.quality||"Unison"!==f.number&&"Octave"!==f.number||(e=!0):v.quality===f.quality&&v.number===f.number&&(e=!0),e?(s(e=>e+1),h({message:"Correct!",type:"correct"})):h({message:"Incorrect! It was ".concat(f.name,"."),type:"incorrect"}),g(!0),y&&(S.current=setTimeout(N,1500))},[m,v,f,y,N]);(0,e.useEffect)(()=>{y&&v.quality&&v.number&&T()},[v,y,T]),(0,e.useEffect)(()=>{const e=e=>{"Enter"===e.key&&(m&&!y?N():!m&&v.quality&&v.number&&T())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,v,N,T,y]);const j=(e,t)=>{m||b(n=>O(O({},n),{},{[e]:t}))};return(0,va.jsxs)("div",{className:"flex justify-center w-full",children:[(0,va.jsx)(ka,{isOpen:_,onClose:()=>w(!1),title:"Name The Interval Quiz Guide",children:(0,va.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,va.jsx)("p",{children:"This quiz tests your ability to identify the musical interval between two notes."}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"How To Play"}),(0,va.jsx)("p",{children:'Two notes will be displayed. Use the buttons below to select the Quality (e.g., Major, Minor) and the Number (e.g., 3rd, 5th) of the interval between them. Press "Submit" or the Enter key to check your answer.'})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"Auto-Advance"}),(0,va.jsx)("p",{children:'For faster-paced practice, you can enable the "Auto-Advance" toggle. With this active, your answer will be submitted automatically as soon as you make a complete selection, and the next question will appear after a short delay.'})]})]})}),(0,va.jsxs)("div",{className:"bg-slate-800 p-4 md:p-8 rounded-lg w-full max-w-2xl text-center",children:[(0,va.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,va.jsxs)("div",{className:"flex items-center gap-3",children:[(0,va.jsx)("h1",{className:"text-3xl font-extrabold text-indigo-300",children:"Name The Interval"}),(0,va.jsx)(Sa,{onClick:()=>w(!0)})]}),(0,va.jsx)("button",{onClick:()=>{const e=prompt("Enter any remarks for this session:","Score: ".concat(r," / ").concat(i));null!==e&&(n({game:"Name The Interval",bpm:t,date:(new Date).toLocaleDateString(),remarks:e||"No remarks."}),alert("Session logged!"))},className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded-lg text-sm flex-shrink-0",children:"Log Session"})]}),(0,va.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,va.jsxs)("span",{className:"text-xl font-semibold text-gray-300",children:["Score: ",r," / ",i]}),(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer font-semibold",children:[(0,va.jsx)("span",{className:"text-gray-300",children:"Auto-Advance"}),(0,va.jsxs)("div",{className:"relative",children:[(0,va.jsx)("input",{type:"checkbox",id:"auto-advance",checked:y,onChange:()=>x(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),(0,va.jsxs)("div",{className:"flex justify-center items-center gap-2 md:gap-5 mt-6 mb-6",children:[(0,va.jsx)("div",{className:"text-5xl md:text-6xl font-bold text-teal-300 p-2 md:p-4 bg-slate-700 rounded-lg w-32 md:w-36",children:o}),(0,va.jsx)("div",{className:"text-5xl md:text-6xl font-bold text-teal-300 p-2 md:p-4 bg-slate-700 rounded-lg w-32 md:w-36",children:c})]}),(0,va.jsx)("div",{className:"text-lg font-bold my-2 min-h-[28px] ".concat("correct"===d.type?"text-green-400":"text-red-400"),children:d.message||(0,va.jsx)(va.Fragment,{children:"\xa0"})}),(0,va.jsxs)("div",{className:"text-center text-gray-400 mb-2 min-h-[24px] animate-pulse",children:[!y&&!m&&v.quality&&v.number&&"Press Enter to Submit",!y&&m&&"Press Enter for Next Question"]}),(0,va.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-3",children:"Quality"}),(0,va.jsx)("div",{className:"flex flex-col gap-2",children:C.qualities.map(e=>(0,va.jsx)("button",{onClick:()=>j("quality",e),disabled:m,className:"p-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(v.quality===e?"bg-blue-600 text-white":"bg-teal-600 hover:bg-teal-500"),children:e},e))})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-3",children:"Number"}),(0,va.jsx)("div",{className:"grid grid-cols-2 gap-2",children:C.numericButtons.map(e=>(0,va.jsx)("button",{onClick:()=>j("number",e),disabled:m,className:"p-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(v.number===e?"bg-blue-600 text-white":"bg-teal-600 hover:bg-teal-500"),children:e},e))})]})]}),!y&&(0,va.jsx)("div",{className:"w-full flex gap-4 mt-4",children:m?(0,va.jsx)("button",{onClick:N,className:"w-full bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-4 rounded-lg",children:"Next Question"}):(0,va.jsx)("button",{onClick:T,disabled:!v.quality||!v.number,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg disabled:bg-gray-500",children:"Submit"})})]})]})},Ea=()=>{const{bpm:t,addLogEntry:n,setMetronomeSchedule:r,countdownClicks:s,setCountdownClicks:i,countdownMode:a,setCountdownMode:o}=ya(),[l,c]=(0,e.useState)(12),[u,d]=(0,e.useState)("chromatic"),[h,f]=(0,e.useState)(4),[p,m]=(0,e.useState)([]),[g,v]=(0,e.useState)(!0),[b,y]=(0,e.useState)(!1),[x,_]=(0,e.useState)(l),[w,k]=(0,e.useState)(!1),[S,C]=(0,e.useState)(!1),N=(0,e.useCallback)(()=>{const e="natural"===u?["C","D","E","F","G","A","B"]:["C",{sharp:"C#",flat:"Db"},"D",{sharp:"D#",flat:"Eb"},"E","F",{sharp:"F#",flat:"Gb"},"G",{sharp:"G#",flat:"Ab"},"A",{sharp:"A#",flat:"Bb"},"B"],t=[];let n=[];for(let r=0;r<l;r++){let s;r>0&&r%4===0&&(n=[]);let i=0;do{let t=e[Math.floor(Math.random()*e.length)];"object"===typeof t&&(t=Math.random()<.5?t.sharp:t.flat),s=t,i++}while(n.includes(s)&&e.length>n.length&&i<20);t.push(s),n.push(s)}m(t)},[l,u]),T=(0,e.useCallback)(()=>{setTimeout(N,0)},[N]);(0,e.useEffect)(()=>{N()},[N]),(0,e.useEffect)(()=>{_(l)},[l]),(0,e.useEffect)(()=>{r(b?{callback:T,interval:x}:null)},[b,x,T,r]),(0,e.useEffect)(()=>{const e=e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),N())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[N]);const j=(0,va.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"num-notes",className:"font-semibold text-lg",children:"Number of Notes:"}),(0,va.jsx)("input",{type:"number",id:"num-notes",value:l,onChange:e=>c(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-24 p-2 rounded-md bg-slate-600 text-white text-center",min:"1"})]}),(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("span",{className:"font-semibold text-lg",children:"Note Type:"}),(0,va.jsxs)("div",{className:"flex gap-4",children:[(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,va.jsx)("input",{type:"radio",name:"noteType",value:"natural",checked:"natural"===u,onChange:()=>d("natural")}),"Natural"]}),(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,va.jsx)("input",{type:"radio",name:"noteType",value:"chromatic",checked:"chromatic"===u,onChange:()=>d("chromatic")}),"Chromatic"]})]})]}),(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"show-barlines",className:"font-semibold text-lg",children:"Show Barlines:"}),(0,va.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",id:"show-barlines",checked:g,onChange:()=>v(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,va.jsxs)("div",{className:"pt-4 border-t border-slate-600 space-y-4",children:[(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"auto-generate",className:"font-semibold text-lg text-teal-300",children:"Auto-Generate:"}),(0,va.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",id:"auto-generate",checked:b,onChange:()=>y(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"})]})]}),(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"auto-generate-interval",className:"font-semibold text-lg ".concat(!b&&"opacity-50"),children:"Every:"}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("input",{type:"number",id:"auto-generate-interval",value:x,onChange:e=>_(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-24 p-2 rounded-md bg-slate-600 text-white text-center ".concat(!b&&"opacity-50"),min:"1",disabled:!b}),(0,va.jsx)("span",{className:"font-semibold text-lg ".concat(!b&&"opacity-50"),children:"clicks"})]})]}),(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"countdown-clicks",className:"font-semibold text-lg ".concat(!b&&"opacity-50"),children:"Countdown:"}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("input",{type:"number",id:"countdown-clicks",value:s,onChange:e=>i(Math.max(0,parseInt(e.target.value,10)||0)),className:"w-24 p-2 rounded-md bg-slate-600 text-white text-center ".concat(!b&&"opacity-50"),min:"0",max:"7",disabled:!b}),(0,va.jsx)("span",{className:"font-semibold text-lg ".concat(!b&&"opacity-50"),children:"clicks"})]})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-2 text-lg ".concat(!b&&"opacity-50"),children:"Countdown Mode:"}),(0,va.jsxs)("div",{className:"flex bg-slate-600 rounded-md p-1",children:[(0,va.jsx)("button",{disabled:!b,onClick:()=>o("every"),className:"flex-1 rounded-md text-sm py-1 disabled:cursor-not-allowed ".concat("every"===a?"bg-blue-600 text-white":"text-gray-300"),children:"Every Time"}),(0,va.jsx)("button",{disabled:!b,onClick:()=>o("first"),className:"flex-1 rounded-md text-sm py-1 disabled:cursor-not-allowed ".concat("first"===a?"bg-blue-600 text-white":"text-gray-300"),children:"First Time Only"})]})]})]})]});return(0,va.jsxs)("div",{className:"flex flex-col md:flex-row items-start w-full gap-4",children:[(0,va.jsx)(ka,{isOpen:S,onClose:()=>C(!1),title:"Random Note Generator Guide",children:(0,va.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,va.jsx)("p",{children:"This tool generates a random sequence of musical notes to help you practice note recognition and sight-reading."}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"How It Works"}),(0,va.jsx)("p",{children:'Use the "Generate" button or press the Enter/Space key to get a new set of notes. The controls panel on the right allows you to customize the generator.'})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"Features"}),(0,va.jsxs)("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Number of Notes:"})," Choose how many notes to generate at a time."]}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Note Type:"}),' Select "Natural" for notes without sharps or flats (A, B, C...) or "Chromatic" to include all 12 notes.']}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Auto-Generate:"}),' Turn on this feature to get a new set of notes automatically in time with the metronome. Use the "Countdown" to get a few clicks to prepare.']})]})]})]})}),(0,va.jsxs)("div",{className:"w-full flex-1 bg-slate-800 p-4 rounded-lg",children:[(0,va.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,va.jsx)("div",{className:"flex-1"}),(0,va.jsxs)("div",{className:"flex-1 flex justify-center items-center gap-2",children:[(0,va.jsx)("h1",{className:"text-xl md:text-2xl text-center font-bold text-indigo-300",children:"Random Note Generator"}),(0,va.jsx)(Sa,{onClick:()=>C(!0)})]}),(0,va.jsxs)("div",{className:"flex-1 flex justify-end items-center gap-2",children:[(0,va.jsx)("button",{onClick:()=>{const e=prompt("Enter any remarks for this session:","Practiced ".concat(u," notes."));if(null!==e){const r={game:"Note Generator",bpm:t,date:(new Date).toLocaleDateString(),remarks:e||"No remarks."};n(r),alert("Session logged!")}},className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded-lg text-sm",children:"Log Session"}),(0,va.jsx)("button",{onClick:()=>k(e=>!e),className:"p-2 rounded-md bg-slate-700 hover:bg-slate-600 text-sm font-semibold",children:"Controls"})]})]}),(0,va.jsx)("div",{className:"w-full p-6 rounded-lg text-center min-h-[160px] flex justify-center items-center flex-wrap gap-x-4 gap-y-2",children:p.map((t,n)=>{const r=t.charAt(0),s=t.substring(1).replace(/#/g,"\u266f").replace(/b/g,"\u266d");return(0,va.jsxs)(e.Fragment,{children:[(0,va.jsxs)("span",{className:"font-bold text-teal-300",style:{fontSize:"".concat(h,"rem"),lineHeight:"1"},children:[r,(0,va.jsx)("sup",{style:{fontSize:"".concat(.6*h,"rem"),verticalAlign:"super",marginLeft:"0.1em"},children:s})]}),g&&(n+1)%4===0&&n<p.length-1&&(0,va.jsx)("div",{className:"h-16 w-1 bg-slate-600 rounded-full mx-2",style:{height:"".concat(1.2*h,"rem")}})]},n)})}),(0,va.jsxs)("div",{className:"flex items-center justify-center gap-4 mt-6 mb-8",children:[(0,va.jsx)("label",{htmlFor:"font-size-main",className:"font-semibold text-lg",children:"Font Size:"}),(0,va.jsx)("input",{type:"range",id:"font-size-main",min:"2",max:"8",step:"0.5",value:h,onChange:e=>f(e.target.value),className:"w-1/2 max-w-xs"})]}),(0,va.jsx)("div",{className:"w-full flex justify-center",children:(0,va.jsx)("button",{onClick:N,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-lg text-xl",children:"Generate (Enter/Space)"})})]}),(0,va.jsx)("div",{className:"hidden md:block bg-slate-700 rounded-lg transition-all duration-300 ease-in-out ".concat(w?"w-80 p-4":"w-0 p-0 overflow-hidden"),children:(0,va.jsxs)("div",{className:"".concat(!w&&"hidden"),children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300 mb-4",children:"Settings & Controls"}),j]})}),w&&(0,va.jsx)("div",{className:"md:hidden fixed inset-0 z-50 flex justify-center items-center bg-black/60",onClick:()=>k(!1),children:(0,va.jsxs)("div",{className:"w-11/12 max-w-sm bg-slate-800 rounded-2xl p-4 max-h-[85vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,va.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center mb-4",children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300",children:"Settings & Controls"}),(0,va.jsx)("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-white text-2xl font-bold",children:"\xd7"})]}),(0,va.jsx)("div",{className:"flex-grow overflow-y-auto pr-2",children:j})]})})]})},Ma={1:{major:"e.g., G, Am, Bdim"},2:{major:"e.g., C G Am Edim"},3:{major:"e.g., G D Em Bdim"},4:{major:"e.g., I V vi vii\xb0"}},Oa=[["C","Am"],["G","Em"],["D","Bm"],["A","F#m"],["E","C#m"],["B","G#m"],["F#","D#m"],["Db","Bbm"],["Ab","Fm"],["Eb","Cm"],["Bb","Gm"],["F","Dm"]],Pa=["Gb"],Da=["I","ii","iii","IV","V","vi","vii"],Ia=[10,6,4,8,10,8,2],Ra=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t};const Fa=e.memo(e=>{let{angle:t,radius:n,keyName:r,selected:s,onChange:i}=e;const a={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(".concat(t,"deg) translate(").concat(n,"px) rotate(").concat(-t,"deg)")};return(0,va.jsx)("div",{style:a,children:(0,va.jsxs)("label",{className:"block p-2 rounded-md text-center cursor-pointer min-w-[50px] ".concat(s?"bg-blue-600 text-white":"bg-slate-600 hover:bg-slate-500"),children:[(0,va.jsx)("input",{type:"checkbox",checked:s,onChange:()=>i(r),className:"sr-only"}),r]})})}),La=e.memo(t=>{let{selectedKeys:n,handleKeySelection:r,selectedModes:s,handleModeSelection:i,numQuestions:a,setNumQuestions:o,showAdvanced:l,setShowAdvanced:c,majorWeights:u,setMajorWeights:d,handleStartQuiz:h,handleWeightChange:f}=t;return(0,va.jsxs)("div",{className:"w-full",children:[(0,va.jsx)("h2",{className:"text-3xl font-extrabold mb-6 text-indigo-300 text-center",children:"Chord Trainer Setup"}),(0,va.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,va.jsxs)("div",{className:"bg-slate-700 p-4 rounded-lg flex flex-col items-center",children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300 mb-4 text-center",children:"Select Keys"}),(0,va.jsx)("div",{className:"relative w-[280px] h-[280px] sm:w-[350px] sm:h-[350px] mx-auto mb-4",children:Oa.map((t,s)=>{let[i,a]=t;const o=30*s-90,l=window.innerWidth<640?120:150;return(0,va.jsx)(e.Fragment,{children:(0,va.jsx)(Fa,{angle:o,radius:l,keyName:i,selected:!!n[i],onChange:r})},i)})}),(0,va.jsxs)("div",{className:"border-t border-slate-600 pt-3 text-center mt-2",children:[(0,va.jsx)("h4",{className:"font-semibold text-lg text-gray-400 mb-2",children:"Enharmonic Keys"}),(0,va.jsx)("div",{className:"flex justify-center gap-4",children:Pa.map(e=>(0,va.jsxs)("label",{className:"block p-2 rounded-md text-center cursor-pointer min-w-[50px] ".concat(n[e]?"bg-blue-600 text-white":"bg-slate-600 hover:bg-slate-500"),children:[(0,va.jsx)("input",{type:"checkbox",checked:!!n[e],onChange:()=>r(e),className:"sr-only"}),e]},e))})]})]}),(0,va.jsxs)("div",{className:"bg-slate-700 p-4 rounded-lg flex flex-col",children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300 mb-4",children:"Game Modes"}),(0,va.jsx)("div",{className:"space-y-2",children:[{id:1,label:"Name the Chord (from numeral)"},{id:4,label:"Name the Numeral (from chord)"},{id:2,label:"Name Chord Progression"},{id:3,label:"Transpose Progression"}].map(e=>(0,va.jsxs)("label",{className:"block p-3 rounded-md cursor-pointer ".concat(s[e.id]?"bg-blue-600 text-white":"bg-slate-600 hover:bg-slate-500"),children:[(0,va.jsx)("input",{type:"checkbox",checked:!!s[e.id],onChange:()=>i(e.id),className:"mr-3"}),e.label]},e.id))}),(0,va.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,va.jsx)("button",{onClick:()=>i(null,!0,!1),className:"text-sm bg-slate-600 hover:bg-slate-500 p-2 rounded-md flex-1",children:"Select All"}),(0,va.jsx)("button",{onClick:()=>i(null,!1,!0),className:"text-sm bg-slate-600 hover:bg-slate-500 p-2 rounded-md flex-1",children:"Deselect All"})]}),(0,va.jsx)("div",{className:"border-t border-slate-600 my-4"}),(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300 mb-2",children:"Quiz Length"}),(0,va.jsxs)("div",{className:"flex items-center gap-4",children:[(0,va.jsx)("label",{htmlFor:"num-questions",className:"font-semibold",children:"Questions:"}),(0,va.jsx)("input",{type:"number",id:"num-questions",value:a,onChange:e=>o(Math.max(1,parseInt(e.target.value)||1)),className:"w-20 p-2 rounded-md bg-slate-600 text-white text-center",min:"1",max:"100"})]}),(0,va.jsx)("div",{className:"border-t border-slate-600 my-4"}),(0,va.jsxs)("button",{onClick:()=>c(!l),className:"text-left text-teal-300 font-bold text-lg hover:text-teal-200 w-full",children:[l?"\u25bc":"\u25ba"," Advanced Settings"]}),l&&(0,va.jsx)("div",{className:"mt-2 p-3 bg-slate-800/50 rounded-lg space-y-4",children:(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-semibold text-lg text-gray-300 mb-1",children:"Chord Weights"}),(0,va.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:"Control how often each chord appears in the quiz. The default weights are set to mimic their frequency in common songs."}),(0,va.jsx)("div",{className:"py-1 text-center text-sm rounded-t-md bg-slate-700 text-teal-300",children:"Major Keys"}),u.map((e,t)=>(0,va.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,va.jsx)("label",{className:"w-8 font-mono text-right",children:Da[t]}),(0,va.jsx)("input",{type:"range",min:"0",max:"10",value:e,onChange:e=>f(t,e.target.value),className:"flex-1"}),(0,va.jsx)("span",{className:"w-4 text-left",children:e})]},t)),(0,va.jsx)("button",{onClick:()=>d(Ia),className:"text-sm bg-slate-600 hover:bg-slate-500 p-2 rounded-md w-full mt-2",children:"Reset to Default"})]})}),(0,va.jsx)("div",{className:"mt-auto pt-4",children:(0,va.jsx)("button",{onClick:h,className:"w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-lg text-xl",children:"Start Quiz"})})]})]})]})}),Va=e.memo(e=>{var t;let{questions:n,currentQuestionIndex:r,score:s,userAnswer:i,setUserAnswer:a,feedback:o,autoAdvance:l,setAutoAdvance:c,handleAnswerSubmit:u,nextQuestion:d,handleGoToSetup:h,chordData:f}=e;const p=n[r],m=p.prompt.split("**");let g="";const v=(null===(t=f[p.key])||void 0===t?void 0:t.type)||"major",b=Ma[p.mode];return g=b?"object"===typeof b?b[v]:b:"Enter your answer below.",(0,va.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,va.jsxs)("div",{className:"w-full flex justify-between items-center mb-2 text-lg",children:[(0,va.jsx)("span",{children:"\xa0"}),(0,va.jsxs)("span",{children:["Score: ",s," / ",r+1]})]}),(0,va.jsx)("div",{className:"w-full bg-slate-800 p-4 rounded-lg text-center min-h-[80px] flex justify-center items-center flex-wrap gap-x-2 mb-2",children:m.map((e,t)=>(0,va.jsx)("span",{className:t%2===1?"text-2xl md:text-3xl font-bold text-teal-300":"text-xl md:text-2xl text-gray-200",children:e},t))}),(0,va.jsx)("div",{className:"text-md my-1 min-h-[40px] flex items-center text-center italic ".concat(o?"text-transparent":"text-gray-400"),children:g}),o&&(0,va.jsx)("div",{className:"text-xl mb-2 min-h-[28px] flex items-center justify-center ".concat(o.startsWith("Correct")?"text-green-400":"text-red-400"),children:o}),(0,va.jsxs)("form",{onSubmit:u,className:"w-full max-w-sm flex flex-col items-center",children:[(0,va.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"w-full text-center text-xl p-2 md:text-2xl md:p-3 rounded-lg bg-slate-700 text-white border-2 border-slate-600 focus:border-blue-500 focus:outline-none",disabled:!!o,autoFocus:!0}),(0,va.jsx)("div",{className:"h-16 mt-3 flex items-center",children:o?!l&&(0,va.jsx)("button",{type:"button",onClick:d,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-lg animate-pulse",children:"Next Question"}):(0,va.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-lg",children:"Submit"})})]}),(0,va.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg",children:[(0,va.jsx)("label",{htmlFor:"auto-advance",className:"font-semibold text-sm text-gray-300",children:"Auto-Advance:"}),(0,va.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",id:"auto-advance",checked:l,onChange:()=>c(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,va.jsx)("button",{onClick:h,className:"w-full max-w-sm mt-2 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg",children:"Back to Menu"})]})}),za=e.memo(e=>{let{score:t,questions:n,setScreen:r,handleLogSession:s}=e;return(0,va.jsxs)("div",{className:"text-center",children:[(0,va.jsx)("h2",{className:"text-3xl font-extrabold mb-4 text-indigo-300",children:"Quiz Complete!"}),(0,va.jsxs)("p",{className:"text-2xl text-teal-300 mb-8",children:["Your final score is: ",t," / ",n.length]}),(0,va.jsx)("div",{className:"flex justify-center gap-4",children:(0,va.jsx)("button",{onClick:()=>r("setup"),className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-lg text-xl",children:"Play Again"})})]})}),qa=()=>{const[t,n]=(0,e.useState)("setup"),[r,s]=(0,e.useState)({}),[i,a]=(0,e.useState)({1:!0}),[o,l]=(0,e.useState)(20),[c,u]=(0,e.useState)(Ia),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)([]),[m,g]=(0,e.useState)(0),[v,b]=(0,e.useState)(""),[y,x]=(0,e.useState)(""),[_,w]=(0,e.useState)(0),[k,S]=(0,e.useState)(!0),C=O({},{C:{chords:["C","Dm","Em","F","G","Am","Bdim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},G:{chords:["G","Am","Bm","C","D","Em","F#dim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},D:{chords:["D","Em","F#m","G","A","Bm","C#dim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},A:{chords:["A","Bm","C#m","D","E","F#m","G#dim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},E:{chords:["E","F#m","G#m","A","B","C#m","D#dim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},B:{chords:["B","C#m","D#m","E","F#","G#m","A#dim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},"F#":{chords:["F#","G#m","A#m","B","C#","D#m","E#dim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},Gb:{chords:["Gb","Abm","Bbm","Cb","Db","Ebm","Fdim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},Db:{chords:["Db","Ebm","Fm","Gb","Ab","Bbm","Cdim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},Ab:{chords:["Ab","Bbm","Cm","Db","Eb","Fm","Gdim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},Eb:{chords:["Eb","Fm","Gm","Ab","Bb","Cm","Ddim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},Bb:{chords:["Bb","Cm","Dm","Eb","F","Gm","Adim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"},F:{chords:["F","Gm","Am","Bb","C","Dm","Edim"],numerals:["I","ii","iii","IV","V","vi","vii\xb0"],type:"major"}}),N=e=>s(t=>O(O({},t),{},{[e]:!t[e]})),T=function(e){a(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{1:!0,2:!0,3:!0,4:!0}:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{}:t=>O(O({},t),{},{[e]:!t[e]}))},j=(e,t)=>{const n=[...c];n[e]=Number(t),u(n)},A=()=>{const e=Object.keys(r).filter(e=>r[e]),t=Object.keys(i).filter(e=>i[e]).map(Number);if(0===e.length)return void alert("Please select at least one key.");if(0===t.length)return void alert("Please select at least one game mode.");if(t.includes(3)&&e.length<2)return void alert("Transpose Progression requires at least two keys to be selected.");const s=function(e,t,n,r,s,i){let a=[];const o=t;for(const l of e){const t=i[l];if(!t)continue;const n=[];if(r.forEach((e,t)=>{for(let r=0;r<e;r++)n.push(t)}),o.includes(1)||o.includes(4))for(let e=0;e<t.chords.length;e++)o.includes(1)&&a.push({mode:1,key:l,prompt:"In **".concat(l,"**, what is the **").concat(t.numerals[e],"** chord?"),answer:t.chords[e]}),o.includes(4)&&a.push({mode:4,key:l,prompt:"In **".concat(l,"**, what is the numeral for **").concat(t.chords[e],"**?"),answer:t.numerals[e]});if(o.includes(2))for(let e=0;e<5;e++){const e=Ra(n).slice(0,4),r=e.map(e=>t.numerals[e]).join(" "),s=e.map(e=>t.chords[e]).join(" ");a.push({mode:2,key:l,prompt:"In **".concat(l,"**, what are the chords for **").concat(r,"**?"),answer:s})}if(o.includes(3)&&e.length>1){const t=e.filter(e=>e!==l);if(t.length>0)for(let e=0;e<3;e++){const e=l,r=t[Math.floor(Math.random()*t.length)],s=i[e],o=i[r];if(!s||!o)continue;const c=Ra(n).slice(0,4),u=c.map(e=>s.chords[e]).join(" "),d=c.map(e=>o.chords[e]).join(" ");a.push({mode:3,key:r,prompt:"Transpose the progression **'".concat(u,"'** from **").concat(e,"** to the key of **").concat(r,"**."),answer:d})}}}return Ra(a).slice(0,n)}(e,t,o,c,0,C);0!==s.length?(p(s),g(0),w(0),x(""),b(""),n("quiz")):alert("Could not generate questions with the current settings.")},E=()=>{m<f.length-1?(g(e=>e+1),b(""),x("")):n("results")},M=e=>{if(e.preventDefault(),y)return;const t=f[m];v.trim().replace(/\s+/g," ").toLowerCase()===t.answer.toLowerCase()?(w(e=>e+1),x("Correct!")):x("Incorrect. The answer was: ".concat(t.answer)),k&&setTimeout(()=>{E()},1500)},P=()=>{window.confirm("Are you sure you want to go back to the menu? Your current progress will be lost.")&&(n("setup"),p([]),g(0),w(0))};return"setup"===t?(0,va.jsx)(La,{selectedKeys:r,handleKeySelection:N,selectedModes:i,handleModeSelection:T,numQuestions:o,setNumQuestions:l,showAdvanced:d,setShowAdvanced:h,majorWeights:c,setMajorWeights:u,handleStartQuiz:A,handleWeightChange:j}):"quiz"===t?(0,va.jsx)(Va,{questions:f,currentQuestionIndex:m,score:_,userAnswer:v,setUserAnswer:b,feedback:y,autoAdvance:k,setAutoAdvance:S,handleAnswerSubmit:M,nextQuestion:E,handleGoToSetup:P,chordData:C}):"results"===t?(0,va.jsx)(za,{score:_,questions:f,setScreen:n}):void 0},Ba=()=>{const[t,n]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{const e=/iPhone|iPad|iPod/.test(navigator.userAgent);n(e)},[]),t?(0,va.jsxs)("div",{className:"bg-indigo-900/50 border border-indigo-700 text-indigo-200 text-sm rounded-lg p-3 my-3 text-center",children:[(0,va.jsx)("p",{className:"font-bold",children:"No Sound on iPhone / iPad?"}),(0,va.jsx)("p",{children:"If you don't hear audio, please ensure your device's Ring/Silent switch is turned ON (not showing orange)."})]}):null},Ua=()=>{const{bpm:e,setBpm:t,isMetronomePlaying:n,toggleMetronome:r,metronomeVolume:s,setMetronomeVolume:i}=ya();return(0,va.jsxs)("div",{className:"bg-slate-700 p-4 rounded-b-lg w-full",children:[(0,va.jsx)(Ba,{}),(0,va.jsxs)("div",{className:"mb-4",children:[(0,va.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,va.jsx)("label",{htmlFor:"bpm-input",className:"text-gray-200 text-lg font-semibold",children:"BPM:"}),(0,va.jsx)("input",{type:"number",id:"bpm-input",value:e,onChange:e=>{const n=e.target.value;(""===n||n>=40&&n<=240)&&t(n)},onBlur:e=>{let n=parseInt(e.target.value,10);isNaN(n)||n<40?t(40):n>240&&t(240)},className:"w-20 p-1 rounded-md bg-slate-600 text-white text-center",min:"40",max:"240"})]}),(0,va.jsx)("input",{type:"range",id:"bpm-slider",min:"40",max:"240",value:e,onChange:e=>t(Number(e.target.value)),className:"w-full h-3 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),(0,va.jsxs)("div",{className:"mb-4",children:[(0,va.jsx)("label",{htmlFor:"volume-slider",className:"block text-gray-200 text-lg font-semibold mb-2",children:"Volume"}),(0,va.jsx)("input",{type:"range",id:"volume-slider",min:"-40",max:"0",step:"1",value:s,onChange:e=>i(Number(e.target.value)),className:"w-full h-3 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),(0,va.jsx)("button",{onClick:r,className:"w-full py-3 rounded-lg text-lg font-bold text-white ".concat(n?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"),children:n?"Stop":"Start"})]})},Wa=()=>{var e;const{droneNote:t,setDroneNote:n,isDronePlaying:r,toggleDrone:s,droneVolume:i,setDroneVolume:a,areDronesReady:o}=ya(),l=[{value:"C",display:"C"},{value:"C#",display:"C# / Db"},{value:"D",display:"D"},{value:"D#",display:"D# / Eb"},{value:"E",display:"E"},{value:"F",display:"F"},{value:"F#",display:"F# / Gb"},{value:"G",display:"G"},{value:"G#",display:"G# / Ab"},{value:"A",display:"A"},{value:"A#",display:"A# / Bb"},{value:"B",display:"B"}],c=(null===(e=l.find(e=>e.value===t))||void 0===e?void 0:e.display)||t;return(0,va.jsxs)("div",{className:"bg-slate-700 p-4 rounded-b-lg w-full",children:[(0,va.jsx)(Ba,{}),(0,va.jsxs)("div",{className:"mb-4",children:[(0,va.jsxs)("label",{htmlFor:"drone-note",className:"block text-gray-200 text-lg font-semibold mb-2",children:["Note: ",c]}),(0,va.jsx)("select",{id:"drone-note",value:t,onChange:e=>n(e.target.value),className:"w-full p-2 rounded-lg bg-slate-600 text-white",children:l.map(e=>(0,va.jsx)("option",{value:e.value,children:e.display},e.value))})]}),(0,va.jsxs)("div",{className:"mb-4",children:[(0,va.jsx)("label",{htmlFor:"drone-volume-slider",className:"block text-gray-200 text-lg font-semibold mb-2",children:"Volume"}),(0,va.jsx)("input",{type:"range",id:"drone-volume-slider",min:"-40",max:"0",step:"1",value:i,onChange:e=>a(Number(e.target.value)),className:"w-full h-3 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),(0,va.jsx)("button",{onClick:s,disabled:!o,className:"w-full py-3 rounded-lg text-lg font-bold text-white disabled:bg-gray-500 disabled:cursor-not-allowed ".concat(r?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"),children:o?r?"Stop Drone":"Play Drone":"Loading..."})]})},Ga=()=>{const{timeLeft:t,isTimerRunning:n,toggleTimer:r,resetTimer:s,timerDuration:i}=ya(),[a,o]=(0,e.useState)(i/60);(0,e.useEffect)(()=>{o(i/60)},[i]);const l=0===t&&!n;return(0,va.jsxs)("div",{className:"bg-slate-700 p-4 rounded-b-lg w-full",children:[(0,va.jsx)("div",{className:"text-5xl font-mono text-center mb-4 ".concat(l?"text-red-500 animate-pulse":"text-white"),children:l?"Time's Up!":(e=>{const t=Math.floor(e/60),n=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))})(t)}),(0,va.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,va.jsx)("input",{type:"number",value:a,onChange:e=>o(e.target.value),className:"w-full p-2 rounded-md bg-slate-600 text-white text-center",min:"1",disabled:n}),(0,va.jsx)("button",{onClick:()=>{const e=parseInt(a,10);!isNaN(e)&&e>0&&s(e)},disabled:n,className:"px-4 py-2 rounded-lg font-semibold bg-blue-600 hover:bg-blue-500 text-white disabled:bg-gray-500",children:"Set"})]}),(0,va.jsxs)("div",{className:"flex gap-4",children:[(0,va.jsx)("button",{onClick:r,disabled:0===t,className:"w-full py-3 rounded-lg text-lg font-bold text-white disabled:bg-gray-500 ".concat(n?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"),children:n?"Pause":"Start"}),(0,va.jsx)("button",{onClick:()=>s(a),className:"w-full py-3 rounded-lg text-lg font-bold bg-gray-600 hover:bg-gray-500 text-white",children:"Reset"})]})]})},Ha=()=>{const{stopwatchTime:e,isStopwatchRunning:t,laps:n,toggleStopwatch:r,resetStopwatch:s,addLap:i}=ya(),a=e=>{const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3),r=Math.floor(e%1e3/10);return"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"),".").concat(String(r).padStart(2,"0"))};return(0,va.jsxs)("div",{className:"bg-slate-700 p-4 rounded-b-lg w-full",children:[(0,va.jsx)("div",{className:"text-4xl font-mono text-center text-white mb-4",children:a(e)}),(0,va.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,va.jsx)("button",{onClick:r,className:"w-full py-2 rounded-lg text-lg font-bold text-white ".concat(t?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"),children:t?"Pause":"Start"}),(0,va.jsx)("button",{onClick:i,disabled:!t,className:"w-full py-2 rounded-lg text-lg font-bold bg-blue-600 hover:bg-blue-500 text-white disabled:bg-gray-500 disabled:cursor-not-allowed",children:"Lap"})]}),(0,va.jsx)("button",{onClick:s,className:"w-full py-2 rounded-lg text-lg font-bold bg-gray-600 hover:bg-gray-500 text-white",children:"Reset"}),n.length>0&&(0,va.jsx)("div",{className:"mt-4 border-t border-slate-600 pt-2 max-h-24 overflow-y-auto",children:(0,va.jsx)("ul",{className:"text-gray-300 text-center",children:n.map((e,t)=>(0,va.jsxs)("li",{className:"flex justify-between px-2",children:[(0,va.jsxs)("span",{children:["Lap ",t+1]}),(0,va.jsx)("span",{children:a(e)})]},t)).reverse()})})]})},Qa=()=>{const{practiceLog:t,clearLog:n,addLogEntry:r,importLog:s}=ya(),[i,a]=(0,e.useState)("All"),[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(!1),d=(0,e.useRef)(null),h=(0,e.useMemo)(()=>{const e=new Set(t.map(e=>e.game));return["All",...Array.from(e)]},[t]),f=(0,e.useMemo)(()=>"All"===i?t:t.filter(e=>e.game===i),[t,i]);return(0,va.jsxs)("div",{className:"bg-slate-700 p-4 rounded-b-lg w-full flex flex-col h-full",children:[(0,va.jsxs)("div",{className:"flex-shrink-0",children:[(0,va.jsxs)("div",{className:"mb-4",children:[(0,va.jsxs)("button",{onClick:()=>u(e=>!e),className:"w-full flex justify-between items-center p-3 bg-slate-800/50 rounded-lg text-left font-bold text-lg text-white hover:bg-slate-800 transition-colors",children:[(0,va.jsx)("span",{children:"Add a Custom Log"}),(0,va.jsx)("span",{className:"transform transition-transform duration-200 ".concat(c?"rotate-90":""),children:"\u25b6"})]}),c&&(0,va.jsxs)("div",{className:"mt-2 p-3 bg-slate-800/50 rounded-lg animate-fade-in-down",children:[(0,va.jsx)("textarea",{value:o,onChange:e=>l(e.target.value),placeholder:"Practiced scales for 20 minutes...",className:"w-full p-2 rounded-md bg-slate-600 text-white text-sm h-20 resize-none",autoFocus:!0}),(0,va.jsx)("button",{onClick:()=>{if(""===o.trim())return void alert("Please enter some remarks for your custom log.");const e={game:"Custom Log",bpm:"N/A",date:(new Date).toLocaleDateString(),remarks:o.trim()};r(e),l(""),u(!1)},className:"w-full mt-2 py-2 rounded-lg text-md font-bold bg-indigo-600 hover:bg-indigo-500 text-white",children:"Save Custom Log"})]})]}),(0,va.jsxs)("div",{className:"flex justify-between items-center mb-3 pt-4 border-t border-slate-600",children:[(0,va.jsx)("h4",{className:"font-bold text-lg text-white",children:"History"}),(0,va.jsx)("select",{value:i,onChange:e=>a(e.target.value),className:"bg-slate-600 text-white rounded-md p-1 border border-slate-500",children:h.map(e=>(0,va.jsx)("option",{value:e,children:e},e))})]})]}),(0,va.jsx)("div",{className:"flex-grow overflow-y-auto pr-2",children:f.length>0?(0,va.jsx)("ul",{className:"space-y-3",children:f.slice().reverse().map((e,t)=>(0,va.jsxs)("li",{className:"bg-slate-600 p-3 rounded-lg text-sm",children:[(0,va.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,va.jsxs)("div",{className:"flex flex-col",children:[(0,va.jsx)("span",{className:"font-bold text-teal-300",children:e.game}),(0,va.jsxs)("span",{className:"text-gray-300",children:[e.bpm," BPM"]})]}),(0,va.jsx)("span",{className:"text-gray-400 font-mono flex-shrink-0 ml-4",children:e.date})]}),(0,va.jsx)("p",{className:"text-gray-200 break-words pt-1 border-t border-slate-500/50 mt-2",children:e.remarks})]},t))}):(0,va.jsx)("p",{className:"text-center text-gray-400 py-4",children:"No practice sessions logged."})}),(0,va.jsx)("div",{className:"flex-shrink-0 mt-4 pt-4 border-t border-slate-600",children:(0,va.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,va.jsx)("button",{onClick:()=>{d.current.click()},className:"w-full py-2 rounded-lg font-bold bg-blue-700 hover:bg-blue-600 text-white",children:"Import"}),(0,va.jsx)("button",{onClick:()=>{if(0===t.length)return void alert("Your practice log is empty. Nothing to export.");const e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="practice_log_".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},className:"w-full py-2 rounded-lg font-bold bg-blue-700 hover:bg-blue-600 text-white",children:"Export"}),(0,va.jsx)("button",{onClick:n,className:"w-full py-2 rounded-lg font-bold bg-red-700 hover:bg-red-600 text-white col-span-2",children:"Clear All Logs"})]})}),(0,va.jsx)("input",{type:"file",ref:d,onChange:e=>{const t=e.target.files[0];t&&s(t),e.target.value=null},accept:".json",style:{display:"none"}})]})},Ya=()=>{const{unlockAudio:e,activeTool:t,toggleActiveTool:n,isMetronomePlaying:r,toggleMetronome:s,isDronePlaying:i,toggleDrone:a,isTimerRunning:o,toggleTimer:l,isStopwatchRunning:c,toggleStopwatch:u}=ya(),d=()=>(0,va.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,va.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})}),h=()=>(0,va.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,va.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}),f=[{name:"log",label:"Practice Log",component:(0,va.jsx)(Qa,{}),hidePlayPause:!0},{name:"metronome",label:"Metronome",component:(0,va.jsx)(Ua,{}),isPlaying:r,toggle:s},{name:"drone",label:"Drone",component:(0,va.jsx)(Wa,{}),isPlaying:i,toggle:a},{name:"timer",label:"Timer",component:(0,va.jsx)(Ga,{}),isPlaying:o,toggle:l},{name:"stopwatch",label:"Stopwatch",component:(0,va.jsx)(Ha,{}),isPlaying:c,toggle:u}],p=f.find(e=>e.name===t);return(0,va.jsxs)(va.Fragment,{children:[(0,va.jsx)("div",{className:"md:hidden fixed inset-0 z-50 flex justify-center items-center transition-opacity duration-300 ".concat(t?"bg-black/60 opacity-100":"bg-transparent opacity-0 pointer-events-none"),onClick:()=>n(null),children:(0,va.jsx)("div",{className:"w-11/12 max-w-sm bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl p-4 max-h-[85vh] flex flex-col",onClick:e=>e.stopPropagation(),children:p&&(0,va.jsxs)(va.Fragment,{children:[(0,va.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center mb-4",children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300",children:p.label}),(0,va.jsx)("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-white text-2xl font-bold",children:"\xd7"})]}),(0,va.jsx)("div",{className:"flex-grow overflow-y-auto -mr-2 pr-2",children:p.component})]})})}),(0,va.jsx)("div",{className:"fixed z-30 bg-slate-900/80 backdrop-blur-sm\n                         bottom-0 left-0 right-0 p-2 flex flex-row items-center justify-start gap-2 border-t border-slate-700 overflow-x-auto\n                         md:top-1/4 md:left-5 md:right-auto md:bottom-5 md:flex-col md:items-stretch md:p-3 md:gap-2 md:border-t-0 md:rounded-lg md:border\n                         transition-all duration-300 ".concat("log"===t?"md:w-96":"md:w-64"),children:f.map(r=>(0,va.jsxs)("div",{className:"bg-slate-800 rounded-lg shadow-lg border border-slate-700 flex-shrink-0 md:flex md:flex-col",children:[(0,va.jsxs)("div",{className:"flex items-center flex-shrink-0",children:[(0,va.jsx)("button",{onClick:()=>{return t=r.name,e(),void n(t);var t},className:"flex-grow text-left font-bold py-2 px-3 md:py-3 md:px-4 text-white transition-colors duration-300 hover:bg-indigo-700 rounded-l-lg text-sm md:text-base",children:r.label}),!r.hidePlayPause&&(0,va.jsx)("button",{onClick:t=>((t,n)=>{t.stopPropagation(),e(),n()})(t,r.toggle),className:"p-2 md:p-3 text-white hover:bg-indigo-700 rounded-r-lg","aria-label":"".concat(r.isPlaying?"Pause":"Play"," ").concat(r.label),children:r.isPlaying?(0,va.jsx)(h,{}):(0,va.jsx)(d,{})})]}),(0,va.jsx)("div",{className:"hidden md:block md:flex-grow md:overflow-y-auto",children:t===r.name&&(0,va.jsx)("div",{className:"border-t border-slate-700 h-full",children:r.component})})]},r.name))})]})},$a=e=>{let{fretCount:t=15,startFret:n=0,stringCount:r=6,notesToDisplay:s=[],showLabels:i=!1,labelType:a="name",colorMap:o={},onBoardClick:l,onNoteMouseDown:c,onBoardMouseMove:u,onBoardMouseUp:d,draggingNote:h}=e;const f=800,p=240,m=p/r,g=0===n?10:0,v=(f-g)/t,b=[3,5,7,9,15,17,19,21],y=[12,24],x=()=>(0,va.jsx)("g",{className:"frets",children:Array.from({length:t+1}).map((e,t)=>{const r=0===n&&0===t,s=t*v+g;return(0,va.jsx)("line",{x1:s,y1:0,x2:s,y2:p,stroke:r?"hsl(0, 0%, 80%)":"hsl(0, 0%, 50%)",strokeWidth:r?g:4},"fret-".concat(t))})}),_=()=>(0,va.jsx)("g",{className:"strings",children:Array.from({length:r}).map((e,t)=>(0,va.jsx)("line",{x1:0,y1:t*m+m/2,x2:f,y2:t*m+m/2,stroke:"hsl(0, 0%, 70%)",strokeWidth:1+.3*t},"string-".concat(t)))}),w=()=>{const e=[];for(let r=0;r<t;r++){const t=n+r+1,s=r*v+v/2+g;b.includes(t)&&e.push((0,va.jsx)("circle",{cx:s,cy:120,r:"8",fill:"rgba(255, 255, 255, 0.15)"},"inlay-".concat(r))),y.includes(t)&&(e.push((0,va.jsx)("circle",{cx:s,cy:1.5*m,r:"8",fill:"rgba(255, 255, 255, 0.15)"},"inlay-".concat(r,"-1"))),e.push((0,va.jsx)("circle",{cx:s,cy:p-1.5*m,r:"8",fill:"rgba(255, 255, 255, 0.15)"},"inlay-".concat(r,"-2"))))}return(0,va.jsx)("g",{className:"inlays",children:e})},k=()=>(0,va.jsx)("g",{className:"notes",children:s.map(e=>{if(e.fret<n||e.fret>n+t)return null;let r,s;const l=void 0!==e.movedFret?e.movedFret:e.fret,u=void 0!==e.movedString?e.movedString:e.string;if(l>0){r=(l-n-.5)*v+g}else{if(0!==n)return null;r=g/2}s=(u-1)*m+m/2;const d=e.isRoot?"hsl(170, 100%, 35%)":"hsl(220, 80%, 55%)",f=o[e.degree],p=e.overrideColor||(f&&f.active?f.color:d),b=e.isRoot?"hsl(170, 100%, 75%)":"hsl(220, 80%, 85%)",y="degree"===a?e.degree:e.label,x=i?e.overrideLabel||y:e.isRoot?"R":"",_=h&&h.string===e.string&&h.fret===e.fret;return(0,va.jsxs)("g",{transform:"translate(".concat(r,", ").concat(s,")"),onMouseDown:t=>{t.stopPropagation(),c&&c(e,t)},className:_?"opacity-70 scale-110":"",style:{transition:_?"none":"all 0.3s ease",cursor:c?"grab":"default"},children:[(0,va.jsx)("circle",{r:"16",fill:p,stroke:b,strokeWidth:"2"}),(0,va.jsx)("text",{textAnchor:"middle",dy:".3em",fill:"white",fontSize:"1.1rem",fontWeight:"bold",children:x})]},"note-".concat(e.string,"-").concat(e.fret))})});return(0,va.jsxs)("div",{className:"flex flex-col items-center w-full",children:[n>0&&(0,va.jsxs)("div",{className:"text-gray-400 text-sm font-bold mb-1",children:["Fret: ",n]}),(0,va.jsxs)("svg",{id:"fretboard-diagram-svg",className:"w-full max-w-4xl bg-slate-800 rounded-lg shadow-lg border border-slate-700",viewBox:"0 0 ".concat(f," ").concat(p),preserveAspectRatio:"xMidYMid meet",onClick:e=>{if(l){if(e.target.closest(".notes g"))return;const s=e.currentTarget,i=s.createSVGPoint();i.x=e.clientX,i.y=e.clientY;const a=i.matrixTransform(s.getScreenCTM().inverse()),o=Math.floor(a.y/m)+1;if(0===n&&a.x>0&&a.x<g)return void l(o,0);const c=Math.floor((a.x-g)/v);let u;u=0===n?c+1:c+n,o>=1&&o<=r&&u>=n&&u<=n+t&&l(o,u)}},onMouseMove:u,onMouseUp:d,onMouseLeave:d,style:{cursor:l?"copy":h?"grabbing":"default"},children:[(0,va.jsx)("rect",{width:f,height:p,fill:"transparent"}),(0,va.jsxs)("g",{transform:"translate(0, 0)",children:[(0,va.jsx)(w,{}),(0,va.jsx)(_,{}),(0,va.jsx)(x,{}),(0,va.jsx)(k,{})]})]})]})},Xa=(()=>{const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return[{openNote:"E",midi:40},{openNote:"A",midi:45},{openNote:"D",midi:50},{openNote:"G",midi:55},{openNote:"B",midi:59},{openNote:"E",midi:64}].map(t=>{const n=[];for(let r=0;r<=24;r++){const s=t.midi+r,i=e[s%12];n.push({note:i,midi:s})}return n})})(),Za=()=>{const{addLogEntry:t}=ya(),[n,r]=(0,e.useState)(0),[s,i]=(0,e.useState)(0),[a,o]=(0,e.useState)(null),[l,c]=(0,e.useState)({message:"",type:""}),[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)({quality:null,number:null}),[p,m]=(0,e.useState)(!0),g=(0,e.useRef)(null),[v,b]=(0,e.useState)([]),[y,x]=(0,e.useState)(null),[_,w]=(0,e.useState)(!1),k=(0,e.useMemo)(()=>({qualities:["Diminished","Minor","Perfect","Major","Augmented"],numericButtons:["Unison / Octave","2nd","3rd","4th","Tritone","5th","6th","7th"],intervalsToTest:[{name:{quality:"Perfect",number:"Unison"},semitones:0},{name:{quality:"Minor",number:"2nd"},semitones:1},{name:{quality:"Major",number:"2nd"},semitones:2},{name:{quality:"Minor",number:"3rd"},semitones:3},{name:{quality:"Major",number:"3rd"},semitones:4},{name:{quality:"Perfect",number:"4th"},semitones:5},{name:{quality:"Tritone",number:"Tritone"},semitones:6},{name:{quality:"Perfect",number:"5th"},semitones:7},{name:{quality:"Minor",number:"6th"},semitones:8},{name:{quality:"Major",number:"6th"},semitones:9},{name:{quality:"Minor",number:"7th"},semitones:10},{name:{quality:"Major",number:"7th"},semitones:11},{name:{quality:"Perfect",number:"Octave"},semitones:12}]}),[]),S=k.intervalsToTest.map(e=>"Tritone"===e.name.number?"Tritone":"".concat(e.name.quality," ").concat(e.name.number)).join(", "),C=(0,e.useCallback)(()=>{clearTimeout(g.current),x(null),o(e=>{e&&b(t=>[...t,e]);let t=null,n=0;for(;null===t&&n<50;){n++;const r=Math.floor(6*Math.random()),s=Math.floor(8*Math.random()),i=Xa[r][s],a=k.intervalsToTest[Math.floor(Math.random()*k.intervalsToTest.length)];if(e&&JSON.stringify(a.name)===JSON.stringify(e.answer))continue;const o=i.midi+a.semitones,l=[];if([-2,-1,0,1,2].forEach(e=>{const t=r+e;t>=0&&t<6&&Xa[t].forEach((e,n)=>{const i=Math.abs(n-s)<=4;e.midi===o&&n<12&&i&&(t!==r||n!==s)&&l.push({string:6-t,fret:n,label:e.note})})}),l.length>0){const e=l[Math.floor(Math.random()*l.length)];t={notes:[{string:6-r,fret:s,label:i.note,isRoot:!0},e],answer:a.name}}}return t||e}),i(e=>e+1),c({message:"",type:""}),f({quality:null,number:null}),d(!1)},[k.intervalsToTest]);(0,e.useEffect)(()=>(r(0),i(0),b([]),C(),()=>clearTimeout(g.current)),[C]);const N=(0,e.useCallback)(()=>{if(u||!a)return;const e=a.answer;let t=!1;if("Tritone"===h.number?t="Tritone"===e.number:"Unison / Octave"===h.number?"Perfect"!==h.quality||"Unison"!==e.number&&"Octave"!==e.number||(t=!0):h.quality===e.quality&&h.number===e.number&&(t=!0),t)r(e=>e+1),c({message:"Correct!",type:"correct"});else{const t="Tritone"===e.number?"a Tritone":"a ".concat(e.quality," ").concat(e.number);c({message:"Incorrect! It was ".concat(t,"."),type:"incorrect"})}d(!0),p&&(g.current=setTimeout(C,2e3))},[u,h,a,p,C]);(0,e.useEffect)(()=>{h.quality&&h.number&&!u&&N()},[h,N,u]);const T=(e,t)=>{u||null!==y||f("Tritone"===t?{quality:"Tritone",number:"Tritone"}:n=>O(O({},n),{},{[e]:t}))},j=e=>{x(t=>{const n=t+e;return n>=0&&n<v.length?n:t})},A=null!==y,E=A?v[y]:a,M=u||A;return E?(0,va.jsxs)("div",{className:"bg-slate-800 p-4 md:p-8 rounded-lg w-full max-w-2xl mx-auto text-center",children:[(0,va.jsxs)(ka,{isOpen:_,onClose:()=>w(!1),title:"How to Play: Intervals on Fretboard",children:[(0,va.jsx)("p",{children:"A diagram of a guitar fretboard will be displayed with two notes."}),(0,va.jsx)("p",{children:"The green note marked 'R' is the **root note**."}),(0,va.jsx)("p",{children:"Your goal is to identify the interval between the root note and the second note by its shape."}),(0,va.jsxs)("div",{className:"p-3 bg-slate-800 rounded-lg border border-slate-600",children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300",children:"Special Note on Tritones:"}),(0,va.jsx)("p",{className:"text-sm mt-1",children:"The 'Tritone' button represents the augmented 4th/diminished 5th. Since it's a unique interval, selecting 'Tritone' counts as a complete answer without needing to select a quality."})]}),(0,va.jsxs)("div",{className:"p-3 bg-slate-800 rounded-lg border border-slate-600",children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300",children:"Intervals Tested:"}),(0,va.jsxs)("p",{className:"text-sm mt-1",children:[S,"."]})]})]}),(0,va.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("h1",{className:"text-2xl md:text-3xl font-extrabold text-indigo-300",children:A?"Reviewing Question ".concat(y+1):"Intervals on Fretboard"}),(0,va.jsx)(Sa,{onClick:()=>w(!0)})]}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[v.length>0&&(0,va.jsx)("button",{onClick:()=>{v.length>0&&(clearTimeout(g.current),x(v.length-1))},disabled:A,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-3 rounded-lg text-sm disabled:opacity-50",children:"Review History"}),(0,va.jsx)("button",{onClick:()=>{const e=prompt("Enter any remarks for this session:","Score: ".concat(n," / ").concat(s));null!==e&&(t({game:"Interval Fretboard Quiz",date:(new Date).toLocaleDateString(),remarks:e||"No remarks."}),alert("Session logged!"))},className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded-lg text-sm",children:"Log Session"})]})]}),(0,va.jsxs)("div",{className:"text-xl mb-4 text-gray-300",children:["Score: ",n," / ",s>0?s-1:0]}),(0,va.jsx)($a,{notesToDisplay:E.notes,showLabels:A||u,startFret:0,fretCount:12}),(0,va.jsx)("div",{className:"text-lg font-bold my-4 min-h-[28px] ".concat("correct"===l.type?"text-green-400":"text-red-400"),children:A?"The correct answer was ".concat("Tritone"===E.answer.number?"a Tritone":"a ".concat(E.answer.quality," ").concat(E.answer.number),"."):l.message||(0,va.jsx)(va.Fragment,{children:"\xa0"})}),(0,va.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-4",children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-3",children:"Quality"}),(0,va.jsx)("div",{className:"flex flex-col gap-2",children:k.qualities.map(e=>{const t=M||"Augmented"===e||"Diminished"===e;return(0,va.jsx)("button",{onClick:()=>T("quality",e),disabled:t,className:"p-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(h.quality!==e||A?"bg-teal-600 hover:bg-teal-500":"bg-indigo-600 text-white ring-2 ring-white"),children:e},e)})})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-3",children:"Number"}),(0,va.jsx)("div",{className:"grid grid-cols-2 gap-2",children:k.numericButtons.map(e=>{const t=h.number!==e||A?"bg-teal-600 hover:bg-teal-500":"bg-indigo-600 text-white ring-2 ring-white";return(0,va.jsx)("button",{onClick:()=>T("number",e),disabled:M,className:"p-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(t),children:e},e)})})]})]}),(0,va.jsx)("div",{className:"mt-4 min-h-[52px] flex justify-center items-center gap-4",children:A?(0,va.jsxs)("div",{className:"flex items-center justify-center gap-4 w-full",children:[(0,va.jsx)("button",{onClick:()=>j(-1),disabled:0===y,className:"bg-slate-600 hover:bg-slate-500 text-white font-bold py-3 px-4 rounded-lg text-lg disabled:opacity-50",children:"Prev"}),(0,va.jsx)("button",{onClick:()=>x(null),className:"flex-grow max-w-xs bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 px-4 rounded-lg text-xl",children:"Return to Quiz"}),(0,va.jsx)("button",{onClick:()=>j(1),disabled:y===v.length-1,className:"bg-slate-600 hover:bg-slate-500 text-white font-bold py-3 px-4 rounded-lg text-lg disabled:opacity-50",children:"Next"})]}):(0,va.jsx)(va.Fragment,{children:u&&!p&&(0,va.jsx)("button",{onClick:C,className:"flex-grow max-w-xs bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-4 rounded-lg text-xl animate-pulse",children:"Next Question"})})}),(0,va.jsx)("div",{className:"w-full border-t border-slate-600 pt-4 mt-6",children:(0,va.jsxs)("div",{className:"flex justify-center items-center gap-4",children:[(0,va.jsx)("label",{htmlFor:"auto-advance",className:"font-semibold text-lg text-gray-300",children:"Auto-Advance:"}),(0,va.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",id:"auto-advance",checked:p,onChange:()=>m(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})})]}):(0,va.jsx)("div",{children:"Loading..."})},Ka={0:"1",1:"b2",2:"2",3:"b3",4:"3",5:"4",6:"#4/b5",7:"5",8:"b6",9:"6",10:"b7",11:"7"},Ja=["C","D","E","F","G","A","B"],eo={C:0,D:2,E:4,F:5,G:7,A:9,B:11},to={Major:[0,2,4,5,7,9,11],"Natural Minor":[0,2,3,5,7,8,10],"Harmonic Minor":[0,2,3,5,7,8,11],"Melodic Minor":[0,2,3,5,7,9,11]},no={Major_Triads:["Major","Minor","Minor","Major","Major","Minor","Diminished"],"Natural Minor_Triads":["Minor","Diminished","Major","Minor","Minor","Major","Major"],"Harmonic Minor_Triads":["Minor","Diminished","Augmented","Minor","Major","Major","Diminished"],"Melodic Minor_Triads":["Minor","Minor","Augmented","Major","Major","Diminished","Diminished"],Major_7ths:["Major 7th","Minor 7th","Minor 7th","Major 7th","Dominant 7th","Minor 7th","Half-Diminished 7th"],"Natural Minor_7ths":["Minor 7th","Half-Diminished 7th","Major 7th","Minor 7th","Minor 7th","Major 7th","Dominant 7th"],"Harmonic Minor_7ths":["Minor-Major 7th","Half-Diminished 7th","Augmented Major 7th","Minor 7th","Dominant 7th","Major 7th","Diminished 7th"],"Melodic Minor_7ths":["Minor-Major 7th","Minor 7th","Augmented Major 7th","Dominant 7th","Dominant 7th","Half-Diminished 7th","Half-Diminished 7th"]},ro={Major:"",Minor:"m",Diminished:"dim",Augmented:"+","Major 7th":"maj7","Minor 7th":"m7","Dominant 7th":"7","Half-Diminished 7th":"m7b5","Diminished 7th":"\xb07","Minor-Major 7th":"m(maj7)","Augmented Major 7th":"+maj7",Sus2:"sus2",Sus4:"sus4"},so=["I","II","III","IV","V","VI","VII"],io={Major:{intervals:to.Major},"Natural Minor":{intervals:to["Natural Minor"]},"Harmonic Minor":{intervals:to["Harmonic Minor"]},"Melodic Minor":{intervals:to["Melodic Minor"]}},ao={Major:{intervals:[0,4,7],quality:"Major"},Minor:{intervals:[0,3,7],quality:"Minor"},Diminished:{intervals:[0,3,6],quality:"Diminished"},Augmented:{intervals:[0,4,8],quality:"Augmented"},"Major 7th":{intervals:[0,4,7,11],quality:"Major 7th"},"Minor 7th":{intervals:[0,3,7,10],quality:"Minor 7th"},"Dominant 7th":{intervals:[0,4,7,10],quality:"Dominant 7th"},"Half-Diminished 7th":{intervals:[0,3,6,10],quality:"Half-Diminished 7th"},"Diminished 7th":{intervals:[0,3,6,9],quality:"Diminished 7th"},"Minor-Major 7th":{intervals:[0,3,7,11],quality:"Minor-Major 7th"},"Augmented Major 7th":{intervals:[0,4,8,11],quality:"Augmented Major 7th"},Sus2:{intervals:[0,2,7],quality:"Sus"},Sus4:{intervals:[0,5,7],quality:"Sus"}},oo={C:48,"C#":49,Db:49,D:50,"D#":51,Eb:51,E:52,F:53,"F#":54,Gb:54,G:55,"G#":56,Ab:56,A:57,"A#":58,Bb:58,B:59},lo=(e,t,n)=>{const r=((e,t)=>{const n=to[t];if(!n)return[];const r=oo[e];if(void 0===r)return[];const s=e.charAt(0),i=Ja.indexOf(s);return n.map((e,t)=>{const n=Ja[(i+t)%7],s=r+e;let a=eo[n]+12*Math.floor(s/12);Math.abs(s-a)>6&&(s>a?a+=12:a-=12),Math.abs(s-(a-12))<Math.abs(s-a)&&(a-=12),Math.abs(s-(a+12))<Math.abs(s-a)&&(a+=12);const o=s-a;let l="";return 1===o?l="#":2===o?l="##":-1===o?l="b":-2===o&&(l="bb"),"".concat(n).concat(l)})})(e,t),s="".concat(t,"_").concat(n),i=no[s];return r.length&&i?r.map((e,t)=>{var n;const r=i[t],s=null!==(n=ro[r])&&void 0!==n?n:"";return{roman:so[t],name:"".concat(e).concat(s),root:e,quality:r,type:"diatonic"}}):[]},co=["movedFret","movedString"],uo=["movedFret","movedString"],ho=()=>{const[t,n]=(0,e.useState)("C"),[r,s]=(0,e.useState)("Scale"),[i,a]=(0,e.useState)("Major"),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(0),[d,h]=(0,e.useState)(15),[f,p]=(0,e.useState)("degree"),[m,g]=(0,e.useState)({1:{color:"#ef4444",active:!0},b2:{color:"#f97316",active:!1},2:{color:"#a3e635",active:!1},b3:{color:"##ec4899",active:!1},3:{color:"#22c55e",active:!1},4:{color:"#14b8a6",active:!1},"#4/b5":{color:"#6b7280",active:!1},5:{color:"#eab308",active:!1},b6:{color:"#8b5cf6",active:!1},6:{color:"#a855f7",active:!1},b7:{color:"#3b82f6",active:!1},7:{color:"#7dd3fc",active:!1}}),[v,b]=(0,e.useState)(!0),[y,x]=(0,e.useState)(null),[_,w]=(0,e.useState)(""),[k,S]=(0,e.useState)("#ffffff"),[C,N]=(0,e.useState)(!1),[T,j]=(0,e.useState)(!1),A=(0,e.useRef)({clickTimeout:null,lastClickTimestamp:0,clickedNote:null}),[E,M]=(0,e.useState)(null),P=(0,e.useRef)(!1),D=e=>{const t=O({},m);Object.keys(t).forEach(n=>{t[n].active=e}),g(t)};(0,e.useEffect)(()=>{a("Scale"===r?Object.keys(io)[0]:Object.keys(ao)[0])},[r]),(0,e.useEffect)(()=>{const e=oo[t];if(void 0!==e)if(v)l(t=>t.map(t=>{const n=(t.midi-e)%12,r=Ka[n<0?n+12:n]||"?",s=t.midi%12===e%12;return O(O({},t),{},{degree:r,isRoot:s})}));else{var n;const e=null===(n=("Scale"===r?io:ao)[i])||void 0===n?void 0:n.intervals;if(e){const n=((e,t,n)=>{const r=oo[e];if(void 0===r)return console.error("Invalid root note name"),[];const s=new Set,i=[-2,-1,0,1,2,3];t.forEach(e=>{i.forEach(t=>{s.add(r+e+12*t)})});const a=[];return n.forEach((e,t)=>{e.forEach((e,n)=>{if(s.has(e.midi)){const s=(e.midi-r)%12,i=Ka[s<0?s+12:s];a.push({string:6-t,fret:n,label:e.note,midi:e.midi,isRoot:e.midi%12===r%12,degree:i})}})}),a})(t,e,Xa),r=n.map(e=>O(O({},e),{},{overrideColor:null,overrideLabel:null}));l(r)}}},[t,r,i,v]),(0,e.useEffect)(()=>{const e=()=>{P.current=!1};window.addEventListener("mouseup",e);const t=A.current;return()=>{window.removeEventListener("mouseup",e),clearTimeout(t.clickTimeout)}},[]);const I="Scale"===r?Object.keys(io):Object.keys(ao);return(0,va.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,va.jsx)(ka,{isOpen:C,onClose:()=>N(!1),title:"Fretboard Diagram Maker Guide",children:(0,va.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"Generator Mode"}),(0,va.jsx)("p",{children:"Use the dropdowns to automatically generate a diagram for any scale or chord. The diagram will update as you change the root note, type, or name."})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"Customize Mode"}),(0,va.jsx)("p",{children:'Click the "Customize Diagram" button to start with a blank canvas or lock the current diagram for editing. In this mode:'}),(0,va.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Add Note:"})," Click any empty spot on the fretboard. The new note's degree will be automatically calculated relative to the selected root note."]}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Delete Note:"})," Single-click an existing note."]}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Edit Note:"})," Double-click an existing note to change its color or label."]}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Move Note:"})," Click and drag a note to any other fret or string. Note that this won't change the name or scale degree written inside that note!"]}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Change Root Note:"})," The Root Note dropdown is always active! Change it at any time to see the scale degrees update instantly for your custom diagram."]})]})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"Display & Export"}),(0,va.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Sliders:"}),' Use the "Start Fret" and "Fret Count" sliders to focus on a specific area of the fretboard.']}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Advanced Options:"}),' Expand this section to toggle between "Name" and "Degree" labels, highlight specific degrees, or choose a white background for your PNG export (great for printing).']}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Export/Print:"})," Use the buttons in the header to export your diagram as a high-resolution PNG image or to print it directly."]})]})]})]})}),y&&(0,va.jsx)(ka,{isOpen:!!y,onClose:()=>{P.current||x(null)},title:"Edit Note (".concat(y.label,")"),children:(0,va.jsxs)("div",{onMouseDown:()=>P.current=!0,children:[(0,va.jsxs)("div",{className:"space-y-4",children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{htmlFor:"note-label",className:"block text-sm font-medium text-gray-300",children:"Custom Label"}),(0,va.jsx)("input",{type:"text",id:"note-label",value:_,onChange:e=>w(e.target.value),className:"mt-1 w-full p-2 rounded-md bg-slate-600 text-white"})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{htmlFor:"note-color",className:"block text-sm font-medium text-gray-300",children:"Custom Color"}),(0,va.jsx)("input",{type:"color",id:"note-color",value:k,onChange:e=>S(e.target.value),className:"mt-1 w-full h-10 p-1 border-none rounded-md cursor-pointer"})]})]}),(0,va.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,va.jsx)("button",{onClick:()=>x(null),className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg",children:"Cancel"}),(0,va.jsx)("button",{onClick:()=>{y&&(l(e=>e.map(e=>e.string===y.string&&e.fret===y.fret?O(O({},e),{},{overrideLabel:_,overrideColor:k}):e)),x(null))},className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg",children:"Save Changes"})]})]})}),(0,va.jsxs)("div",{className:"w-full flex justify-between items-center gap-4 mb-6",children:[(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("h2",{className:"text-3xl font-extrabold text-indigo-300",children:"Fretboard Diagram Maker"}),(0,va.jsx)(Sa,{onClick:()=>N(!0)})]}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("button",{onClick:()=>{const e=document.getElementById("fretboard-diagram-svg");if(!e)return void console.error("Fretboard SVG element not found!");let t=(new XMLSerializer).serializeToString(e);T&&(t=t.replace(/fill="white"/g,'fill="#111827"'));const n=document.createElement("canvas"),r=n.getContext("2d"),s=e.viewBox.baseVal.width,i=e.viewBox.baseVal.height;n.width=2*s,n.height=2*i,r.fillStyle=T?"#ffffff":"#1e293b",r.fillRect(0,0,n.width,n.height);const a=new Image,o=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),l=URL.createObjectURL(o);a.onload=()=>{r.scale(2,2),r.drawImage(a,0,0,s,i);const e=n.toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="fretboard-diagram.png",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(l)},a.src=l},className:"bg-blue-700 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Export as PNG"}),(0,va.jsx)("button",{onClick:()=>window.print(),className:"bg-gray-500 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Print Diagram"})]})]}),(0,va.jsx)("div",{className:"w-full mb-8",id:"printable-diagram",children:(0,va.jsx)($a,{notesToDisplay:o,startFret:c,fretCount:d,showLabels:!0,labelType:f,colorMap:m,onNoteMouseDown:v?(e,t)=>{var n,r;if(!v||y)return;t.preventDefault();const s=Date.now();if(s-A.current.lastClickTimestamp<300&&e.string===(null===(n=A.current.clickedNote)||void 0===n?void 0:n.string)&&e.fret===(null===(r=A.current.clickedNote)||void 0===r?void 0:r.fret))return clearTimeout(A.current.clickTimeout),A.current.lastClickTimestamp=0,A.current.clickedNote=null,void(e=>{x(e),w(e.overrideLabel||("degree"===f?e.degree:e.label));const t=m[e.degree],n=e.isRoot?"#ef4444":"#3b82f6",r=t&&t.active?t.color:n;S(e.overrideColor||r)})(e);A.current.lastClickTimestamp=s,A.current.clickedNote=e,M({note:e,initialX:t.clientX,initialY:t.clientY,moved:!1})}:null,onBoardMouseMove:E&&!y?e=>{if(!E)return;e.preventDefault();const t=e.clientX-E.initialX,n=e.clientY-E.initialY;if(!E.moved&&(Math.abs(t)>5||Math.abs(n)>5)&&M(e=>O(O({},e),{},{moved:!0})),E.moved){const e=(800-(0===c?10:0))/d,r=Math.round(t/e);let s=E.note.fret+r;s<0&&(s=0),s>24&&(s=24);const i=40,a=Math.round(n/i);let o=E.note.string+a;o<1&&(o=1),o>6&&(o=6),l(e=>e.map(e=>e.string===E.note.string&&e.fret===E.note.fret?O(O({},e),{},{movedFret:s,movedString:o}):e))}}:null,onBoardMouseUp:E&&!y?()=>{if(E){if(E.moved){const e=o.find(e=>e.string===E.note.string&&e.fret===E.note.fret);if(e&&void 0!==e.movedFret&&void 0!==e.movedString){const t=e.movedFret,n=e.movedString;if(!o.some(e=>e.string===n&&e.fret===t&&!(e.string===E.note.string&&e.fret===E.note.fret))&&t>=0&&t<=24){const r=Xa[6-n][t];l(s=>s.map(s=>{if(s.string===e.string&&s.fret===e.fret){const{movedFret:e,movedString:i}=s;return O(O(O({},$e(s,co)),r),{},{string:n,fret:t})}return s}))}else l(e=>e.map(e=>{const{movedFret:t,movedString:n}=e;return $e(e,uo)}))}}else A.current.clickTimeout=setTimeout(()=>{var e;e=E.note,l(t=>t.filter(t=>!(t.string===e.string&&t.fret===e.fret)))},250);M(null)}}:null,onBoardClick:v?(e,n)=>{var r;if(!v)return;if(o.some(t=>t.string===e&&t.fret===n))return;const s=null===(r=Xa[6-e])||void 0===r?void 0:r[n];if(s){const r=oo[t],i=(s.midi-r)%12,a=Ka[i<0?i+12:i]||"?",o={string:e,fret:n,label:s.note,midi:s.midi,isRoot:s.midi%12===r%12,degree:a,overrideColor:null,overrideLabel:null};l(e=>[...e,o])}}:null,draggingNote:null===E||void 0===E?void 0:E.note})}),(0,va.jsxs)("div",{id:"controls-panel",className:"w-full max-w-2xl bg-slate-700 p-4 rounded-lg flex flex-col items-center gap-4",children:[(0,va.jsxs)("div",{className:"w-full flex flex-col md:flex-row items-center gap-4",children:[(0,va.jsxs)("div",{className:"flex-1 w-full",children:[(0,va.jsx)("label",{htmlFor:"root-note",className:"block text-sm font-medium text-gray-300 mb-1",children:"Root Note"}),(0,va.jsx)("select",{id:"root-note",value:t,onChange:e=>n(e.target.value),className:"w-full p-2 rounded-md bg-slate-600 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[{name:"C",value:"C"},{name:"F",value:"F"},{name:"Bb",value:"Bb"},{name:"Eb",value:"Eb"},{name:"Ab",value:"Ab"},{name:"Db",value:"Db"},{name:"F#",value:"F#"},{name:"B",value:"B"},{name:"E",value:"E"},{name:"A",value:"A"},{name:"D",value:"D"},{name:"G",value:"G"}].map(e=>(0,va.jsx)("option",{value:e.value,children:e.name},e.value))})]}),(0,va.jsxs)("div",{className:"flex-1 w-full",children:[(0,va.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-300 mb-1",children:"Type"}),(0,va.jsxs)("select",{id:"type",value:r,onChange:e=>s(e.target.value),disabled:v,className:"w-full p-2 rounded-md bg-slate-600 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,va.jsx)("option",{value:"Scale",children:"Scale"}),(0,va.jsx)("option",{value:"Chord",children:"Chord"})]})]}),(0,va.jsxs)("div",{className:"flex-1 w-full",children:[(0,va.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-1",children:[r," Name"]}),(0,va.jsx)("select",{id:"name",value:i,onChange:e=>a(e.target.value),disabled:v,className:"w-full p-2 rounded-md bg-slate-600 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:I.map(e=>(0,va.jsx)("option",{value:e,children:e},e))})]})]}),(0,va.jsxs)("div",{className:"w-full pt-4 border-t border-slate-600 mt-4 flex gap-2",children:[(0,va.jsx)("button",{onClick:()=>{l([]),b(!0)},className:"flex-1 bg-red-700 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg",children:"Clear Board"}),v?(0,va.jsx)("button",{onClick:()=>b(!1),className:"flex-1 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg",children:"Return to Generator"}):(0,va.jsx)("button",{onClick:()=>b(!0),className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white font-bold py-2 px-4 rounded-lg",children:"Customize Diagram"})]}),v&&(0,va.jsx)("p",{className:"text-xs text-center text-gray-400",children:"In Customize Mode: Click an empty spot to add, single-click to delete, double-click to edit, or drag to move."}),(0,va.jsxs)("div",{className:"flex justify-between items-center gap-4 w-full pt-4 border-t border-slate-600 mt-4",children:[(0,va.jsxs)("div",{className:"flex-1",children:[(0,va.jsxs)("label",{htmlFor:"start-fret",className:"block text-sm font-medium text-gray-300 mb-1",children:["Start Fret: ",(0,va.jsx)("span",{className:"font-bold text-teal-300",children:c})]}),(0,va.jsx)("input",{id:"start-fret",type:"range",min:"0",max:"12",value:c,onChange:e=>u(Number(e.target.value)),className:"w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer"})]}),(0,va.jsxs)("div",{className:"flex-1",children:[(0,va.jsxs)("label",{htmlFor:"fret-count",className:"block text-sm font-medium text-gray-300 mb-1",children:["Fret Count: ",(0,va.jsx)("span",{className:"font-bold text-teal-300",children:d})]}),(0,va.jsx)("input",{id:"fret-count",type:"range",min:"3",max:"22",value:d,onChange:e=>h(Number(e.target.value)),className:"w-full h-2 bg-slate-600 rounded-lg appearance-none cursor-pointer"})]})]}),(0,va.jsxs)("details",{className:"w-full",open:!1,children:[(0,va.jsx)("summary",{className:"text-lg font-semibold text-teal-300 cursor-pointer hover:text-teal-200 transition-colors py-2 border-t border-slate-600 mt-4",children:"Advanced Display Options"}),(0,va.jsxs)("div",{className:"w-full pt-4",children:[(0,va.jsxs)("div",{className:"flex justify-between items-center gap-4 mb-2",children:[(0,va.jsxs)("div",{className:"flex-1",children:[(0,va.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Label Display"}),(0,va.jsxs)("div",{className:"flex bg-slate-600 rounded-md p-1",children:[(0,va.jsx)("button",{onClick:()=>p("name"),className:"flex-1 rounded-md text-sm py-1 ".concat("name"===f?"bg-blue-600 text-white":"text-gray-300"),children:"Name"}),(0,va.jsx)("button",{onClick:()=>p("degree"),className:"flex-1 rounded-md text-sm py-1 ".concat("degree"===f?"bg-blue-600 text-white":"text-gray-300"),children:"Degree"})]})]}),(0,va.jsxs)("div",{className:"flex-1 flex justify-end gap-2",children:[(0,va.jsx)("button",{onClick:()=>D(!0),className:"text-sm bg-slate-600 hover:bg-slate-500 py-1 px-3 rounded-md",children:"All"}),(0,va.jsx)("button",{onClick:()=>D(!1),className:"text-sm bg-slate-600 hover:bg-slate-500 py-1 px-3 rounded-md",children:"None"})]})]}),(0,va.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-4 gap-y-2 bg-slate-800/50 p-2 rounded-md",children:Object.entries(m).map(e=>{let[t,{color:n,active:r}]=e;return(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("input",{type:"checkbox",id:"toggle-".concat(t),checked:r,onChange:()=>(e=>{g(t=>O(O({},t),{},{[e]:O(O({},t[e]),{},{active:!t[e].active})}))})(t),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,va.jsx)("input",{type:"color",value:n,onChange:e=>((e,t)=>{g(n=>O(O({},n),{},{[e]:O(O({},n[e]),{},{color:t})}))})(t,e.target.value),className:"w-6 h-6 p-0 border-none rounded-md cursor-pointer bg-transparent"}),(0,va.jsx)("label",{htmlFor:"toggle-".concat(t),className:"text-sm font-bold text-gray-300 w-12 text-left",children:t})]},t)})}),(0,va.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-700",children:(0,va.jsxs)("label",{htmlFor:"png-bg",className:"flex items-center gap-2 cursor-pointer",children:[(0,va.jsx)("input",{id:"png-bg",type:"checkbox",checked:T,onChange:e=>j(e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,va.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Use white background for PNG export"})]})})]})]})]})]})},fo={Major:[["I","V","vi","IV"],["I","IV","V","I"],["vi","IV","I","V"],["I","vi","ii","V"]],Minor:[["i","VI","III","VII"],["i","iv","v","i"],["i","iv","VII","III"],["ii\xb0","v","i","i"]]},po=e=>{let{title:t,isOpen:n,onToggle:r,children:s}=e;return(0,va.jsxs)("div",{className:"border-t border-slate-600/80 pt-3 mt-3",children:[(0,va.jsxs)("button",{onClick:r,className:"w-full flex justify-between items-center text-left text-lg font-bold text-teal-300 hover:text-teal-200",children:[(0,va.jsx)("span",{children:t}),(0,va.jsx)("span",{className:"text-xl",children:n?"\u2212":"+"})]}),n&&(0,va.jsx)("div",{className:"pt-3 space-y-4",children:s})]})},mo=()=>{const{setMetronomeSchedule:t,addLogEntry:n,bpm:r,countdownClicks:s,setCountdownClicks:i}=ya(),[a,o]=(0,e.useState)("C"),[l,c]=(0,e.useState)("Major"),[u,d]=(0,e.useState)(4),[h,f]=(0,e.useState)(1),[p,m]=(0,e.useState)("Triads"),[g,v]=(0,e.useState)(!0),[b,y]=(0,e.useState)(!1),[x,_]=(0,e.useState)("all"),[w,k]=(0,e.useState)(!1),[S,C]=(0,e.useState)(u),[N,T]=(0,e.useState)("both"),[j,A]=(0,e.useState)(!1),[E,M]=(0,e.useState)(!1),[P,D]=(0,e.useState)(3),[I,R]=(0,e.useState)([]),[F,L]=(0,e.useState)({general:!0,options:!1,display:!1,automation:!1}),V=e=>{L(t=>O(O({},t),{},{[e]:!t[e]}))},z=(0,e.useCallback)(()=>{let e=lo(a,l,"Tetrads"===p?"7ths":"Triads"),t=[...e];b||(t=t.filter(e=>!e.quality.includes("Diminished"))),"major"===x?t=t.filter(e=>{const t=e.quality;return t.includes("Major")||t.includes("Dominant")||t.includes("Augmented")}):"minor"===x&&(t=t.filter(e=>{const t=e.quality;return t.includes("Minor")||t.includes("Half-Diminished")}));const n=g&&"all"===x,r=[];for(let s=0;s<h;s++){const s=[];if(n&&t.length>0){const t=fo["Major"===l?"Major":"Minor"]||fo.Major,n=t[Math.floor(Math.random()*t.length)],r=[];for(let e=0;e<u;e++)r.push(n[e%n.length]);for(const i of r){let t=e[so.indexOf(i.toUpperCase())];t&&("Major"===l||["i","ii\xb0","v","vii\xb0"].includes(i)?t.roman=i:t.roman=i.toUpperCase(),s.push(t))}}else if(t.length>0){let e=null;for(let n=0;n<u;n++){if(0===t.length)continue;let n;do{n=t[Math.floor(Math.random()*t.length)]}while(n===e&&t.length>1);s.push(n),e=n}}r.push(s)}r.every(e=>0===e.length)||R(r)},[a,l,p,u,h,g,b,x]),q=(0,e.useCallback)(()=>{setTimeout(z,0)},[z]);(0,e.useEffect)(()=>{z()},[z]),(0,e.useEffect)(()=>{C(u)},[u]),(0,e.useEffect)(()=>{t(w?{callback:q,interval:S}:null)},[w,S,q,t]),(0,e.useEffect)(()=>{const e=e=>{"Enter"===e.key&&(e.preventDefault(),z())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[z]);const B=e=>{_(e),"all"!==e&&v(!1)},U=(0,va.jsxs)(va.Fragment,{children:[(0,va.jsxs)(po,{title:"General Settings",isOpen:F.general,onToggle:()=>V("general"),children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-1",children:"Root Note"}),(0,va.jsx)("select",{value:a,onChange:e=>o(e.target.value),className:"w-full p-2 rounded-md bg-slate-600 text-white",children:["C","F","Bb","Eb","Ab","Db","F#","B","E","A","D","G"].map(e=>(0,va.jsx)("option",{value:e,children:e},e))})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-1",children:"Key / Scale"}),(0,va.jsx)("select",{value:l,onChange:e=>c(e.target.value),className:"w-full p-2 rounded-md bg-slate-600 text-white",children:["Major","Natural Minor","Harmonic Minor","Melodic Minor"].map(e=>(0,va.jsx)("option",{value:e,children:e},e))})]}),(0,va.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-1",children:"Chords/Line"}),(0,va.jsx)("input",{type:"number",value:u,onChange:e=>d(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-full p-2 rounded-md bg-slate-600 text-white"})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-1",children:"Lines"}),(0,va.jsx)("input",{type:"number",value:h,onChange:e=>f(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-full p-2 rounded-md bg-slate-600 text-white"})]})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-1",children:"Generation Method"}),(0,va.jsxs)("div",{className:"flex bg-slate-600 rounded-md p-1",children:[(0,va.jsx)("button",{onClick:()=>v(!0),className:"flex-1 rounded-md text-sm py-1 ".concat(g?"bg-blue-600 text-white":"text-gray-300"," disabled:bg-slate-800 disabled:text-gray-500 disabled:cursor-not-allowed"),disabled:"all"!==x,title:"all"!==x?"Not available with quality filters":"",children:"Common"}),(0,va.jsx)("button",{onClick:()=>v(!1),className:"flex-1 rounded-md text-sm py-1 ".concat(g?"text-gray-300":"bg-blue-600 text-white"),children:"Random"})]})]})]}),(0,va.jsxs)(po,{title:"Chord Options",isOpen:F.options,onToggle:()=>V("options"),children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-1",children:"Chord Complexity"}),(0,va.jsxs)("div",{className:"flex bg-slate-600 rounded-md p-1",children:[(0,va.jsx)("button",{onClick:()=>m("Triads"),className:"flex-1 rounded-md text-sm py-1 ".concat("Triads"===p?"bg-blue-600 text-white":"text-gray-300"),children:"Triads"}),(0,va.jsx)("button",{onClick:()=>m("Tetrads"),className:"flex-1 rounded-md text-sm py-1 ".concat("Tetrads"===p?"bg-blue-600 text-white":"text-gray-300"),children:"Tetrads"})]})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-1",children:"Chord Quality"}),(0,va.jsxs)("div",{className:"flex bg-slate-600 rounded-md p-1",children:[(0,va.jsx)("button",{onClick:()=>B("all"),className:"flex-1 rounded-md text-sm py-1 ".concat("all"===x?"bg-blue-600 text-white":"text-gray-300"),children:"All"}),(0,va.jsx)("button",{onClick:()=>B("major"),className:"flex-1 rounded-md text-sm py-1 ".concat("major"===x?"bg-blue-600 text-white":"text-gray-300"),children:"Major"}),(0,va.jsx)("button",{onClick:()=>B("minor"),className:"flex-1 rounded-md text-sm py-1 ".concat("minor"===x?"bg-blue-600 text-white":"text-gray-300"),children:"Minor"})]})]}),(0,va.jsxs)("label",{className:"flex items-center justify-between gap-2 cursor-pointer pt-1",children:[(0,va.jsx)("span",{className:"font-semibold",children:"Include Diminished"}),(0,va.jsxs)("div",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",checked:b,onChange:()=>y(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),(0,va.jsx)(po,{title:"Display Settings",isOpen:F.display,onToggle:()=>V("display"),children:(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-1",children:"Display Mode"}),(0,va.jsxs)("div",{className:"flex bg-slate-600 rounded-md p-1",children:[(0,va.jsx)("button",{onClick:()=>T("chords"),className:"flex-1 rounded-md text-sm py-1 ".concat("chords"===N?"bg-blue-600 text-white":"text-gray-300"),children:"Chords"}),(0,va.jsx)("button",{onClick:()=>T("degrees"),className:"flex-1 rounded-md text-sm py-1 ".concat("degrees"===N?"bg-blue-600 text-white":"text-gray-300"),children:"Degrees"}),(0,va.jsx)("button",{onClick:()=>T("both"),className:"flex-1 rounded-md text-sm py-1 ".concat("both"===N?"bg-blue-600 text-white":"text-gray-300"),children:"Both"})]})]})}),(0,va.jsxs)(po,{title:"Automation",isOpen:F.automation,onToggle:()=>V("automation"),children:[(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"auto-generate-prog",className:"font-semibold text-lg text-teal-300",children:"Auto-Generate:"}),(0,va.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",id:"auto-generate-prog",checked:w,onChange:()=>k(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"})]})]}),(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"auto-generate-interval-prog",className:"font-semibold ".concat(!w&&"opacity-50"),children:"Every:"}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("input",{type:"number",id:"auto-generate-interval-prog",value:S,onChange:e=>C(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-20 p-2 rounded-md bg-slate-600 text-white text-center ".concat(!w&&"opacity-50"),min:"1",disabled:!w}),(0,va.jsx)("span",{className:"font-semibold ".concat(!w&&"opacity-50"),children:"clicks"})]})]}),(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"countdown-clicks-prog",className:"font-semibold ".concat(!w&&"opacity-50"),children:"Countdown:"}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("input",{type:"number",id:"countdown-clicks-prog",value:s,onChange:e=>i(Math.max(0,parseInt(e.target.value,10)||0)),className:"w-20 p-2 rounded-md bg-slate-600 text-white text-center ".concat(!w&&"opacity-50"),min:"0",max:"7",disabled:!w}),(0,va.jsx)("span",{className:"font-semibold ".concat(!w&&"opacity-50"),children:"clicks"})]})]})]})]});return(0,va.jsxs)("div",{className:"flex flex-col md:flex-row items-start w-full gap-4",children:[(0,va.jsx)(ka,{isOpen:E,onClose:()=>M(!1),title:"Chord Progression Generator Guide",children:(0,va.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,va.jsx)("p",{children:"This tool generates chord progressions based on your selected key, scale, and other options."}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"How It Works"}),(0,va.jsx)("p",{children:'Use the collapsible "Settings & Controls" panel to customize your progression. You can choose a root note and key, how many chords to generate, and filter the types of chords used.'})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"Features"}),(0,va.jsxs)("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Complexity:"})," Switch between basic 3-note triads and richer 4-note tetrads."]}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Filtering:"}),' You can choose to include or exclude diminished chords, or even limit the generator to only use major or minor chords. Note: Filtering by quality will disable "Common" patterns.']}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Display:"})," Change the font size with the slider and switch the display to show chord names, Roman numeral degrees, or both."]}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Auto-Generate:"})," Turn on this feature to get a new set of progressions automatically in time with the metronome, perfect for continuous practice."]})]})]})]})}),(0,va.jsxs)("div",{className:"w-full flex-1 flex flex-col",children:[(0,va.jsxs)("div",{className:"bg-slate-800 p-4 rounded-lg",children:[(0,va.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,va.jsx)("div",{className:"flex-1"}),(0,va.jsxs)("div",{className:"flex-1 flex justify-center items-center gap-2",children:[(0,va.jsx)("h2",{className:"text-2xl text-center font-bold text-indigo-300",children:"Chord Progression Generator"}),(0,va.jsx)(Sa,{onClick:()=>M(!0)})]}),(0,va.jsxs)("div",{className:"flex-1 flex justify-end items-center gap-2",children:[(0,va.jsx)("button",{onClick:()=>{const e=prompt("Enter any remarks for this session:","Practiced chord progressions in ".concat(a," ").concat(l,"."));if(null!==e){const t={game:"Chord Progression Generator",bpm:r||"N/A",date:(new Date).toLocaleDateString(),remarks:e||"No remarks."};n(t),alert("Session logged!")}},className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded-lg text-sm",children:"Log Session"}),(0,va.jsx)("button",{onClick:()=>A(e=>!e),className:"p-2 rounded-md bg-slate-700 hover:bg-slate-600 text-sm font-semibold",title:"Toggle Controls",children:"Controls"})]})]}),(0,va.jsx)("div",{className:"flex flex-col items-center space-y-6 p-4 rounded-lg min-h-[10rem]",children:I.map((e,t)=>(0,va.jsx)("div",{className:"flex flex-wrap justify-center gap-x-8 gap-y-6 items-center",children:e.map((e,t)=>(0,va.jsxs)("div",{className:"text-center shrink-0 flex flex-col items-center justify-center h-24 w-24",children:["chords"===N&&(0,va.jsx)("div",{style:{fontSize:"".concat(P,"rem")},className:"font-bold text-teal-300",children:e.name}),"degrees"===N&&(0,va.jsx)("div",{style:{fontSize:"".concat(P,"rem")},className:"font-bold text-teal-300",children:e.roman}),"both"===N&&(0,va.jsxs)(va.Fragment,{children:[(0,va.jsx)("div",{style:{fontSize:"".concat(P,"rem"),lineHeight:"1.1"},className:"font-bold text-teal-300",children:e.name}),(0,va.jsx)("div",{style:{fontSize:"".concat(.6*P,"rem")},className:"text-gray-200 mt-2",children:e.roman})]})]},t))},t))})]}),(0,va.jsxs)("div",{className:"flex items-center justify-center gap-4 my-6",children:[(0,va.jsx)("label",{htmlFor:"font-size",className:"font-semibold text-lg",children:"Font Size:"}),(0,va.jsx)("input",{type:"range",id:"font-size",min:"1.5",max:"5",step:"0.1",value:P,onChange:e=>D(e.target.value),className:"w-1/2 max-w-xs"})]}),(0,va.jsx)("div",{className:"w-full flex justify-center my-6",children:(0,va.jsx)("button",{onClick:z,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-lg text-xl",children:"Generate New Progression (Enter)"})})]}),(0,va.jsx)("div",{className:"hidden md:block bg-slate-700 rounded-lg transition-all duration-300 ease-in-out ".concat(j?"w-80 p-4":"w-0 p-0 overflow-hidden"),children:(0,va.jsxs)("div",{className:"".concat(!j&&"hidden"),children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300 mb-4",children:"Settings & Controls"}),U]})}),j&&(0,va.jsx)("div",{className:"md:hidden fixed inset-0 z-50 flex justify-center items-center bg-black/60",onClick:()=>A(!1),children:(0,va.jsxs)("div",{className:"w-11/12 max-w-sm bg-slate-800 rounded-2xl p-4 max-h-[85vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,va.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center mb-4",children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300",children:"Settings & Controls"}),(0,va.jsx)("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-white text-2xl font-bold",children:"\xd7"})]}),(0,va.jsx)("div",{className:"flex-grow overflow-y-auto pr-2",children:U})]})})]})},go=()=>{const{addLogEntry:t,setMetronomeSchedule:n,countdownClicks:r,setCountdownClicks:s,countdownMode:i,setCountdownMode:a}=ya(),o=(0,e.useMemo)(()=>({"Unison/Octave":[{name:"Perfect Unison",quality:"Perfect"},{name:"Perfect Octave",quality:"Perfect"}],"2nd":[{name:"Minor 2nd",quality:"Minor"},{name:"Major 2nd",quality:"Major"}],"3rd":[{name:"Minor 3rd",quality:"Minor"},{name:"Major 3rd",quality:"Major"}],"4th":[{name:"Perfect 4th",quality:"Perfect"},{name:"Augmented 4th",quality:"Augmented"}],"5th":[{name:"Diminished 5th",quality:"Diminished"},{name:"Perfect 5th",quality:"Perfect"}],"6th":[{name:"Minor 6th",quality:"Minor"},{name:"Major 6th",quality:"Major"}],"7th":[{name:"Minor 7th",quality:"Minor"},{name:"Major 7th",quality:"Major"}]}),[]),l=(0,e.useMemo)(()=>Object.values(o).flat(),[o]),[c,u]=(0,e.useState)(1),[d,h]=(0,e.useState)([]),[f,p]=(0,e.useState)(4),[m,g]=(0,e.useState)({Perfect:!0,Major:!0,Minor:!0,Augmented:!1,Diminished:!1}),[v,b]=(0,e.useState)(!1),[y,x]=(0,e.useState)(1),[_,w]=(0,e.useState)(!1),[k,S]=(0,e.useState)(!1),C=(0,e.useCallback)(()=>{const e=l.filter(e=>m[e.quality]);if(0===e.length)return void h(["Select a quality"]);let t=[],n=null;for(let r=0;r<c;r++){let r,s=0;do{r=e[Math.floor(Math.random()*e.length)],s++}while(r.name===n&&e.length>1&&s<20);t.push(r.name),n=r.name}h(t)},[c,m,l]),N=(0,e.useCallback)(()=>{setTimeout(C,0)},[C]);(0,e.useEffect)(()=>{C()},[C]),(0,e.useEffect)(()=>{x(c)},[c]),(0,e.useEffect)(()=>{n(v?{callback:N,interval:y}:null)},[v,y,N,n]),(0,e.useEffect)(()=>{const e=e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),C())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[C]);const T=(0,va.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"num-intervals",className:"font-semibold text-lg",children:"Number of Intervals:"}),(0,va.jsx)("input",{type:"number",id:"num-intervals",value:c,onChange:e=>u(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-24 p-2 rounded-md bg-slate-600 text-white text-center",min:"1"})]}),(0,va.jsxs)("div",{className:"pt-4 border-t border-slate-600",children:[(0,va.jsx)("span",{className:"font-semibold text-lg",children:"Include Qualities:"}),(0,va.jsx)("div",{className:"flex flex-col gap-3 mt-2",children:Object.keys(m).map(e=>(0,va.jsxs)("label",{className:"flex items-center justify-between gap-2 cursor-pointer p-2 bg-slate-600 rounded-md",children:[(0,va.jsx)("span",{className:"font-semibold",children:e}),(0,va.jsxs)("div",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",checked:m[e],onChange:()=>(e=>{g(t=>O(O({},t),{},{[e]:!t[e]}))})(e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},e))})]}),(0,va.jsxs)("div",{className:"pt-4 border-t border-slate-600 space-y-4",children:[(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"auto-generate-int",className:"font-semibold text-lg text-teal-300",children:"Auto-Generate:"}),(0,va.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,va.jsx)("input",{type:"checkbox",id:"auto-generate-int",checked:v,onChange:()=>b(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"})]})]}),(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"auto-generate-interval-int",className:"font-semibold text-lg ".concat(!v&&"opacity-50"),children:"Generate every:"}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("input",{type:"number",id:"auto-generate-interval-int",value:y,onChange:e=>x(Math.max(1,parseInt(e.target.value,10)||1)),className:"w-24 p-2 rounded-md bg-slate-600 text-white text-center ".concat(!v&&"opacity-50"),min:"1",disabled:!v}),(0,va.jsx)("span",{className:"font-semibold text-lg ".concat(!v&&"opacity-50"),children:"clicks"})]})]}),(0,va.jsxs)("div",{className:"flex items-center justify-between",children:[(0,va.jsx)("label",{htmlFor:"countdown-clicks-int",className:"font-semibold text-lg ".concat(!v&&"opacity-50"),children:"Countdown:"}),(0,va.jsxs)("div",{className:"flex items-center gap-2",children:[(0,va.jsx)("input",{type:"number",id:"countdown-clicks-int",value:r,onChange:e=>s(Math.max(0,parseInt(e.target.value,10)||0)),className:"w-24 p-2 rounded-md bg-slate-600 text-white text-center ".concat(!v&&"opacity-50"),min:"0",max:"7",disabled:!v}),(0,va.jsx)("span",{className:"font-semibold text-lg ".concat(!v&&"opacity-50"),children:"clicks"})]})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("label",{className:"font-semibold block mb-2 text-lg ".concat(!v&&"opacity-50"),children:"Countdown Mode:"}),(0,va.jsxs)("div",{className:"flex bg-slate-600 rounded-md p-1",children:[(0,va.jsx)("button",{disabled:!v,onClick:()=>a("every"),className:"flex-1 rounded-md text-sm py-1 disabled:cursor-not-allowed ".concat("every"===i?"bg-blue-600 text-white":"text-gray-300"),children:"Every Time"}),(0,va.jsx)("button",{disabled:!v,onClick:()=>a("first"),className:"flex-1 rounded-md text-sm py-1 disabled:cursor-not-allowed ".concat("first"===i?"bg-blue-600 text-white":"text-gray-300"),children:"First Time Only"})]})]})]})]});return(0,va.jsxs)("div",{className:"flex flex-col md:flex-row items-start w-full gap-4",children:[(0,va.jsx)(ka,{isOpen:k,onClose:()=>S(!1),title:"Random Interval Generator Guide",children:(0,va.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,va.jsx)("p",{children:"This tool generates random musical intervals to help train your ear and theoretical knowledge."}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"How It Works"}),(0,va.jsx)("p",{children:'Use the "Generate" button or press the Enter/Space key to get a new interval. You can select which interval qualities (Major, Minor, etc.) you want to include in the randomization from the controls panel.'})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300 mb-1",children:"Features"}),(0,va.jsxs)("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Multiple Intervals:"})," Choose to generate more than one interval at a time for a longer practice sequence. They will appear stacked vertically."]}),(0,va.jsxs)("li",{children:[(0,va.jsx)("strong",{className:"text-teal-300",children:"Auto-Generate:"})," For continuous practice, enable this feature to get a new interval automatically in time with the metronome."]})]})]})]})}),(0,va.jsxs)("div",{className:"w-full flex-1 bg-slate-800 p-4 rounded-lg",children:[(0,va.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,va.jsx)("div",{className:"flex-1"}),(0,va.jsxs)("div",{className:"flex-1 flex justify-center items-center gap-2",children:[(0,va.jsx)("h1",{className:"text-xl md:text-2xl text-center font-bold text-indigo-300",children:"Random Interval Generator"}),(0,va.jsx)(Sa,{onClick:()=>S(!0)})]}),(0,va.jsxs)("div",{className:"flex-1 flex justify-end items-center gap-2",children:[(0,va.jsx)("button",{onClick:()=>{const e=prompt("Enter any remarks for this session:","Practiced random intervals.");null!==e&&(t({game:"Interval Generator",bpm:"N/A",date:(new Date).toLocaleDateString(),remarks:e||"No remarks."}),alert("Session logged!"))},className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded-lg text-sm",children:"Log Session"}),(0,va.jsx)("button",{onClick:()=>w(e=>!e),className:"p-2 rounded-md bg-slate-700 hover:bg-slate-600 text-sm font-semibold",children:"Controls"})]})]}),(0,va.jsx)("div",{className:"w-full p-6 rounded-lg text-center min-h-[150px] flex flex-col justify-center items-center gap-y-4",children:d.map((e,t)=>(0,va.jsx)("span",{className:"font-bold text-teal-300",style:{fontSize:"".concat(f,"rem"),lineHeight:"1.2"},children:e},t))}),(0,va.jsxs)("div",{className:"flex items-center justify-center gap-4 mt-6 mb-8",children:[(0,va.jsx)("label",{htmlFor:"font-size",className:"font-semibold text-lg",children:"Font Size:"}),(0,va.jsx)("input",{type:"range",id:"font-size",min:"1.5",max:"8",step:"0.1",value:f,onChange:e=>p(e.target.value),className:"w-1/2 max-w-xs"})]}),(0,va.jsx)("div",{className:"w-full flex justify-center",children:(0,va.jsx)("button",{onClick:C,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-lg text-xl",children:"Generate (Enter/Space)"})})]}),(0,va.jsx)("div",{className:"hidden md:block bg-slate-700 rounded-lg transition-all duration-300 ease-in-out ".concat(_?"w-80 p-4":"w-0 p-0 overflow-hidden"),children:(0,va.jsxs)("div",{className:"".concat(!_&&"hidden"),children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300 mb-4",children:"Settings & Controls"}),T]})}),_&&(0,va.jsx)("div",{className:"md:hidden fixed inset-0 z-50 flex justify-center items-center bg-black/60",onClick:()=>w(!1),children:(0,va.jsxs)("div",{className:"w-11/12 max-w-sm bg-slate-800 rounded-2xl p-4 max-h-[85vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,va.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center mb-4",children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300",children:"Settings & Controls"}),(0,va.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-white text-2xl font-bold",children:"\xd7"})]}),(0,va.jsx)("div",{className:"flex-grow overflow-y-auto pr-2",children:T})]})})]})},vo=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],bo=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],yo=["C","D","E","F","G","A","B"],xo=[{id:"b",display:"\u266d"},{id:"natural",display:""},{id:"#",display:"\u266f"}],_o={C:0,D:2,E:4,F:5,G:7,A:9,B:11},wo={Major:[0,4,7],Minor:[0,3,7],Diminished:[0,3,6],Augmented:[0,4,8]},ko={"Major 7th":[0,4,7,11],"Minor 7th":[0,3,7,10],"Dominant 7th":[0,4,7,10],"Half-Diminished 7th":[0,3,6,10],"Diminished 7th":[0,3,6,9]},So=(e,t)=>{const n=(e=>{const t=e.charAt(0).toUpperCase(),n=e.substring(1);let r=_o[t];return n.includes("#")&&(r+=n.length),n.includes("b")&&(r-=n.length),r})(e),r=e.charAt(0),s=yo.indexOf(r),i=[0,2,4,6];return t.map((e,t)=>{const r=yo[(s+i[t])%7];let a=(n+e)%12-_o[r]%12;a>6&&(a-=12),a<-6&&(a+=12);let o="";return 1===a?o="#":2===a?o="##":-1===a?o="b":-2===a&&(o="bb"),"".concat(r).concat(o)})},Co=()=>{const{addLogEntry:t}=ya(),[n,r]=(0,e.useState)("mixed"),[s,i]=(0,e.useState)(!1),[a,o]=(0,e.useState)(!1),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)({}),[h,f]=(0,e.useState)({message:"",type:""}),[p,m]=(0,e.useState)(!1),[g,v]=(0,e.useState)(0),[b,y]=(0,e.useState)(0),[x,_]=(0,e.useState)(!0),[w,k]=(0,e.useState)(!1),[S,C]=(0,e.useState)([]),[N,T]=(0,e.useState)(null),[j,A]=(0,e.useState)(!1),E=(0,e.useMemo)(()=>s?O(O({},wo),ko):wo,[s]),M=(0,e.useCallback)(()=>{T(null);let e=null,t=0;do{const r=vo[Math.floor(Math.random()*vo.length)],s=Object.keys(E),i=s[Math.floor(Math.random()*s.length)],o=E[i],l=So(r,o);if(l.every(e=>bo.includes(e))){let t=[...l];if(a&&Math.random()>.3){const e=Math.floor(Math.random()*t.length);e>0&&(t=[...t.slice(e),...t.slice(0,e)])}const s="mixed"===n?Math.random()<.5?"nameTheTriad":"nameTheNotes":n;e={root:r,quality:i,notes:t,rootPositionNotes:l,sortedNotes:[...l].sort(),mode:s}}t++}while(!e&&t<100);e?(c(e),y(e=>e+1),m(!1),f({message:"",type:""}),d({accidental:""})):console.error("Could not generate an answerable question.")},[n,E,a]),P=(0,e.useCallback)(()=>{if(p||!l)return;let e=!1,t="";if("nameTheTriad"===l.mode){const n="".concat(u.noteLetter||"").concat(u.accidental||"");e=n===l.root&&u.quality===l.quality,t="".concat(l.root," ").concat(l.quality)}else{var n;const r=(null===(n=u.notes)||void 0===n?void 0:n.sort())||[];t=l.rootPositionNotes.join(", "),r.length===l.sortedNotes.length&&(e=r.every((e,t)=>e===l.sortedNotes[t]))}e?(v(e=>e+1),f({message:"Correct!",type:"correct"})):f({message:"Incorrect! The answer was ".concat(t,"."),type:"incorrect"}),C(t=>[...t,{question:l,userAnswer:u,wasCorrect:e}]),m(!0),x&&setTimeout(M,2e3)},[p,u,l,x,M]);(0,e.useEffect)(()=>{v(0),y(0),C([]),T(null),E&&Object.keys(E).length>0&&M()},[M,E]);const D=null!==N;(0,e.useEffect)(()=>{const e=e=>{if("Enter"===e.key){if(D)return;p&&!x?M():p||P()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[p,x,D,P,M]);const I=e=>{T(t=>{const n=t+e;return n>=0&&n<S.length?n:t})};if(!l&&null===N)return(0,va.jsx)("div",{children:"Loading..."});const R=D?S[N]:{question:l,userAnswer:u},F=R.question,L=R.userAnswer,V=Object.keys(E),z=F.notes.length,q="bg-teal-600 hover:bg-teal-500",B="bg-indigo-600 text-white",U=(e,t)=>{p||D||d(n=>O(O({},n),{},{[e]:t}))},W=(0,va.jsxs)("div",{className:"space-y-4",children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"font-semibold text-lg text-teal-300 mb-2",children:"Quiz Mode"}),(0,va.jsxs)("div",{className:"space-y-2",children:[(0,va.jsxs)("label",{className:"block p-3 rounded-md cursor-pointer ".concat("nameTheTriad"===n?"bg-blue-600 text-white":"bg-slate-600 hover:bg-slate-500"),children:[(0,va.jsx)("input",{type:"radio",name:"quizMode",value:"nameTheTriad",checked:"nameTheTriad"===n,onChange:e=>r(e.target.value),className:"mr-3"}),"Name the Chord"]}),(0,va.jsxs)("label",{className:"block p-3 rounded-md cursor-pointer ".concat("nameTheNotes"===n?"bg-blue-600 text-white":"bg-slate-600 hover:bg-slate-500"),children:[(0,va.jsx)("input",{type:"radio",name:"quizMode",value:"nameTheNotes",checked:"nameTheNotes"===n,onChange:e=>r(e.target.value),className:"mr-3"}),"Name the Notes"]}),(0,va.jsxs)("label",{className:"block p-3 rounded-md cursor-pointer ".concat("mixed"===n?"bg-blue-600 text-white":"bg-slate-600 hover:bg-slate-500"),children:[(0,va.jsx)("input",{type:"radio",name:"quizMode",value:"mixed",checked:"mixed"===n,onChange:e=>r(e.target.value),className:"mr-3"}),"Mixed Quiz"]})]})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"font-semibold text-lg text-teal-300 mb-2",children:"Options"}),(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer p-2",children:[(0,va.jsx)("input",{type:"checkbox",checked:s,onChange:()=>i(e=>!e),className:"h-5 w-5"}),"Include 7th Chords"]}),(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer p-2",children:[(0,va.jsx)("input",{type:"checkbox",checked:a,onChange:()=>o(e=>!e),className:"h-5 w-5"}),"Include Inversions"]})]})]});return(0,va.jsxs)("div",{className:"flex flex-col md:flex-row items-start w-full gap-4",children:[(0,va.jsx)(ka,{isOpen:w,onClose:()=>k(!1),title:"How to Play: Triad & Tetrads Quiz",children:(0,va.jsxs)("div",{className:"space-y-3",children:[(0,va.jsx)("p",{children:"This quiz tests your ability to identify chords by their notes, and vice-versa."}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300",children:"How It Works"}),(0,va.jsx)("p",{className:"text-sm",children:'A question will appear in the main display. Use the green buttons below to construct your answer, then press "Submit" or the Enter key.'})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h4",{className:"font-bold text-indigo-300",children:"Game Modes & Options"}),(0,va.jsx)("p",{className:"text-sm",children:'Click the "Controls" button to change game settings at any time. You can choose between different quiz modes, and add 7th chords or inversions to make the quiz more challenging. Changing a setting will restart the quiz with a new question.'})]})]})}),(0,va.jsxs)("div",{className:"w-full flex-1 bg-slate-800 p-4 rounded-lg",children:[(0,va.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,va.jsx)("div",{className:"flex-1"}),(0,va.jsxs)("div",{className:"flex-1 flex justify-center items-center gap-2",children:[(0,va.jsx)("h1",{className:"text-2xl text-center font-bold text-indigo-300",children:"Triad & Tetrads Quiz"}),(0,va.jsx)(Sa,{onClick:()=>k(!0)})]}),(0,va.jsxs)("div",{className:"flex-1 flex justify-end items-center gap-2",children:[(0,va.jsx)("button",{onClick:()=>{const e=prompt("Enter any remarks for this session:","Score: ".concat(g," / ").concat(b));null!==e&&(t({game:"Triad & Tetrads Quiz",date:(new Date).toLocaleDateString(),remarks:e}),alert("Session logged!"))},className:"bg-green-600 hover:bg-green-500 text-white font-bold py-1 px-3 rounded-lg text-sm",children:"Log Session"}),(0,va.jsx)("button",{onClick:()=>A(e=>!e),className:"p-2 rounded-md bg-slate-700 hover:bg-slate-600 text-sm font-semibold",children:"Controls"})]})]}),(0,va.jsxs)("div",{className:"grid grid-cols-3 items-center mb-4",children:[(0,va.jsxs)("span",{className:"text-xl justify-self-start",children:["Score: ",g,"/",b]}),(0,va.jsx)("div",{className:"justify-self-center",children:S.length>0&&(0,va.jsx)("button",{onClick:()=>T(S.length-1),disabled:D,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-3 rounded-lg text-sm disabled:opacity-50",children:"Review History"})}),(0,va.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer font-semibold justify-self-end",children:[(0,va.jsx)("span",{children:"Auto-Advance"}),(0,va.jsxs)("div",{className:"relative",children:[(0,va.jsx)("input",{type:"checkbox",checked:x,onChange:()=>_(e=>!e),className:"sr-only peer"}),(0,va.jsx)("div",{className:"w-11 h-6 bg-gray-500 rounded-full peer peer-focus:ring-2 peer-focus:ring-blue-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),(0,va.jsx)("div",{className:"min-h-[6rem] p-4 bg-slate-900/50 rounded-lg flex justify-center items-center mb-4",children:"nameTheTriad"===F.mode?(0,va.jsx)("p",{className:"text-4xl font-bold text-teal-300 tracking-widest",children:F.notes.join(" - ")}):(0,va.jsxs)("p",{className:"text-4xl font-bold text-teal-300",children:[F.root," ",F.quality]})}),(0,va.jsx)("div",{className:"my-4 min-h-[60px] flex flex-col justify-center ".concat(D?"":"correct"===h.type?"text-green-400":"text-red-400"),children:D?(()=>{const{question:e,userAnswer:t,wasCorrect:n}=R;let r,s;return"nameTheTriad"===e.mode?(r="".concat(t.noteLetter||"?").concat(t.accidental||""," ").concat(t.quality||"?").trim(),s="".concat(e.root," ").concat(e.quality)):(r=t.notes&&t.notes.length>0?t.notes.sort().join(", "):"No answer",s=e.rootPositionNotes.join(", ")),(0,va.jsxs)("div",{className:"text-center p-3 rounded-lg ".concat(n?"bg-green-900/50":"bg-red-900/50"),children:[(0,va.jsxs)("p",{className:"font-bold text-gray-200",children:["Correct Answer: ",(0,va.jsx)("span",{className:"text-teal-300 font-semibold",children:s})]}),!n&&(0,va.jsxs)("p",{className:"mt-1",children:[(0,va.jsx)("span",{className:"font-bold text-gray-300",children:"Your Answer:"})," ",(0,va.jsx)("span",{className:"text-red-400 font-semibold",children:r})]})]})})():(0,va.jsx)("p",{className:"text-lg font-bold text-center",children:h.message||(0,va.jsx)(va.Fragment,{children:"\xa0"})})}),(0,va.jsx)("div",{className:"space-y-4",children:D?null:"nameTheTriad"===F.mode?(0,va.jsxs)(va.Fragment,{children:[(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Root Note"}),(0,va.jsx)("div",{className:"grid grid-cols-7 gap-1",children:yo.map(e=>(0,va.jsx)("button",{onClick:()=>U("noteLetter",e),disabled:p,className:"py-2 rounded font-semibold ".concat(L.noteLetter===e?B:q),children:e},e))})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Accidental"}),(0,va.jsx)("div",{className:"grid grid-cols-3 gap-1",children:xo.map(e=>(0,va.jsx)("button",{onClick:()=>U("accidental","natural"===e.id?"":e.id),disabled:p,className:"py-2 rounded font-semibold text-xl ".concat(L.accidental===("natural"===e.id?"":e.id)?B:q),children:e.display},e.id))})]}),(0,va.jsxs)("div",{children:[(0,va.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Quality"}),(0,va.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-1",children:V.map(e=>(0,va.jsx)("button",{onClick:()=>U("quality",e),disabled:p,className:"p-2 rounded font-semibold ".concat(L.quality===e?B:q),children:e},e))})]})]}):(0,va.jsxs)("div",{children:[(0,va.jsxs)("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:["Select ",z," Notes"]}),(0,va.jsx)("div",{className:"grid grid-cols-6 gap-1",children:bo.map(e=>{var t;return(0,va.jsx)("button",{onClick:()=>(e=>{if(p||D)return;const t=u.notes||[],n=t.includes(e)?t.filter(t=>t!==e):[...t,e].slice(0,z);d({notes:n})})(e),disabled:p,className:"py-2 rounded font-semibold text-sm ".concat(null!==(t=L.notes)&&void 0!==t&&t.includes(e)?B:q),children:e},e)})})]})}),(0,va.jsx)("div",{className:"h-20 mt-4 flex justify-center items-center",children:D?(0,va.jsxs)("div",{className:"flex items-center justify-center gap-4 w-full",children:[(0,va.jsx)("button",{onClick:()=>I(-1),disabled:0===N,className:"bg-slate-600 hover:bg-slate-500 font-bold p-3 rounded-lg disabled:opacity-50",children:"Prev"}),(0,va.jsx)("button",{onClick:()=>T(null),className:"flex-grow max-w-xs bg-purple-600 hover:bg-purple-500 font-bold p-3 rounded-lg text-xl",children:"Return to Quiz"}),(0,va.jsx)("button",{onClick:()=>I(1),disabled:N===S.length-1,className:"bg-slate-600 hover:bg-slate-500 font-bold p-3 rounded-lg disabled:opacity-50",children:"Next"})]}):p?!x&&(0,va.jsx)("button",{onClick:M,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-8 rounded-lg animate-pulse",children:"Next Question"}):(0,va.jsx)("button",{onClick:P,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-lg",children:"Submit"})})]}),(0,va.jsx)("div",{className:"hidden md:block bg-slate-700 rounded-lg transition-all duration-300 ease-in-out ".concat(j?"w-80 p-4":"w-0 p-0 overflow-hidden"),children:(0,va.jsxs)("div",{className:"".concat(!j&&"hidden"),children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300 mb-4",children:"Settings & Controls"}),W]})}),j&&(0,va.jsx)("div",{className:"md:hidden fixed inset-0 z-50 flex justify-center items-center bg-black/60",onClick:()=>A(!1),children:(0,va.jsxs)("div",{className:"w-11/12 max-w-sm bg-slate-800 rounded-2xl p-4 max-h-[85vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,va.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center mb-4",children:[(0,va.jsx)("h3",{className:"text-xl font-bold text-teal-300",children:"Settings & Controls"}),(0,va.jsx)("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-white text-2xl font-bold",children:"\xd7"})]}),(0,va.jsx)("div",{className:"flex-grow overflow-y-auto pr-2",children:W})]})})]})},No=()=>{const[t,n]=(0,e.useState)("welcome"),[r,s]=(0,e.useState)(null),{activeTool:i,unlockAudio:a}=ya(),o=e=>{a(),n(e),s(null)};return(0,va.jsxs)("div",{className:"min-h-screen bg-slate-900 font-inter text-gray-200 p-4 pb-32 md:p-6 transition-all duration-300 ".concat("log"===i?"md:pl-96":"md:pl-72"),children:[(0,va.jsx)("div",{className:"hidden md:block fixed top-5 left-0 z-50",children:(0,va.jsx)("img",{src:"".concat("/musical-tools-app","/logo.png"),alt:"Signature Logo",className:"h-32 w-auto"})}),(0,va.jsx)(Ya,{}),(0,va.jsxs)("header",{className:"w-full max-w-5xl mx-auto bg-slate-800 shadow-lg rounded-xl p-6 mb-8 text-center",children:[(0,va.jsx)("h1",{className:"text-3xl md:text-5xl font-extrabold text-teal-400 leading-tight",children:"Musical Practice Tools"}),(0,va.jsx)("p",{className:"text-md md:text-lg text-gray-300",children:"Your comprehensive companion for musical growth!"})]}),(0,va.jsx)("nav",{className:"w-full max-w-5xl mx-auto bg-slate-800 shadow-md rounded-xl p-4 md:p-6 mb-8",children:(0,va.jsxs)("div",{className:"flex flex-col md:flex-row justify-around gap-y-4 md:gap-x-6",children:[(0,va.jsx)("div",{className:"flex-1 text-center",children:(0,va.jsx)("button",{onClick:()=>o("welcome"),className:"px-6 py-3 rounded-lg text-lg font-bold transition-all duration-300 ease-in-out w-full ".concat("welcome"===t?"bg-blue-600 text-white shadow-lg":"bg-slate-700 text-blue-300 hover:bg-slate-600"),children:"Welcome"})}),[{name:"Generators",tools:[{id:"note-generator",name:"Note Generator"},{id:"interval-generator",name:"Interval Generator"},{id:"chord-progression-generator",name:"Chord Progression Generator"},{id:"diagram-maker",name:"Diagram Maker"}]},{name:"Music Theory",tools:[{id:"name-the-interval-quiz",name:"Name The Interval"},{id:"intervals-quiz",name:"Interval Practice"},{id:"triad-quiz",name:"Triad & Tetrads Quiz"},{id:"chord-trainer",name:"Chord Trainer"}]},{name:"Practical Exercises",tools:[{id:"interval-fretboard-quiz",name:"Fretboard Intervals"}]}].map(e=>(0,va.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,va.jsxs)("button",{onClick:()=>{return t=e.name,void s(e=>e===t?null:t);var t},className:"w-full bg-slate-700 hover:bg-slate-600 rounded-lg p-3 flex justify-between items-center transition-all",children:[(0,va.jsx)("h3",{className:"text-lg font-bold text-teal-300",children:e.name}),(0,va.jsx)("span",{className:"transform transition-transform duration-300 ".concat(r===e.name?"rotate-180":""),children:"\u25bc"})]}),r===e.name&&(0,va.jsx)("div",{className:"w-full flex flex-col items-center gap-2 bg-slate-900/50 p-2 rounded-b-lg animate-fade-in-down",children:e.tools.map(e=>(0,va.jsx)("button",{onClick:()=>o(e.id),className:"w-full px-4 py-2 rounded-full text-md font-medium transition-all duration-300 ease-in-out ".concat(t===e.id?"bg-blue-600 text-white shadow-sm":"text-blue-300 hover:bg-slate-700"),children:e.name},e.id))})]},e.name))]})}),(0,va.jsxs)("main",{className:"w-full max-w-5xl mx-auto bg-slate-800 shadow-2xl rounded-xl p-4 md:p-8 transform transition-transform duration-500 ease-out flex-grow",children:["welcome"===t&&(0,va.jsx)(wa,{}),"chord-trainer"===t&&(0,va.jsx)(qa,{}),"intervals-quiz"===t&&(0,va.jsx)(ja,{}),"name-the-interval-quiz"===t&&(0,va.jsx)(Aa,{}),"note-generator"===t&&(0,va.jsx)(Ea,{}),"interval-fretboard-quiz"===t&&(0,va.jsx)(Za,{}),"diagram-maker"===t&&(0,va.jsx)(ho,{}),"chord-progression-generator"===t&&(0,va.jsx)(mo,{}),"interval-generator"===t&&(0,va.jsx)(go,{}),"triad-quiz"===t&&(0,va.jsx)(Co,{})]}),(0,va.jsx)("footer",{className:"w-full max-w-5xl mx-auto text-center mt-8 text-gray-400 text-sm",children:(0,va.jsx)("p",{children:"\xa9 2025 Toon's Musical Practice Tools. All rights reserved."})})]})};const To=function(){return(0,va.jsx)(xa,{children:(0,va.jsx)(No,{})})},jo=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:i,getTTFB:a}=t;n(e),r(e),s(e),i(e),a(e)})};t.createRoot(document.getElementById("root")).render((0,va.jsx)(e.StrictMode,{children:(0,va.jsx)(To,{})})),jo()})()})();
//# sourceMappingURL=main.d2bd464f.js.map